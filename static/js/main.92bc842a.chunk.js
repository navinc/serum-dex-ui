(this["webpackJsonpserum-dex-ui"]=this["webpackJsonpserum-dex-ui"]||[]).push([[0],{319:function(e,t,n){e.exports=n.p+"static/media/logo.49174c73.svg"},320:function(e){e.exports=JSON.parse('[{"name":"Bonfida","url":"https://bonfida.com","description":"A dex, wallet, and analytics ecosystem","icon":"","tags":["dex","analytics","nft","wallet","token"]},{"name":"Cryptocurrencies.ai","url":"https://dex.cryptocurrencies.ai","description":"","icon":"","tags":["dex"]},{"name":"Serum Swap","url":"https://swap.projectserum.com","description":"Automated market maker swap service on Serum","icon":"","tags":["dex","amm","swap","pool"]},{"name":"Token Creator","url":"https://spl-token-ui.netlify.app","description":"Create spl tokens","icon":"","tags":["wallet","token"]},{"name":"Bonfida DEX","url":"https://bonfida.com/dex","description":"","icon":"","tags":["dex"]},{"name":"Cryptocurrencies.Ai DEX","url":"https://dex.cryptocurrencies.ai/","description":"","icon":"","tags":["dex"]},{"name":"Serum Today","url":"https://serum.today","description":"","icon":"","tags":["dex"]},{"name":"Serum Pro","url":"https://serumpro.org","description":"","icon":"","tags":["dex"]},{"name":"Folkvang.io DEX","url":"https://serum-mirror.folkvang.io/","description":"","icon":"","tags":["dex"]},{"name":"SerumStake DEX","url":"https://dex.serumstakers.com","description":"","icon":"","tags":["dex"]},{"name":"Tech.Ed Training","url":"https://serum.techedtraining.com/","description":"","icon":"","tags":["dex"]},{"name":"Santosha Exchange","url":"https://exchange.santosha.digital","description":"","icon":"","tags":["dex"]},{"name":"Pangea DEX","url":"https://pangeadex.com/","description":"","icon":"","tags":["dex"]},{"name":"SerumDex.Exchange","url":"https://serumdex.exchange","description":"","icon":"","tags":["dex"]},{"name":"SolFlare DEX","url":"https://dex.solflare.com","description":"","icon":"","tags":["dex"]},{"name":"Advance Finance DEX","url":"https://advance.finance","description":"","icon":"","tags":["dex"]},{"name":"Viralic DEX","url":"https://dex.viralic.io","description":"","icon":"","tags":["dex"]},{"name":"Illuminati Finance","url":"http://illuminati.finance/serum","description":"","icon":"","tags":["dex"]},{"name":"Ourord DEX","url":"https://dex.ourord.com","description":"","icon":"","tags":["dex"]},{"name":"BallsDeep DEX","url":"https://serumdex.ballsdeep.me","description":"","icon":"","tags":["dex"]},{"name":"TradeOnSerum DEX","url":"https://www.tradeonserum.com/","description":"","icon":"","tags":["dex"]},{"name":"YMAX DEX","url":"https://ymax.finance/","description":"","icon":"","tags":["dex","yield"]},{"name":"Ingirumimusnocteetconsumimurigni DEX","url":"https://ingirumimusnocteetconsumimurigni.io","description":"","icon":"","tags":["dex"]},{"name":"Coin98","url":"https://coin98.app","description":"","icon":"","tags":["dex","mobile","wallet"]},{"name":"AMM Project Proposal","url":"https://serum-academy.com//en/serum-project-ideas/project-ideas/#amm-bots-using-pools","description":"","icon":"","tags":["amm","yield"]},{"name":"Serum Swap UI Source","url":"https://github.com/project-serum/oyster-swap","description":"","icon":"","tags":["source","amm","swap","yield"]},{"name":"Serum Swap Source","url":"https://github.com/solana-labs/solana-program-library/tree/master/token-swap","description":"","icon":"","tags":["source","amm","swap","yield"]},{"name":"Folkvang.io Swap","url":"https://serum-swap.folkvang.io/","description":"","icon":"","tags":["amm","swap","yield"]},{"name":"Solible","url":"https://solible.com","description":"","icon":"","tags":["nft","token","wallet","bonfida"]},{"name":"Sollet.io","url":"https://sollet.io","description":"","icon":"","tags":["token","wallet"]},{"name":"Sollet.io Source","url":"https://github.com/project-serum/spl-token-wallet","description":"","icon":"","tags":["token","wallet","source"]},{"name":"Bonfida Wallet","url":"https://bonfida.com/wallet","description":"","icon":"","tags":["token","wallet"]},{"name":"Bonfida Wallet Source","url":"https://github.com/dr497/spl-token-wallet","description":"","icon":"","tags":["token","wallet","source"]},{"name":"Math Wallet","url":"https://mathwallet.org","description":"","icon":"","tags":["token","wallet"]},{"name":"Cryptocurrencies.ai Yield","url":"https://dex.cryptocurrencies.ai/rewards","description":"","icon":"","tags":["yield"]},{"name":"Solana Blockchain Source","url":"https://github.com/solana-labs/solana","description":"","icon":"","tags":["solana","source","on-chain","blockchain","chain"]},{"name":"Solana Program Library","url":"https://github.com/solana-labs/solana-program-library","description":"","icon":"","tags":["solana","source","on-chain","blockchain","chain"]},{"name":"Solana Web3 SDK","url":"https://github.com/solana-labs/solana-web3.js","description":"","icon":"","tags":["solana","source","on-chain","blockchain","chain","js"]},{"name":"Solana Explorer","url":"https://explorer.solana.com","description":"","icon":"","tags":["solana","explorer","chain","blockchain","transaction"]},{"name":"Solana Explorer Source","url":"https://github.com/solana-labs/solana/tree/master/explorer","description":"","icon":"","tags":["solana","explorer","chain","blockchain","transaction"]},{"name":"Solana Hello World","url":"https://github.com/solana-labs/example-helloworld","description":"","icon":"","tags":["solana","chain","blockchain","on-chain","program","source"]},{"name":"Solana Technical Documentation","url":"https://docs.solana.com/","description":"","icon":"","tags":["documentation","docs","solana","blockchain","chain","on-chain"]},{"name":"Solana Discord","url":"https://solana.com/discord","description":"","icon":"","tags":["discord","solana","community"]},{"name":"Solana Wormhole Source","url":"https://github.com/certusone/wormhole","description":"","icon":"","tags":["source","bridge","swap","token","wallet"]},{"name":"Solana Wormhold Description","url":"https://medium.com/certus-one/introducing-the-wormhole-bridge-24911b7335f7","description":"","icon":"","tags":["source","bridge","swap","token","wallet"]},{"name":"Solana NFT","url":"https://spl.solana.com/token#example-create-a-non-fungible-token","description":"","icon":"","tags":["nft","solana","source","documentation"]},{"name":"Awesome Serum","url":"https://github.com/project-serum/awesome-serum","description":"","icon":"","tags":["documentation","community"]},{"name":"Staking RFC","url":"https://github.com/project-serum/rfcs/blob/master/text/0001-registry.md","description":"","icon":"","tags":["staking","on-chain","blockchain","rewards","solana","srm","node"]},{"name":"Node RFC","url":"https://github.com/project-serum/rfcs/blob/master/text/0001-registry.md","description":"","icon":"","tags":["node","staking","on-chain","blockchain","rewards","governance","solana","srm"]},{"name":"SolFlare","url":"https://solflare.com/","description":"","icon":"","tags":["wallet","explorer","token"]},{"name":"SolFlare Hardware Guide","url":"https://docs.solana.com/wallet-guide/ledger-live","description":"","icon":"","tags":["wallet","explorer","token","hardware"]},{"name":"SOL Wallet Adapter","url":"https://github.com/project-serum/sol-wallet-adapter","description":"","icon":"","tags":["wallet","js"]},{"name":"Serum DEX Source","url":"https://github.com/project-serum/serum-dex","description":"","icon":"","tags":["source","dex"]},{"name":"serum.js Source","url":"https://github.com/project-serum/serum-js","description":"","icon":"","tags":["js","source","documentation"]},{"name":"Serum DEX UI Source","url":"https://github.com/project-serum/serum-dex-ui","description":"","icon":"","tags":["source","ui"]},{"name":"PySerum","url":"https://github.com/serum-community/pyserum","description":"","icon":"","tags":["python","source"]},{"name":"Serum Academy","url":"https://serum-academy.com","description":"","icon":"","tags":["documentation"]},{"name":"Soltalk","url":"https://github.com/kemargrant/soltalk","description":"","icon":"","tags":["messaging"]},{"name":"SAMM Source","url":"https://gitlab.com/OpinionatedGeek/samm","description":"","icon":"","tags":["amm"]},{"name":"SAMM RFC","url":"https://github.com/project-serum/rfcs/blob/master/text/0003-samm.md","description":"","icon":"","tags":["amm","documentation"]},{"name":"Serum (SRM) ERC20","url":"https://etherscan.io/token/0x476c5e26a75bd202a9683ffd34359c0cc15be0ff","description":"","icon":"","tags":["srm","token","solana","eth"]},{"name":"MegaSerum (MSRM) ERC20","url":"https://etherscan.io/token/0x1320c8c64b9f2eAa851F70702e6C9FC1EE4E8Ce4","description":"","icon":"","tags":["srm","token","solana","eth"]},{"name":"Bonfida API Documentation","url":"https://docs.bonfida.com","description":"Documentation of the Bonfida API","icon":"","tags":["bonfida","api","data","documentation"]}]')},332:function(e,t,n){e.exports=n(584)},337:function(e,t,n){},338:function(e,t,n){},341:function(e,t){},342:function(e,t){},372:function(e,t){},374:function(e,t){},386:function(e,t){},387:function(e,t){},584:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(32),c=n.n(o),i=(n(337),n(338),n(9)),l=n.n(i),u=n(17),s=n(6),d=n(57),m=n(14),p=n(43),f=n.n(p);function b(e){if(!e)return!1;try{return new m.PublicKey(e),!0}catch(t){return!1}}function v(e){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function k(e,t){return t?Math.floor(e*Math.pow(10,t))/Math.pow(10,t):e}function y(e,t){return t?Math.round(e*Math.pow(10,t))/Math.pow(10,t):e}function E(e){return isNaN(e)||Math.floor(e)===e?0:e.toString().split(".")[1].length||0}function O(e,t){var n=e.div(t).toNumber(),a=e.umod(t),r=a.gcd(t);return n+a.div(r).toNumber()/t.div(r).toNumber()}function x(e){return new f.a(10).pow(new f.a(e))}var w={};function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,r=Object(a.useState)(e+"\n"+n),o=Object(s.a)(r,2),c=o[1];Object(a.useEffect)((function(){return w[e]||(w[e]=[]),w[e].push(c),function(){w[e]=w[e].filter((function(e){return e!==c})),0===w[e].length&&delete w[e]}}),[e]);var i=Object(a.useCallback)((function(t){n!==t&&(null===t?localStorage.removeItem(e):localStorage.setItem(e,t),w[e].forEach((function(n){return n(e+"\n"+t)})))}),[n,e]);return[n,i]}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=j(e,JSON.stringify(t)),a=Object(s.a)(n,2),r=a[0],o=a[1];return[r&&JSON.parse(r),function(e){return o(JSON.stringify(e))}]}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.toBase58();return n.slice(0,t)+"\u2026"+n.slice(-t)}function M(e,t,n){if(!n&&Object.keys(e).length!==Object.keys(t).length)return!1;n=n||Object.keys(e);var a,r=Object(d.a)(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(e[o]!==t[o])return!1}}catch(c){r.e(c)}finally{r.f()}return!0}var C=n(50),A=n(103),I=n(99),B=n(16),P=n.n(B),F=new Date,z=new Map,N=function e(t,n,a,r,o,c){Object(I.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.refreshInterval=void 0,this.refreshIntervalOnError=void 0,this.callback=void 0,this.cacheNullValues=!0,this.cacheKey=t,this.fn=n,this.refreshInterval=a,this.refreshIntervalOnError=r,this.callback=o,this.cacheNullValues=c},K=function(){function e(t,n,a){var r=this;Object(I.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.timeoutId=void 0,this.listeners=void 0,this.errors=void 0,this.cacheNullValues=!0,this.refresh=Object(u.a)(l.a.mark((function e(){var t,n,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.timeoutId&&(clearTimeout(r.timeoutId),r.timeoutId=null),!r.stopped){e.next=3;break}return e.abrupt("return");case 3:return t=!1,e.prev=4,e.next=7,r.fn();case 7:if(n=e.sent,r.cacheNullValues||null!==n){e.next=14;break}return console.log("Not caching null value for ".concat(r.cacheKey)),r.errors=0,e.abrupt("return",n);case 14:return z.set(r.cacheKey,n),r.errors=0,r.notifyListeners(),e.abrupt("return",n);case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),++r.errors,console.warn(e.t0),t=!0;case 25:return e.prev=25,r.timeoutId||r.stopped||(a=r.refreshInterval,t&&r.refreshIntervalOnError&&r.refreshIntervalOnError>0&&(a=r.refreshIntervalOnError),r.errors>0&&(a=Math.min(1e3*Math.pow(2,r.errors-1),6e4)),(o=+new Date-+F)<5e3&&(a+=5e3-o/2),"hidden"===document.visibilityState?a=6e4:document.hasFocus()||(a*=1.5),a*=.8+.4*Math.random(),r.timeoutId=setTimeout(r.refresh,a)),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,20,25,28]])}))),this.cacheKey=t,this.fn=n,this.timeoutId=null,this.listeners=new Set,this.errors=0,this.cacheNullValues=a}return Object(A.a)(e,[{key:"addListener",value:function(e){var t=this.refreshInterval;this.listeners.add(e),this.refreshInterval<t&&this.refresh()}},{key:"removeListener",value:function(e){P()(this.listeners.delete(e)),this.stopped&&this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"notifyListeners",value:function(){this.listeners.forEach((function(e){return e.callback()}))}},{key:"refreshInterval",get:function(){return Math.min.apply(Math,Object(C.a)(Object(C.a)(this.listeners).map((function(e){return e.refreshInterval}))))}},{key:"refreshIntervalOnError",get:function(){var e=Object(C.a)(this.listeners).map((function(e){return e.refreshIntervalOnError})).filter((function(e){return null!==e}));return 0===e.length?null:Math.min.apply(Math,Object(C.a)(e))}},{key:"stopped",get:function(){return 0===this.listeners.size}}]),e}(),q=new(function(){function e(){Object(I.a)(this,e),this.loops=new Map}return Object(A.a)(e,[{key:"addListener",value:function(e){this.loops.has(e.cacheKey)||this.loops.set(e.cacheKey,new K(e.cacheKey,e.fn,e.cacheNullValues)),this.loops.get(e.cacheKey).addListener(e)}},{key:"removeListener",value:function(e){var t=this.loops.get(e.cacheKey);t.removeListener(e),t.stopped&&this.loops.delete(e.cacheKey)}},{key:"refresh",value:function(e){this.loops.has(e)&&this.loops.get(e).refresh()}},{key:"refreshAll",value:function(){return Promise.all(Object(C.a)(this.loops.values()).map((function(e){return e.refresh()})))}}]),e}());function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.refreshInterval,o=void 0===r?6e4:r,c=n.refreshIntervalOnError,i=void 0===c?null:c,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=Object(a.useReducer)((function(e){return e+1}),0),d=Object(s.a)(u,2),m=d[1];if(Object(a.useEffect)((function(){if(!t)return function(){};var n=new N(t,e,o,i,m,l);return q.addListener(n),function(){return q.removeListener(n)}}),[t,o]),!t)return[null,!1];var p=z.has(t),f=p?z.get(t):void 0;return[f,p]}function D(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&z.delete(e);var n=q.loops.get(e);n&&(n.refresh(),t&&n.notifyListeners())}var L=n(55),W=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com",custom:!1},{name:"localnet",endpoint:"http://127.0.0.1:8899",custom:!1}],U=new Map,_=r.a.createContext(null);function X(e){var t=e.children,n=S("connectionEndpts",W[0].endpoint),o=Object(s.a)(n,2),c=o[0],i=o[1],l=S("customConnectionEndpoints",[]),u=Object(s.a)(l,2),d=u[0],p=u[1],f=W.concat(d),b=Object(a.useMemo)((function(){return new m.Connection(c,"recent")}),[c]),v=Object(a.useMemo)((function(){return new m.Connection(c,"recent")}),[c]);return Object(a.useEffect)((function(){var e=b.onAccountChange((new m.Account).publicKey,(function(){}));return function(){b.removeAccountChangeListener(e)}}),[b]),Object(a.useEffect)((function(){var e=b.onSlotChange((function(){return null}));return function(){b.removeSlotChangeListener(e)}}),[b]),Object(a.useEffect)((function(){var e=v.onAccountChange((new m.Account).publicKey,(function(){}));return function(){v.removeAccountChangeListener(e)}}),[v]),Object(a.useEffect)((function(){var e=v.onSlotChange((function(){return null}));return function(){v.removeSlotChangeListener(e)}}),[v]),r.a.createElement(_.Provider,{value:{endpoint:c,setEndpoint:i,connection:b,sendConnection:v,availableEndpoints:f,setCustomEndpoints:p}},t)}function H(){var e=Object(a.useContext)(_);if(!e)throw new Error("Missing connection context");return e.connection}function V(){var e=Object(a.useContext)(_);if(!e)throw new Error("Missing connection context");return e.sendConnection}function G(){var e=Object(a.useContext)(_);if(!e)throw new Error("Missing connection context");return{endpoint:e.endpoint,endpointInfo:e.availableEndpoints.find((function(t){return t.endpoint===e.endpoint})),setEndpoint:e.setEndpoint,availableEndpoints:e.availableEndpoints,setCustomEndpoints:e.setCustomEndpoints}}function Q(e){var t=H(),n=Object(L.a)(t,null===e||void 0===e?void 0:e.toBase58()),r=R(Object(u.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e?t.getAccountInfo(e):null);case 1:case"end":return n.stop()}}),n)}))),n,{refreshInterval:6e4}),o=Object(s.a)(r,2),c=o[0],i=o[1];return Object(a.useEffect)((function(){if(e){if(U.has(n)){++U.get(n).count}else{var a=null,r=t.onAccountChange(e,(function(e){e.data&&(a&&a.equals(e.data)||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.initializeOnly,r=void 0!==a&&a;if(!r||!z.has(e)){z.set(e,t);var o=q.loops.get(e);o&&o.notifyListeners()}}(n,e),a=e.data)}));U.set(n,{count:1,subscriptionId:r})}return function(){var e=U.get(n);e.count-1<=0?(t.removeAccountChangeListener(e.subscriptionId),U.delete(n)):--e.count}}}),[n]),[c,i]}function Y(e){var t=Q(e),n=Object(s.a)(t,1)[0];return n&&n.data}var J=n(36),Z=n(27),$=n(295),ee=n(329),te=n(243),ne=n(109);function ae(e){var t=e.external,n=void 0!==t&&t,a=Object(te.a)(e,["external"]),o=a.to,c=a.children,i=Object(te.a)(a,["to","children"]);return n?r.a.createElement("a",Object.assign({href:o,target:"_blank",rel:"noopener noreferrer"},i),c):r.a.createElement(ne.b,Object.assign({to:o},i),c)}function re(e){var t=e.message,n=e.description,a=e.txid,o=e.type,c=void 0===o?"info":o,i=e.placement,l=void 0===i?"bottomLeft":i;a&&(n=r.a.createElement(ae,{external:!0,to:"https://explorer.solana.com/tx/"+a,style:{color:"#0000ff"}},"View transaction ",a.slice(0,8),"...",a.slice(a.length-8))),ee.a[c]({message:r.a.createElement("span",{style:{color:"black"}},t),description:r.a.createElement("span",{style:{color:"black",opacity:.5}},n),placement:l,style:{backgroundColor:"white"}})}var oe=[{name:"sollet.io",url:"https://www.sollet.io"}],ce=r.a.createContext(null);function ie(e){var t,n,o,c=e.children,i=G().endpoint,l=S("walletProvider","https://www.sollet.io"),u=Object(s.a)(l,2),d=u[0],m=u[1];o=d||"https://www.sollet.io";var p=Object(a.useMemo)((function(){return new $.a(o,i)}),[o,i]),f=Object(a.useState)(!1),b=Object(s.a)(f,2),v=b[0],h=b[1];return Object(a.useEffect)((function(){return console.log("trying to connect"),p.on("connect",(function(){console.log("connected"),h(!0);var e=p.publicKey.toBase58();re({message:"Wallet update",description:"Connected to wallet "+(e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e)})})),p.on("disconnect",(function(){h(!1),re({message:"Wallet update",description:"Disconnected from wallet"})})),function(){p.disconnect(),h(!1)}}),[p]),r.a.createElement(ce.Provider,{value:{wallet:p,connected:v,providerUrl:o,setProviderUrl:m,providerName:null!==(t=null===(n=oe.find((function(e){return e.url===o})))||void 0===n?void 0:n.name)&&void 0!==t?t:o}},c)}function le(){var e=Object(a.useContext)(ce);if(!e)throw new Error("Missing wallet context");return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}var ue=n(8),se=n(62),de=n.n(se),me=n(110),pe=n(51),fe=n(7);function be(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,a=t.wallet,r=t.mintPublicKey,o=new m.Account,c=new m.Transaction,e.t0=m.SystemProgram,e.t1=a.publicKey,e.t2=o.publicKey,e.next=8,n.getMinimumBalanceForRentExemption(165);case 8:return e.t3=e.sent,e.t4=Z.TokenInstructions.TOKEN_PROGRAM_ID,e.t5={fromPubkey:e.t1,newAccountPubkey:e.t2,lamports:e.t3,space:165,programId:e.t4},i=e.t0.createAccount.call(e.t0,e.t5),c.add(i),c.add(Z.TokenInstructions.initializeAccount({account:o.publicKey,mint:r,owner:a.publicKey})),e.abrupt("return",{transaction:c,signer:o,newAccountPubkey:o.publicKey});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c,i,u,s,d,m,p,f,b,v,h,g,k;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.market,a=t.openOrders,r=t.connection,o=t.wallet,c=t.baseCurrencyAccount,i=t.quoteCurrencyAccount,n&&o&&r&&a&&(c||i)){e.next=4;break}return re({message:"Not connected"}),e.abrupt("return");case 4:if(d=null===c||void 0===c?void 0:c.pubkey,m=null===i||void 0===i?void 0:i.pubkey,d){e.next=13;break}return e.next=9,be({connection:r,wallet:o,mintPublicKey:n.baseMintAddress});case 9:p=e.sent,d=null===p||void 0===p?void 0:p.newAccountPubkey,u=null===p||void 0===p?void 0:p.transaction,s=null===p||void 0===p?void 0:p.signer;case 13:if(m){e.next=20;break}return e.next=16,be({connection:r,wallet:o,mintPublicKey:n.quoteMintAddress});case 16:f=e.sent,m=null===f||void 0===f?void 0:f.newAccountPubkey,u=null===f||void 0===f?void 0:f.transaction,s=null===f||void 0===f?void 0:f.signer;case 20:return null,n.supportsReferralFees&&(Z.TOKEN_MINTS.find((function(e){return"USDT"===e.name})),Z.TOKEN_MINTS.find((function(e){return"USDC"===e.name}))),e.next=24,n.makeSettleFundsTransaction(r,a,d,m,null);case 24:return b=e.sent,v=b.transaction,h=b.signers,g=qe([u,v]),k=s?[].concat(Object(C.a)(h),[s]):h,e.next=31,Ae({transaction:g,signers:k,wallet:o,connection:r,sendingMessage:"Settling funds..."});case 31:return e.abrupt("return",e.sent);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c,i,s,d,m,p,f,b,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.connection,a=t.wallet,r=t.tokenAccounts,o=t.markets,c=t.selectedTokenAccounts,o&&a&&n&&r){e.next=3;break}return e.abrupt("return");case 3:return i=[],o.reduce((function(e,t){return e.push(t._programId),e}),[]).forEach((function(e){i.find((function(t){return t.equals(e)}))||i.push(e)})),s=function(){var e=Object(u.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z.OpenOrders.findForOwner(n,a.publicKey,t);case 2:return r=e.sent,e.abrupt("return",r.filter((function(e){return e.baseTokenFree.toNumber()||e.quoteTokenFree.toNumber()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(i.map((function(e){return s(e)})));case 8:return d=e.sent,m=d.reduce((function(e,t){return e.concat(t)}),[]),e.next=12,Promise.all(m.map((function(e){var t,a,i=o.find((function(t){var n,a;return null===(n=t._decoded)||void 0===n||null===(a=n.ownAddress)||void 0===a?void 0:a.equals(e.market)})),l=null===i||void 0===i?void 0:i.baseMintAddress,u=null===i||void 0===i?void 0:i.quoteMintAddress,s=null===(t=kt(r,l,l&&c&&c[l.toBase58()]))||void 0===t?void 0:t.pubkey,d=null===(a=kt(r,u,u&&c&&c[u.toBase58()]))||void 0===a?void 0:a.pubkey;return s&&d?i&&i.makeSettleFundsTransaction(n,e,s,d):null})));case 12:if((p=e.sent.filter((function(e){return!!e})))&&0!==p.length){e.next=15;break}return e.abrupt("return");case 15:return f=p.slice(0,4).map((function(e){return e.transaction})),b=[],p.reduce((function(e,t){return e.concat(t.signers)}),[]).forEach((function(e){b.find((function(t){return t.publicKey.equals(e.publicKey)}))||b.push(e)})),v=qe(f),e.next=21,Ae({transaction:v,signers:b,wallet:a,connection:n});case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xe(Object(J.a)(Object(J.a)({},t),{},{orders:[t.order]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return we.apply(this,arguments)}function we(){return(we=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.market,a=t.wallet,r=t.connection,o=t.orders,c=n.makeMatchOrdersTransaction(5),o.forEach((function(e){c.add(n.makeCancelOrderInstruction(r,a.publicKey,e))})),c.add(n.makeMatchOrdersTransaction(5)),e.next=6,Ae({transaction:c,wallet:a,connection:r,sendingMessage:"Sending cancel..."});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c,i,u,s,d,p,f,b,v,h,g,k,y,O,x,w,j,S,T,M,A,I,B,P,F,z,N;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.side,o=t.price,c=t.size,i=t.orderType,u=t.market,s=t.connection,d=t.wallet,p=t.baseCurrencyAccount,f=t.quoteCurrencyAccount,b=(null===u||void 0===u||null===(n=u.minOrderSize)||void 0===n?void 0:n.toFixed(E(u.minOrderSize)))||(null===u||void 0===u?void 0:u.minOrderSize),v=(null===u||void 0===u||null===(a=u.tickSize)||void 0===a?void 0:a.toFixed(E(u.tickSize)))||(null===u||void 0===u?void 0:u.tickSize),h=function(e,t){return Math.abs(e/t%1)<1e-5||Math.abs(e/t%1-1)<1e-5},!isNaN(o)){e.next=7;break}return re({message:"Invalid price",type:"error"}),e.abrupt("return");case 7:if(!isNaN(c)){e.next=10;break}return re({message:"Invalid size",type:"error"}),e.abrupt("return");case 10:if(d&&d.publicKey){e.next=13;break}return re({message:"Connect wallet",type:"error"}),e.abrupt("return");case 13:if(u){e.next=16;break}return re({message:"Invalid  market",type:"error"}),e.abrupt("return");case 16:if(h(c,u.minOrderSize)){e.next=19;break}return re({message:"Size must be an increment of ".concat(b),type:"error"}),e.abrupt("return");case 19:if(!(c<u.minOrderSize)){e.next=22;break}return re({message:"Size too small",type:"error"}),e.abrupt("return");case 22:if(h(o,u.tickSize)){e.next=25;break}return re({message:"Price must be an increment of ".concat(v),type:"error"}),e.abrupt("return");case 25:if(!(o<u.tickSize)){e.next=28;break}return re({message:"Price under tick size",type:"error"}),e.abrupt("return");case 28:if(g=d.publicKey,k=new m.Transaction,y=[],p){e.next=41;break}return e.next=34,be({connection:s,wallet:d,mintPublicKey:u.baseMintAddress});case 34:O=e.sent,x=O.transaction,w=O.signer,j=O.newAccountPubkey,k.add(x),y.push(w),p=j;case 41:if(f){e.next=51;break}return e.next=44,be({connection:s,wallet:d,mintPublicKey:u.quoteMintAddress});case 44:S=e.sent,T=S.transaction,M=S.signer,A=S.newAccountPubkey,k.add(T),y.push(M),f=A;case 51:if(I="sell"===r?p:f){e.next=55;break}return re({message:"Need an SPL token account for cost currency",type:"error"}),e.abrupt("return");case 55:return B={owner:g,payer:I,side:r,price:o,size:c,orderType:i},console.log(B),P=u.makeMatchOrdersTransaction(5),k.add(P),e.next=61,u.makePlaceOrderTransaction(s,B,1e4,1e4);case 61:return F=e.sent,z=F.transaction,N=F.signers,k.add(z),k.add(u.makeMatchOrdersTransaction(5)),y.push.apply(y,Object(C.a)(N)),e.next=69,Ae({transaction:k,wallet:d,connection:s,signers:y,sendingMessage:"Sending order..."});case 69:return e.abrupt("return",e.sent);case 70:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c,i,p,b,v,h,g,k,y,E,O,x,w,j,S,T,M,C,A,I,B,P,F,z;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=function(){return(j=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new f.a(0);case 1:return e.prev=2,e.next=5,m.PublicKey.createProgramAddress([b.publicKey.toBuffer(),t.toArrayLike(pe.Buffer,"le",8)],p);case 5:return n=e.sent,e.abrupt("return",[n,t]);case 9:e.prev=9,e.t0=e.catch(2),t.iaddn(1);case 12:e.next=1;break;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)},w=function(){return j.apply(this,arguments)},n=t.connection,a=t.wallet,r=t.baseMint,o=t.quoteMint,c=t.baseLotSize,i=t.quoteLotSize,p=t.dexProgramId,b=new m.Account,v=new m.Account,h=new m.Account,g=new m.Account,k=new m.Account,y=new m.Account,E=new m.Account,O=0,x=new f.a(100),e.next=14,w();case 14:return S=e.sent,T=Object(s.a)(S,2),M=T[0],C=T[1],A=new m.Transaction,e.t0=A,e.t1=m.SystemProgram,e.t2=a.publicKey,e.t3=y.publicKey,e.next=25,n.getMinimumBalanceForRentExemption(165);case 25:return e.t4=e.sent,e.t5=Z.TokenInstructions.TOKEN_PROGRAM_ID,e.t6={fromPubkey:e.t2,newAccountPubkey:e.t3,lamports:e.t4,space:165,programId:e.t5},e.t7=e.t1.createAccount.call(e.t1,e.t6),e.t8=m.SystemProgram,e.t9=a.publicKey,e.t10=E.publicKey,e.next=34,n.getMinimumBalanceForRentExemption(165);case 34:return e.t11=e.sent,e.t12=Z.TokenInstructions.TOKEN_PROGRAM_ID,e.t13={fromPubkey:e.t9,newAccountPubkey:e.t10,lamports:e.t11,space:165,programId:e.t12},e.t14=e.t8.createAccount.call(e.t8,e.t13),e.t15=Z.TokenInstructions.initializeAccount({account:y.publicKey,mint:r,owner:M}),e.t16=Z.TokenInstructions.initializeAccount({account:E.publicKey,mint:o,owner:M}),e.t0.add.call(e.t0,e.t7,e.t14,e.t15,e.t16),I=new m.Transaction,e.t17=I,e.t18=m.SystemProgram,e.t19=a.publicKey,e.t20=b.publicKey,e.next=48,n.getMinimumBalanceForRentExemption(Z.Market.getLayout(p).span);case 48:return e.t21=e.sent,e.t22=Z.Market.getLayout(p).span,e.t23=p,e.t24={fromPubkey:e.t19,newAccountPubkey:e.t20,lamports:e.t21,space:e.t22,programId:e.t23},e.t25=e.t18.createAccount.call(e.t18,e.t24),e.t26=m.SystemProgram,e.t27=a.publicKey,e.t28=v.publicKey,e.next=58,n.getMinimumBalanceForRentExemption(5132);case 58:return e.t29=e.sent,e.t30=5132,e.t31=p,e.t32={fromPubkey:e.t27,newAccountPubkey:e.t28,lamports:e.t29,space:e.t30,programId:e.t31},e.t33=e.t26.createAccount.call(e.t26,e.t32),e.t34=m.SystemProgram,e.t35=a.publicKey,e.t36=h.publicKey,e.next=68,n.getMinimumBalanceForRentExemption(262156);case 68:return e.t37=e.sent,e.t38=262156,e.t39=p,e.t40={fromPubkey:e.t35,newAccountPubkey:e.t36,lamports:e.t37,space:e.t38,programId:e.t39},e.t41=e.t34.createAccount.call(e.t34,e.t40),e.t42=m.SystemProgram,e.t43=a.publicKey,e.t44=g.publicKey,e.next=78,n.getMinimumBalanceForRentExemption(65548);case 78:return e.t45=e.sent,e.t46=65548,e.t47=p,e.t48={fromPubkey:e.t43,newAccountPubkey:e.t44,lamports:e.t45,space:e.t46,programId:e.t47},e.t49=e.t42.createAccount.call(e.t42,e.t48),e.t50=m.SystemProgram,e.t51=a.publicKey,e.t52=k.publicKey,e.next=88,n.getMinimumBalanceForRentExemption(65548);case 88:return e.t53=e.sent,e.t54=65548,e.t55=p,e.t56={fromPubkey:e.t51,newAccountPubkey:e.t52,lamports:e.t53,space:e.t54,programId:e.t55},e.t57=e.t50.createAccount.call(e.t50,e.t56),e.t58=Z.DexInstructions.initializeMarket({market:b.publicKey,requestQueue:v.publicKey,eventQueue:h.publicKey,bids:g.publicKey,asks:k.publicKey,baseVault:y.publicKey,quoteVault:E.publicKey,baseMint:r,quoteMint:o,baseLotSize:new f.a(c),quoteLotSize:new f.a(i),feeRateBps:O,vaultSignerNonce:C,quoteDustThreshold:x,programId:p}),e.t17.add.call(e.t17,e.t25,e.t33,e.t41,e.t49,e.t57,e.t58),e.next=97,Promise.all([Be({transaction:A,wallet:a,connection:n,signers:[y,E]}),Be({transaction:I,wallet:a,connection:n,signers:[b,v,h,g,k]})]);case 97:B=e.sent,P=Object(d.a)(B),e.prev=99,P.s();case 101:if((F=P.n()).done){e.next=107;break}return z=F.value,e.next=105,Fe({signedTransaction:z,connection:n});case 105:e.next=101;break;case 107:e.next=112;break;case 109:e.prev=109,e.t59=e.catch(99),P.e(e.t59);case 112:return e.prev=112,P.f(),e.finish(112);case 115:return e.abrupt("return",b.publicKey);case 116:case"end":return e.stop()}}),e,null,[[99,109,112,115]])})))).apply(this,arguments)}var Ce=function(){return(new Date).getTime()/1e3};function Ae(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c,i,u,s,d,m,p,f,b,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,a=t.wallet,r=t.signers,o=void 0===r?[]:r,c=t.connection,i=t.sendingMessage,u=void 0===i?"Sending transaction...":i,s=t.sentMessage,d=void 0===s?"Transaction sent":s,m=t.successMessage,p=void 0===m?"Transaction confirmed":m,f=t.timeout,b=void 0===f?15e3:f,e.next=3,Be({transaction:n,wallet:a,signers:o,connection:c});case 3:return v=e.sent,e.next=6,Fe({signedTransaction:v,connection:c,sendingMessage:u,sentMessage:d,successMessage:p,timeout:b});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,a=t.wallet,r=t.signers,o=void 0===r?[]:r,c=t.connection,e.next=3,c.getRecentBlockhash("max");case 3:return n.recentBlockhash=e.sent.blockhash,n.setSigners.apply(n,[a.publicKey].concat(Object(C.a)(o.map((function(e){return e.publicKey}))))),o.length>0&&n.partialSign.apply(n,Object(C.a)(o)),e.next=8,a.signTransaction(n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(u.a)(l.a.mark((function e(t){var n,a,r,o,c,i,s,d,m,p,f,b,h,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,a=t.connection,r=t.sendingMessage,o=void 0===r?"Sending transaction...":r,c=t.sentMessage,i=void 0===c?"Transaction sent":c,s=t.successMessage,d=void 0===s?"Transaction confirmed":s,m=t.timeout,p=void 0===m?15e3:m,f=n.serialize(),b=Ce(),re({message:o}),e.next=6,a.sendRawTransaction(f,{skipPreflight:!0});case 6:return h=e.sent,re({message:i,type:"success",txid:h}),console.log("Started awaiting confirmation for",h),g=!1,Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g||!(Ce()-b<p)){e.next=6;break}return a.sendRawTransaction(f,{skipPreflight:!0}),e.next=4,v(300);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=11,e.next=14,Ne(h,p,a);case 14:e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(11),!e.t0.timeout){e.next=20;break}throw new Error("Timed out awaiting confirmation on transaction");case 20:throw new Error("Transaction failed");case 21:return e.prev=21,g=!0,e.finish(21);case 24:return re({message:d,type:"success",txid:h}),console.log("Latency",h,Ce()-b),e.abrupt("return",h);case 27:case"end":return e.stop()}}),e,null,[[11,16,21,24]])})))).apply(this,arguments)}function Ne(e,t,n){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(u.a)(l.a.mark((function e(t,n,a){var r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.next=3,new Promise((function(e,o){Object(u.a)(l.a.mark((function c(){return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:setTimeout((function(){r||(r=!0,console.log("Timed out for txid",t),o({timeout:!0}))}),n);try{a.onSignature(t,(function(n){console.log("WS confirmed",t,n),r=!0,n.err?o(n.err):e(n)}),"recent"),console.log("Set up WS connection",t)}catch(i){r=!0,console.log("WS error in setup",t,i)}case 2:if(r){c.next=8;break}return Object(u.a)(l.a.mark((function n(){var c,i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.getSignatureStatuses([t]);case 3:c=n.sent,i=c&&c.value[0],r||(i?i.err?(console.log("REST error for",t,i),r=!0,o(i.err)):i.confirmations?(console.log("REST confirmation for",t,i),r=!0,e(i)):console.log("REST no confirmations for",t,i):console.log("REST null result for",t,i)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r||console.log("REST connection error: txid",t,n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))(),c.next=6,v(300);case 6:c.next=2;break;case 8:case"end":return c.stop()}}),c)})))()}));case 3:return o=e.sent,r=!0,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e){var t=new m.Transaction;return e.filter((function(e){return void 0!==e})).forEach((function(e){t.add(e)})),t}var Re,De=Object(fe.a)({executable:"boolean",owner:"string",lamports:"number",data:"any",rentEpoch:"number?"}),Le=(Re=fe.a.array([fe.a.union(["null",De])]),function(e){var t=fe.a.literal("2.0");return fe.a.union([Object(fe.a)({jsonrpc:t,id:"string",error:"any"}),Object(fe.a)({jsonrpc:t,id:"string",error:"null?",result:e})])}({context:Object(fe.a)({slot:"number"}),value:Re}));function We(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(u.a)(l.a.mark((function e(t,n){var a,r,o,c,i,u,s,p,f,b,v,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[n.map((function(e){return e.toBase58()})),{commitment:"recent"}],e.next=3,t._rpcRequest("getMultipleAccounts",a);case 3:if(r=e.sent,!(o=Le(r)).error){e.next=7;break}throw new Error("failed to get info about accounts "+n.map((function(e){return e.toBase58()})).join(", ")+": "+o.error.message);case 7:P()("undefined"!==typeof o.result),c=[],i=Object(d.a)(o.result.value);try{for(i.s();!(u=i.n()).done;)s=u.value,p=null,o.result.value&&(f=s.executable,b=s.owner,v=s.lamports,h=s.data,P()("base64"===h[1]),p={executable:f,owner:new m.PublicKey(b),lamports:v,data:pe.Buffer.from(h[0],"base64")}),c.push(p)}catch(l){i.e(l)}finally{i.f()}return e.abrupt("return",{context:{slot:o.result.context.slot},value:Object.fromEntries(c.map((function(e,t){return[n[t].toBase58(),e]})))});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e=ue.struct([ue.blob(32,"mint"),ue.blob(32,"owner"),ue.nu64("amount"),ue.blob(93)]),Xe=ue.struct([ue.blob(36),ue.blob(8,"supply"),ue.u8("decimals"),ue.u8("initialized"),ue.blob(36)]);function He(e){var t=_e.decode(e),n=t.mint,a=t.owner,r=t.amount;return{mint:new m.PublicKey(n),owner:new m.PublicKey(a),amount:r}}function Ve(e){var t=Xe.decode(e),n=t.decimals,a=t.initialized,r=t.supply;return{decimals:n,initialized:!!a,supply:new f.a(r,10,"le")}}function Ge(e){return[{memcmp:{offset:_e.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:_e.span}]}var Qe=new m.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function Ye(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(u.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ge(n),e.next=3,t._rpcRequest("getProgramAccounts",[Qe.toBase58(),{commitment:t.commitment,filters:a}]);case 3:if(!(r=e.sent).error){e.next=6;break}throw new Error("failed to get token accounts owned by "+n.toBase58()+": "+r.error.message);case 6:return e.abrupt("return",r.result.map((function(e){var t=e.pubkey,n=e.account,a=n.data,r=n.executable,o=n.owner,c=n.lamports;return{publicKey:new m.PublicKey(t),accountInfo:{data:de.a.decode(a),executable:r,owner:new m.PublicKey(o),lamports:c}}})).filter((function(e){var t=e.accountInfo;return a.every((function(e){if(e.dataSize)return t.data.length===e.dataSize;if(e.memcmp){var n=de.a.decode(e.memcmp.bytes);return t.data.slice(e.memcmp.offset,e.memcmp.offset+n.length).equals(n)}return!1}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(u.a)(l.a.mark((function e(t,n){var a,r,o,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ye(t,n),t.getAccountInfo(n)]);case 2:return a=e.sent,r=Object(s.a)(a,2),o=r[0],c=r[1],i=o.map((function(e){var t=e.publicKey,n=e.accountInfo;return{pubkey:t,account:n,effectiveMint:He(n.data).mint}})),e.abrupt("return",i.concat({pubkey:n,account:c,effectiveMint:me.WRAPPED_SOL_MINT}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(){var e=H(),t=dt().customMarkets,n=gt(),a=Object(s.a)(n,1)[0],r=at(t),o=Object(s.a)(r,1)[0],c=(a||[]).map((function(e){return e.effectiveMint})).concat((o||[]).map((function(e){return e.market.baseMintAddress}))).concat((o||[]).map((function(e){return e.market.quoteMintAddress}))),i=Object(C.a)(new Set(c.map((function(e){return e.toBase58()})))).map((function(e){return new m.PublicKey(e)}));return R(function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,We(e,i);case 2:return n=t.sent,t.abrupt("return",Object.fromEntries(Object.entries(n.value).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return[n,a&&Ve(a.data)]}))));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Object(L.a)("getAllMintInfo",e,(a||[]).length,(o||[]).length),{refreshInterval:5e6})}var tt=function(){function e(){Object(I.a)(this,e)}return Object(A.a)(e,null,[{key:"get",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.URL+t);case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return a=e.sent,e.abrupt("return",a.success?a.data:null);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error fetching from Bonfida API ".concat(t,": ").concat(e.t0));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentTrades",value:function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("trades/address/".concat(n)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();tt.URL="https://serum-api.bonfida.com/";var nt=Z.MARKETS;function at(e){var t=H();return R(function(){var n=Object(u.a)(l.a.mark((function n(){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(Tt(e).map(function(){var e=Object(u.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.Market.load(t,n.address,{},n.programId);case 3:return a=e.sent,e.abrupt("return",{market:a,marketName:n.name,programId:n.programId});case 7:return e.prev=7,e.t0=e.catch(0),re({message:"Error loading all market",description:e.t0.message,type:"error"}),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return a=n.sent,n.abrupt("return",a.filter((function(e){return!!e})));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Object(L.a)("getAllMarkets",e.length,t),{refreshInterval:ct})}function rt(){var e,t=H(),n=le().wallet;function a(){return(a=Object(u.a)(l.a.mark((function e(){var a,r,o,c,i,u,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t&&n.publicKey){e.next=2;break}return e.abrupt("return",[]);case 2:console.log("refreshing useUnmigratedOpenOrdersAccounts"),a=[],r=Array.from(new Set(nt.filter((function(e){return e.deprecated})).map((function(e){return e.programId.toBase58()})))).map((function(e){return new m.PublicKey(e)})),c=Object(d.a)(r),e.prev=6,c.s();case 8:if((i=c.n()).done){e.next=22;break}return o=i.value,e.prev=10,e.next=13,Z.OpenOrders.findForOwner(t,n.publicKey,o);case 13:u=e.sent,a=a.concat(u.filter((function(e){return e.baseTokenTotal.toNumber()||e.quoteTokenTotal.toNumber()})).filter((function(e){return nt.some((function(t){return t.deprecated&&t.address.equals(e.market)}))}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),console.log("Error loading deprecated markets",null===(s=o)||void 0===s?void 0:s.toBase58(),e.t0.message);case 20:e.next=8;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(6),c.e(e.t1);case 27:return e.prev=27,c.f(),e.finish(27);case 30:return e.abrupt("return",a);case 31:case"end":return e.stop()}}),e,null,[[6,24,27,30],[10,17]])})))).apply(this,arguments)}var r=Object(L.a)("getUnmigratedOpenOrdersAccounts",t,null===n||void 0===n||null===(e=n.publicKey)||void 0===e?void 0:e.toBase58()),o=R((function(){return a.apply(this,arguments)}),r,{refreshInterval:ct});return{accounts:Object(s.a)(o,1)[0],refresh:function(e){return D(r,e)}}}var ot=r.a.createContext(null),ct=5e6,it=nt.find((function(e){var t=e.name,n=e.deprecated;return"SRM/USDT"===t&&!n}));function lt(e,t){var n,a;if(!e)return{};var r=Tt(t).find((function(t){return t.address.equals(e.address)})),o=(null===e||void 0===e?void 0:e.baseMintAddress)&&(null===(n=Z.TOKEN_MINTS.find((function(t){return t.address.equals(e.baseMintAddress)})))||void 0===n?void 0:n.name)||(null===r||void 0===r?void 0:r.baseLabel)&&"".concat(null===r||void 0===r?void 0:r.baseLabel,"*")||"UNKNOWN",c=(null===e||void 0===e?void 0:e.quoteMintAddress)&&(null===(a=Z.TOKEN_MINTS.find((function(t){return t.address.equals(e.quoteMintAddress)})))||void 0===a?void 0:a.name)||(null===r||void 0===r?void 0:r.quoteLabel)&&"".concat(null===r||void 0===r?void 0:r.quoteLabel,"*")||"UNKNOWN";return Object(J.a)(Object(J.a)({},r),{},{marketName:null===r||void 0===r?void 0:r.name,baseCurrency:o,quoteCurrency:c,marketInfo:r})}function ut(e){var t=e.children,n=S("marketAddress",null===it||void 0===it?void 0:it.address.toBase58()),o=Object(s.a)(n,2),c=o[0],i=o[1],l=S("customMarkets",[]),u=Object(s.a)(l,2),d=u[0],p=u[1],f=c&&new m.PublicKey(c),b=H(),v=Tt(d),h=f&&v.find((function(e){return e.address.equals(f)}));Object(a.useEffect)((function(){h&&h.deprecated&&(console.log("Switching markets from deprecated",h),it&&i(it.address.toBase58()))}),[]);var g=Object(a.useState)(),k=Object(s.a)(g,2),y=k[0],E=k[1];return Object(a.useEffect)((function(){var e;y&&h&&(null===(e=y._decoded.ownAddress)||void 0===e?void 0:e.equals(null===h||void 0===h?void 0:h.address))||(E(null),h&&h.address?Z.Market.load(b,h.address,{},h.programId).then(E).catch((function(e){return re({message:"Error loading market",description:e.message,type:"error"})})):re({message:"Error loading market",description:"Please select a market from the dropdown",type:"error"}))}),[b,h]),r.a.createElement(ot.Provider,{value:Object(J.a)(Object(J.a)({market:y},lt(y,d)),{},{setMarketAddress:i,customMarkets:d,setCustomMarkets:p})},t)}function st(){var e=S("selectedTokenAccounts",{}),t=Object(s.a)(e,2);return[t[0],t[1]]}function dt(){var e=Object(a.useContext)(ot);if(!e)throw new Error("Missing market context");return e}function mt(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],o=bt(),c=Object(s.a)(o,1)[0],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=pt(e);if(!t)return null;return t.filter((function(e){return e.eventFlags.maker})).map((function(e){return Object(J.a)(Object(J.a)({},e),{},{side:"buy"===e.side?"sell":"buy"})}))}();return Object(a.useEffect)((function(){var e,t,n=(null===c||void 0===c||null===(e=c.bids)||void 0===e?void 0:e.length)>0&&Number(c.bids[0][0]),a=(null===c||void 0===c||null===(t=c.asks)||void 0===t?void 0:t.length)>0&&Number(c.asks[0][0]),o=i&&i.length>0&&i[0].price,l=n&&a?o?[n,a,o].sort((function(e,t){return e-t}))[1]:(n+a)/2:null;r(l)}),[c,i]),n}function pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=dt(),n=t.market,a=H();function r(){return o.apply(this,arguments)}function o(){return(o=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&a){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.loadFills(a,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var c=R(r,Object(L.a)("getUnfilteredTrades",n,a),{refreshInterval:5e3}),i=Object(s.a)(c,1),d=i[0];return d}function ft(){var e=dt().market,t=Y(e&&e._decoded.bids),n=Y(e&&e._decoded.asks);return{bidOrderbook:e&&t?Z.Orderbook.decode(e,t):null,askOrderbook:e&&n?Z.Orderbook.decode(e,n):null}}function bt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=ft(),n=t.bidOrderbook,a=t.askOrderbook,r=dt(),o=r.market,c=n&&o?n.getL2(e).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1]]})):[],i=a&&o?a.getL2(e).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1]]})):[];return[{bids:c,asks:i},!!c||!!i]}function vt(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=dt(),n=t.market,a=le(),r=a.connected,o=a.wallet,c=H();function i(){return s.apply(this,arguments)}function s(){return(s=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",null);case 2:if(n){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,n.findOpenOrdersAccountsForOwner(c,o.publicKey);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return R(i,Object(L.a)("getOpenOrdersAccounts",o,n,r),{refreshInterval:e?1e3:5e3})}function ht(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=vt(e),n=Object(s.a)(t,1),a=n[0];return a?a[0]:null}function gt(){var e=le(),t=e.connected,n=e.wallet,a=H();function r(){return(r=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Ze(a,n.publicKey);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return R((function(){return r.apply(this,arguments)}),Object(L.a)("getTokenAccounts",n,t),{refreshInterval:5e3})}function kt(e,t,n){if(!e||!t)return null;var a=e.filter((function(e){var a=e.effectiveMint,r=e.pubkey;return t.equals(a)&&(!n||("string"===typeof n?n:n.toBase58())===r.toBase58())}));return a&&a[0]}function yt(){var e=gt(),t=Object(s.a)(e,1)[0],n=dt().market,a=st(),r=Object(s.a)(a,1)[0],o=null===n||void 0===n?void 0:n.quoteMintAddress;return kt(t,o,o&&r[o.toBase58()])}function Et(){var e=gt(),t=Object(s.a)(e,1)[0],n=dt().market,a=st(),r=Object(s.a)(a,1)[0],o=null===n||void 0===n?void 0:n.baseMintAddress;return kt(t,o,o&&r[o.toBase58()])}function Ot(){var e,t=yt(),n=dt().market,a=Q(null===t||void 0===t?void 0:t.pubkey),r=Object(s.a)(a,2),o=r[0],c=r[1];return n&&t&&c&&o?n.quoteMintAddress.equals(Z.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===o||void 0===o?void 0:o.lamports)/1e9)&&void 0!==e?e:0:n.quoteSplSizeToNumber(new f.a(o.data.slice(64,72),10,"le")):null}function xt(){var e,t=Et(),n=dt().market,a=Q(null===t||void 0===t?void 0:t.pubkey),r=Object(s.a)(a,2),o=r[0],c=r[1];return n&&t&&c&&o?n.baseMintAddress.equals(Z.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===o||void 0===o?void 0:o.lamports)/1e9)&&void 0!==e?e:0:n.baseSplSizeToNumber(new f.a(o.data.slice(64,72),10,"le")):null}function wt(){var e,t=le(),n=t.wallet,a=t.connected,r=H(),o=dt().customMarkets,c=Tt(o),i=Object(C.a)(new Set(c.map((function(e){return e.programId.toBase58()})))).map((function(e){return new m.PublicKey(e)}));return R(function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Promise.all(i.map((function(e){return Z.OpenOrders.findForOwner(r,n.publicKey,e)})));case 4:return e.abrupt("return",e.sent.flat());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Object(L.a)("getAllOpenOrdersAccounts",r,a,null===n||void 0===n||null===(e=n.publicKey)||void 0===e?void 0:e.toBase58(),o.length,(i||[]).length),{refreshInterval:5e3})}function jt(){var e=xt(),t=Ot(),n=ht(!0),a=dt(),r=a.baseCurrency,o=a.quoteCurrency,c=a.market,i=n&&n.baseTokenTotal&&n.baseTokenFree,l=n&&n.quoteTokenTotal&&n.quoteTokenFree;return"UNKNOWN"!==r&&"UNKNOWN"!==o&&r&&o?[{market:c,key:"".concat(r).concat(o).concat(r),coin:r,wallet:e,orders:i&&c&&n?c.baseSplSizeToNumber(n.baseTokenTotal.sub(n.baseTokenFree)):null,openOrders:n,unsettled:i&&c&&n?c.baseSplSizeToNumber(n.baseTokenFree):null},{market:c,key:"".concat(o).concat(r).concat(o),coin:o,wallet:t,openOrders:n,orders:l&&c&&n?c.quoteSplSizeToNumber(n.quoteTokenTotal.sub(n.quoteTokenFree)):null,unsettled:l&&c&&n?c.quoteSplSizeToNumber(n.quoteTokenFree):null}]:[]}function St(){var e=H(),t=rt().accounts,n=t&&Array.from(new Set(t.map((function(e){return e.market})))),a=n&&n.map((function(e){return e.toBase58()})),r=R(function(){var t=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:return a=function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=nt.find((function(e){return e.address.equals(n)}))){t.next=5;break}return console.log("Failed loading market"),re({message:"Error loading market",type:"error"}),t.abrupt("return",null);case 5:return t.prev=5,console.log("Loading market",a.name),t.next=9,Z.Market.load(e,a.address,{},a.programId);case 9:return t.abrupt("return",t.sent);case 12:return t.prev=12,t.t0=t.catch(5),console.log("Failed loading market",a.name,t.t0),re({message:"Error loading market",description:t.t0.message,type:"error"}),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),t.next=5,Promise.all(n.map(a));case 5:return t.abrupt("return",t.sent.filter((function(e){return e})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Object(L.a)("useUnmigratedDeprecatedMarketsInner",e,a&&a.toString()),{refreshInterval:ct}),o=Object(s.a)(r,1)[0];return o?o.map((function(e){return{market:e,openOrdersList:null===t||void 0===t?void 0:t.filter((function(t){return e&&t.market.equals(e.address)}))}})):null}function Tt(e){var t=e.map((function(e){return Object(J.a)(Object(J.a)({},e),{},{address:new m.PublicKey(e.address),programId:new m.PublicKey(e.programId),deprecated:!1})}));return[].concat(Object(C.a)(t),Object(C.a)(nt))}function Mt(e,t,n){if(e.isBids)return e.market.tickSize;var a,r,o,c=0,i=e.getL2(1e3),l=Object(d.a)(i);try{for(l.s();!(o=l.n()).done;){var u=Object(s.a)(o.value,2);if(c+(r=(a=u[0])*u[1])>t)break;c+=r}}catch(p){l.e(p)}finally{l.f()}var m=Math.min(1.02*a,1.05*i[0][0]);return n?k(m,n):m}function Ct(e,t,n){var a,r,o,c,i=0,l=0,u=Object(d.a)(e.getL2(1e3));try{for(u.s();!(c=u.n()).done;){var m=Object(s.a)(c.value,2);if(a=m[0],r=m[1],i+(o=(e.isBids?1:a)*r)>t){l+=(t-i)*a,i=t;break}l+=o*a,i+=o}}catch(f){u.e(f)}finally{u.f()}var p=l/Math.min(t,i);return n?k(p,n):p}var At=n(33),It=n(34);function Bt(){var e=Object(At.a)(["\nhtml,body{\n  background: #11161D;\n}\ninput[type=number]::-webkit-inner-spin-button {\n  opacity: 0;\n}\ninput[type=number]:hover::-webkit-inner-spin-button,\ninput[type=number]:focus::-webkit-inner-spin-button {\n  opacity: 0.25;\n}\n/* width */\n::-webkit-scrollbar {\n  width: 15px;\n}\n/* Track */\n::-webkit-scrollbar-track {\n  background: #2d313c;\n}\n/* Handle */\n::-webkit-scrollbar-thumb {\n  background: #5b5f67;\n}\n/* Handle on hover */\n::-webkit-scrollbar-thumb:hover {\n  background: #5b5f67;\n}\n.ant-slider-track, .ant-slider:hover .ant-slider-track {\n  background-color: #2abdd2;\n  opacity: 0.75;\n}\n.ant-slider-track,\n.ant-slider ant-slider-track:hover {\n  background-color: #2abdd2;\n  opacity: 0.75;\n}\n.ant-slider-dot-active,\n.ant-slider-handle,\n.ant-slider-handle-click-focused,\n.ant-slider:hover .ant-slider-handle:not(.ant-tooltip-open)  {\n  border: 2px solid #2abdd2; \n}\n.ant-table-tbody > tr.ant-table-row:hover > td {\n  background: #273043;\n}\n.ant-table-tbody > tr > td {\n  border-bottom: 8px solid #1A2029;\n}\n.ant-table-container table > thead > tr:first-child th {\n  border-bottom: none;\n}\n.ant-divider-horizontal.ant-divider-with-text::before, .ant-divider-horizontal.ant-divider-with-text::after {\n  border-top: 1px solid #434a59 !important;\n}\n.ant-layout {\n    background: #11161D\n  }\n  .ant-table {\n    background: #212734;\n  }\n  .ant-table-thead > tr > th {\n    background: #1A2029;\n  }\n.ant-select-item-option-content {\n  img {\n    margin-right: 4px;\n  }\n}\n.ant-modal-content {\n  background-color: #212734;\n}\n\n@-webkit-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n@-moz-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n@-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n.flash {\n  -moz-animation: highlight 0.5s ease 0s 1 alternate ;\n  -webkit-animation: highlight 0.5s ease 0s 1 alternate;\n  animation: highlight 0.5s ease 0s 1 alternate;\n}"]);return Bt=function(){return e},e}var Pt=Object(It.a)(Bt()),Ft=n(313),zt=n(208),Nt=n(204),Kt=n(593),qt=Kt.a.Title,Rt=function(e){Object(zt.a)(n,e);var t=Object(Nt.a)(n);function n(){var e;Object(I.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(A.a)(n,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(qt,{level:2},"Something went wrong."),r.a.createElement(qt,{level:4},"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.Component),Dt=n(56),Lt=n(166),Wt=n(585),Ut=n(586),_t=n(330),Xt=n(78);function Ht(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){clearInterval(e)}}}),[t])}function Vt(){var e=Object(At.a)(["\n  margin: 5px;\n  padding: 20px;\n  background-color: #1a2029;\n"]);return Vt=function(){return e},e}var Gt=It.c.div(Vt());function Qt(e){var t=e.style,n=void 0===t?void 0:t,a=e.children,o=e.stretchVertical,c=void 0!==o&&o;return r.a.createElement(Gt,{style:Object(J.a)({height:c?"calc(100% - 10px)":void 0},n)},a)}var Yt=n(599),Jt=n(600);function Zt(){var e=Object(At.a)(["\n  position: absolute;\n  right: 5px;\n  color: white;\n"]);return Zt=function(){return e},e}function $t(){var e=Object(At.a)(["\n      background-color: ",";\n    "]);return $t=function(){return e},e}function en(){var e=Object(At.a)(["\n      width: ",";\n    "]);return en=function(){return e},e}function tn(){var e=Object(At.a)(["\n  text-align: right;\n  float: right;\n  height: 100%;\n  ","\n  ","\n"]);return tn=function(){return e},e}function nn(){var e=Object(At.a)(["\n  padding: 20px 0 14px;\n  font-weight: 700;\n"]);return nn=function(){return e},e}function an(){var e=Object(At.a)(["\n  padding: 20px 0 14px;\n  color: #434a59;\n"]);return an=function(){return e},e}function rn(){var e=Object(At.a)(["\n  color: rgba(255, 255, 255, 1);\n"]);return rn=function(){return e},e}var on=It.c.div(rn()),cn=Object(It.c)(Wt.a)(an()),ln=Object(It.c)(Wt.a)(nn()),un=It.c.div(tn(),(function(e){return e["data-width"]&&Object(It.b)(en(),e["data-width"])}),(function(e){return e["data-bgcolor"]&&Object(It.b)($t(),e["data-bgcolor"])})),sn=It.c.div(Zt());function dn(e){var t=e.smallScreen,n=e.depth,o=void 0===n?7:n,c=e.onPrice,i=e.onSize,l=mt(),u=bt(),d=Object(s.a)(u,1)[0],m=dt(),p=m.baseCurrency,f=m.quoteCurrency,b=Object(a.useRef)(null),v=Object(a.useRef)(null),h=Object(a.useState)(null),g=Object(s.a)(h,2),k=g[0],y=g[1];function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.slice(0,o).reduce((function(e,n,a){var r,o=Object(s.a)(n,2),c=o[0],i=o[1],l=((null===(r=e[a-1])||void 0===r?void 0:r.cumulativeSize)||0)+i;return e.push({price:c,size:i,cumulativeSize:l,sizePercent:Math.round(l/(t||1)*100)}),e}),[]);return n&&(a=a.reverse()),a}return Ht((function(){if(!b.current||JSON.stringify(b.current)!==JSON.stringify(v.current)){var e=(null===d||void 0===d?void 0:d.bids)||[],t=(null===d||void 0===d?void 0:d.asks)||[],n=function(e,t,n){var a=Object(s.a)(t,2)[1];return n<o?e+a:e},a=e.reduce(n,0)+t.reduce(n,0),r=E(e,a,!1),c=E(t,a,!0);b.current={bids:null===d||void 0===d?void 0:d.bids,asks:null===d||void 0===d?void 0:d.asks},y({bids:r,asks:c})}}),250),Object(a.useEffect)((function(){v.current={bids:null===d||void 0===d?void 0:d.bids,asks:null===d||void 0===d?void 0:d.asks}}),[d]),r.a.createElement(Qt,{style:t?{flex:1}:{height:"500px",overflow:"hidden"}},r.a.createElement(on,null,"Orderbook"),r.a.createElement(cn,null,r.a.createElement(Ut.a,{span:12,style:{textAlign:"left"}},"Size (",p,")"),r.a.createElement(Ut.a,{span:12,style:{textAlign:"right"}},"Price (",f,")")),null===k||void 0===k?void 0:k.asks.map((function(e){var t=e.price,n=e.size,a=e.sizePercent;return r.a.createElement(mn,{key:t+"",price:t,size:n,side:"sell",sizePercent:a,onPriceClick:function(){return c(t)},onSizeClick:function(){return i(n)}})})),r.a.createElement(pn,{markPrice:l}),null===k||void 0===k?void 0:k.bids.map((function(e){var t=e.price,n=e.size,a=e.sizePercent;return r.a.createElement(mn,{key:t+"",price:t,size:n,side:"buy",sizePercent:a,onPriceClick:function(){return c(t)},onSizeClick:function(){return i(n)}})})))}var mn=r.a.memo((function(e){var t=e.side,n=e.price,o=e.size,c=e.sizePercent,i=e.onSizeClick,l=e.onPriceClick,u=Object(a.useRef)(),s=dt().market;Object(a.useEffect)((function(){var e,t;!(null===(e=u.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=u.current)||void 0===t||t.classList.add("flash"));var n=setTimeout((function(){var e,t;return(null===(e=u.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=u.current)||void 0===t?void 0:t.classList.remove("flash"))}),250);return function(){return clearTimeout(n)}}),[n,o]);var d=(null===s||void 0===s?void 0:s.minOrderSize)&&!isNaN(o)?Number(o).toFixed(E(s.minOrderSize)+1):o,m=(null===s||void 0===s?void 0:s.tickSize)&&!isNaN(n)?Number(n).toFixed(E(s.tickSize)+1):n;return r.a.createElement(Wt.a,{ref:u,style:{marginBottom:1},onClick:i},r.a.createElement(Ut.a,{span:12,style:{textAlign:"left"}},d),r.a.createElement(Ut.a,{span:12,style:{textAlign:"right"}},r.a.createElement(un,{"data-width":c+"%","data-bgcolor":"buy"===t?"rgba(65, 199, 122, 0.6)":"rgba(242, 60, 105, 0.6)"}),r.a.createElement(sn,{onClick:l},m)))}),(function(e,t){return M(e,t,["price","size","sizePercent"])})),pn=r.a.memo((function(e){var t=e.markPrice,n=dt().market,o=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}(t),c=t>o?"#41C77A":t<o?"#F23B69":"white",i=t&&(null===n||void 0===n?void 0:n.tickSize)&&t.toFixed(E(n.tickSize));return r.a.createElement(ln,{justify:"center"},r.a.createElement(Ut.a,{style:{color:c}},t>o&&r.a.createElement(Yt.a,{style:{marginRight:5}}),t<o&&r.a.createElement(Jt.a,{style:{marginRight:5}}),i||"----"))}),(function(e,t){return M(e,t,["markPrice"])})),fn=n(28),bn=n(589);function vn(e){var t=e.dataSource,n=e.columns,a=e.emptyLabel,o=void 0===a?"No data":a,c=e.pagination,i=void 0!==c&&c,l=e.loading,u=void 0!==l&&l,s=e.pageSize,d=void 0===s?10:s;return r.a.createElement(fn.b,{renderEmpty:function(){return r.a.createElement("div",{style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center"}},o)}},r.a.createElement(bn.a,{dataSource:t,columns:n,pagination:!!i&&{pagination:!0,pageSize:d},loading:u}))}function hn(e){var t=e.balances,n=e.showMarket,a=e.hideWalletBalance,o=e.onSettleSuccess,c=gt(),i=Object(s.a)(c,1)[0],d=V(),m=le().wallet;function p(){return(p=Object(u.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he({market:t,openOrders:n,connection:d,wallet:m,baseCurrencyAccount:kt(i,null===t||void 0===t?void 0:t.baseMintAddress),quoteCurrencyAccount:kt(i,null===t||void 0===t?void 0:t.quoteMintAddress)});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),re({message:"Error settling funds",description:e.t0.message,type:"error"}),e.abrupt("return");case 9:o&&o();case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var f=[n?{title:"Market",dataIndex:"marketName",key:"marketName"}:null,{title:"Coin",dataIndex:"coin",key:"coin"},a?null:{title:"Wallet Balance",dataIndex:"wallet",key:"wallet"},{title:"Orders",dataIndex:"orders",key:"orders"},{title:"Unsettled",dataIndex:"unsettled",key:"unsettled"},{key:"action",render:function(e){var t=e.market,n=e.openOrders,a=e.marketName;return r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(Xt.a,{ghost:!0,style:{marginRight:12},onClick:function(){return function(e,t){return p.apply(this,arguments)}(t,n)}},"Settle ",a))}}].filter((function(e){return e}));return r.a.createElement(vn,{emptyLabel:"No balances",dataSource:t,columns:f,pagination:!1})}var gn=n(597),kn=n(601);function yn(){var e=Object(At.a)(["\n  color: #f23b69;\n  border: 1px solid #f23b69;\n"]);return yn=function(){return e},e}var En=Object(It.c)(Xt.a)(yn());function On(e){var t=e.openOrders,n=e.onCancelSuccess,o=e.pageSize,c=e.loading,i=e.marketFilter,d=le().wallet,m=V(),p=Object(a.useState)(null),f=Object(s.a)(p,2),b=f[0],v=f[1];function h(){return(h=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(null===t||void 0===t?void 0:t.orderId),e.prev=1,e.next=4,Ee({order:t,market:t.market,connection:m,wallet:d});case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),re({message:"Error cancelling order",description:e.t0.message,type:"error"}),e.abrupt("return");case 10:return e.prev=10,v(null),e.finish(10);case 13:n&&n();case 14:case"end":return e.stop()}}),e,null,[[1,6,10,13]])})))).apply(this,arguments)}var g=Object(C.a)(new Set((t||[]).map((function(e){return e.marketName})))).map((function(e){return{text:e,value:e}})),k=[{title:"Market",dataIndex:"marketName",key:"marketName",filters:i?g:void 0,onFilter:function(e,t){return 0===t.marketName.indexOf(e)}},{title:"Side",dataIndex:"side",key:"side",render:function(e){return r.a.createElement(gn.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700}},e.charAt(0).toUpperCase()+e.slice(1))},sorter:function(e,t){return e.side===t.side?0:"buy"===e.side?1:-1},showSorterTooltip:!1},{title:"Size",dataIndex:"size",key:"size",sorter:function(e,t){return t.size-e.size},showSorterTooltip:!1},{title:"Price",dataIndex:"price",key:"price",sorter:function(e,t){return t.price-e.price},showSorterTooltip:!1},{key:"orderId",render:function(e){return r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(En,{icon:r.a.createElement(kn.a,null),onClick:function(){return function(e){return h.apply(this,arguments)}(e)},loading:b+""===(null===e||void 0===e?void 0:e.orderId)+""},"Cancel"))}}],y=(t||[]).map((function(e){return Object(J.a)(Object(J.a)({},e),{},{key:e.orderId})}));return r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{span:24},r.a.createElement(vn,{emptyLabel:"No open orders",dataSource:y,columns:k,pagination:!0,pageSize:o||5,loading:void 0!==c&&c})))}var xn=n(590);function wn(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=dt(),n=t.marketName,a=pt(e),r=vt(),o=Object(s.a)(r,1),c=o[0];return c&&0!==c.length&&a?a.filter((function(e){return c.some((function(t){return e.openOrders.equals(t.publicKey)}))})).map((function(e){return Object(J.a)(Object(J.a)({},e),{},{marketName:n})})):null}(),t=dt().quoteCurrency,n=[{title:"Market",dataIndex:"marketName",key:"marketName"},{title:"Side",dataIndex:"side",key:"side",render:function(e){return r.a.createElement(gn.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700}},e.charAt(0).toUpperCase()+e.slice(1))}},{title:"Size",dataIndex:"size",key:"size"},{title:"Price",dataIndex:"price",key:"price"},{title:"Liquidity",dataIndex:"liquidity",key:"liquidity"},{title:t?"Fees (".concat(t,")"):"Fees",dataIndex:"feeCost",key:"feeCost"}],a=(e||[]).map((function(e){return Object(J.a)(Object(J.a)({},e),{},{key:"".concat(e.orderId).concat(e.side),liquidity:e.eventFlags.maker?"Maker":"Taker"})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{span:24},r.a.createElement(vn,{dataSource:a,columns:n,pagination:!0,pageSize:5,emptyLabel:"No fills"}))))}function jn(){var e=function(){var e=dt().market,t=le(),n=t.connected,a=t.wallet,r=H();function o(){return(o=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:if(e){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,e.findFeeDiscountKeys(r,a.publicKey);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return R((function(){return o.apply(this,arguments)}),Object(L.a)("getFeeDiscountKeys",a,e,n),{refreshInterval:5e3})}(),t=[{title:"Fee Tier",dataIndex:"feeTier",key:"feeTier",render:function(e,t){return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Kt.a,null,e),0===t.index?r.a.createElement("div",{style:{marginLeft:10}},r.a.createElement(gn.a,{color:"#41C77A",style:{fontWeight:700}},"Selected")):null)}},{title:"Taker",dataIndex:"taker",key:"taker",render:function(e,t){return g.format(Object(Z.getFeeRates)(t.feeTier).taker)}},{title:"Maker",dataIndex:"maker",key:"maker",render:function(e,t){return g.format(Object(Z.getFeeRates)(t.feeTier).maker)}},{title:"Public Key",dataIndex:"pubkey",key:"pubkey",render:function(e){return e.toBase58()}},{title:"Balance",dataIndex:"balance",key:"balance"},{title:"Mint",dataIndex:"mint",key:"mint",render:function(e,t){return t.mint.equals(Z.TokenInstructions.SRM_MINT)?"SRM":t.mint.equals(Z.TokenInstructions.MSRM_MINT)?"MSRM":"UNKNOWN"}}],n=(Object(s.a)(e,1)[0]||[]).map((function(e,t){return Object(J.a)(Object(J.a)({},e),{},{index:t,key:e.pubkey.toBase58()})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{span:24},r.a.createElement(vn,{dataSource:n,columns:t,pagination:!0,pageSize:5,emptyLabel:"No (M)SRM accounts"}))),r.a.createElement(Wt.a,{style:{marginTop:8}},r.a.createElement(Ut.a,null,r.a.createElement(Kt.a,null,"Holding SRM or MSRM makes you eligible for fee discounts:"),r.a.createElement(Sn,null))))}function Sn(){var e=[{title:"Fee Tier",dataIndex:"feeTier",key:"feeTier"},{title:"Taker",dataIndex:"taker",key:"taker",render:function(e,t){return g.format(Object(Z.getFeeRates)(t.feeTier).taker)}},{title:"Maker",dataIndex:"maker",key:"maker",render:function(e,t){return g.format(Object(Z.getFeeRates)(t.feeTier).maker)}},{title:"Requirements",dataIndex:"requirements",key:"requirements",render:function(e,t){return r.a.createElement(Kt.a,null,t.balance?"\u2265 ".concat(t.balance," ").concat(t.token):"None")}}];return r.a.createElement(vn,{dataSource:[{feeTier:0,taker:.0022,maker:-3e-4,token:"",balance:""},{feeTier:1,taker:.002,maker:-3e-4,token:"SRM",balance:100},{feeTier:2,taker:.0018,maker:-3e-4,token:"SRM",balance:1e3},{feeTier:3,taker:.0016,maker:-3e-4,token:"SRM",balance:1e4},{feeTier:4,taker:.0014,maker:-3e-4,token:"SRM",balance:1e5},{feeTier:5,taker:.0012,maker:-3e-4,token:"SRM",balance:1e6},{feeTier:6,taker:.001,maker:-5e-4,token:"MSRM",balance:1}].map((function(e){return Object(J.a)(Object(J.a)({},e),{},{key:e.feeTier})})),columns:e})}var Tn=Kt.a.Paragraph,Mn=xn.a.TabPane;function Cn(){var e=dt().market;return r.a.createElement(Qt,{style:{flex:1,paddingTop:20}},r.a.createElement(Kt.a,null,r.a.createElement(Tn,{style:{color:"rgba(255,255,255,0.5)"}},"Make sure to go to Balances and click Settle to send out your funds."),r.a.createElement(Tn,{style:{color:"rgba(255,255,255,0.5)"}},"To fund your wallet, ",r.a.createElement("a",{href:"https://www.sollet.io"},"sollet.io"),". You can get SOL from FTX, Binance, BitMax, and others. You can get other tokens from FTX."," ")),r.a.createElement(xn.a,{defaultActiveKey:"orders"},r.a.createElement(Mn,{tab:"Open Orders",key:"orders"},r.a.createElement(An,null)),r.a.createElement(Mn,{tab:"Recent Trade History",key:"fills"},r.a.createElement(wn,null)),r.a.createElement(Mn,{tab:"Balances",key:"balances"},r.a.createElement(In,null)),e&&e.supportsSrmFeeDiscounts?r.a.createElement(Mn,{tab:"Fee discounts",key:"fees"},r.a.createElement(jn,null)):null))}var An=function(){var e=function(){var e=dt(),t=e.market,n=e.marketName,a=ht(),r=ft(),o=r.bidOrderbook,c=r.askOrderbook;return t&&a&&o&&c?t.filterForOpenOrders(o,c,[a]).map((function(e){return Object(J.a)(Object(J.a)({},e),{},{marketName:n,market:t})})):null}();return r.a.createElement(On,{openOrders:e})},In=function(){var e=jt();return r.a.createElement(hn,{balances:e})},Bn=n(587),Pn=n(594);function Fn(e){var t,n,a,o=e.onClose,c=e.baseOrQuote,i=dt(),l=i.market,u=i.baseCurrency,s=i.quoteCurrency,d=le(),m=d.providerName,p=d.providerUrl,f=Et(),b=yt();return"base"===c?(t=null===l||void 0===l?void 0:l.baseMintAddress,n=f,a=u):"quote"===c?(t=null===l||void 0===l?void 0:l.quoteMintAddress,n=b,a=s):n=null,t?r.a.createElement(Pn.a,{title:a,visible:!!t,onOk:o,onCancel:o},r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement("p",{style:{color:"white"}},"Mint address:"),r.a.createElement("p",{style:{color:"rgba(255,255,255,0.5)"}},t.toBase58()),r.a.createElement("div",null,r.a.createElement("p",{style:{color:"white"}},"SPL Deposit address:"),r.a.createElement("p",{style:{color:"rgba(255,255,255,0.5)"}},n?n.pubkey.toBase58():r.a.createElement(r.a.Fragment,null,"Visit"," ",r.a.createElement(ae,{external:!0,to:p},m)," ","to create an account for this mint"))))):null}var zn=n(602);function Nn(e){var t,n=e.accounts,a=e.mint,o=e.label,c=st(),i=Object(s.a)(c,2),l=i[0],u=i[1];t=a&&a in l?l[a]:n&&(null===n||void 0===n?void 0:n.length)>0?n[0].pubkey.toBase58():void 0;return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(Ut.a,{span:8},"Token account:"),r.a.createElement(Ut.a,{span:o?13:21},r.a.createElement(Lt.a,{style:{width:"100%"},value:t,onSelect:function(e){if(a){var t=Object(J.a)({},l);t[a]=e,u(t)}else re({message:"Error selecting token account",description:"Mint is undefined",type:"error"})}},null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(Lt.a.Option,{key:e.pubkey.toBase58(),value:e.pubkey.toBase58()},r.a.createElement(Kt.a.Text,{code:!0},o?T(e.pubkey,8):e.pubkey.toBase58()))})))),r.a.createElement(Ut.a,{span:2,offset:1},r.a.createElement(Xt.a,{shape:"round",icon:r.a.createElement(zn.a,null),size:"small",onClick:function(){return t&&navigator.clipboard.writeText(t)}})))}var Kn=n(603);function qn(e){var t=e.title,n=e.address;return r.a.createElement("div",null,t&&r.a.createElement("p",{style:{color:"white"}},t),r.a.createElement(Xt.a,{type:"link",icon:r.a.createElement(Kn.a,null),href:"https://explorer.solana.com/address/"+n,target:"_blank",rel:"noopener noreferrer"},n))}var Rn=n(604);function Dn(){var e=Object(At.a)(["\n  color: #2abdd2;\n  background-color: #212734;\n  border-width: 0px;\n"]);return Dn=function(){return e},e}function Ln(){var e=Object(At.a)(["\n  font-size: 12px;\n  padding-top: 6px;\n"]);return Ln=function(){return e},e}function Wn(){var e=Object(At.a)(["\n  padding-bottom: 20px;\n"]);return Wn=function(){return e},e}var Un=Object(It.c)(Wt.a)(Wn()),_n=It.c.p(Ln()),Xn=Object(It.c)(Xt.a)(Dn());function Hn(){var e=dt(),t=e.baseCurrency,n=e.quoteCurrency,o=e.market,c=jt(),i=ht(!0),d=V(),m=le(),p=m.providerUrl,f=m.providerName,b=m.wallet,v=m.connected,h=Object(a.useState)(""),g=Object(s.a)(h,2),k=g[0],y=g[1],E=Et(),O=yt(),x=gt(),w=Object(s.a)(x,1)[0],j=c&&c.find((function(e){return e.coin===t})),S=c&&c.find((function(e){return e.coin===n}));function T(){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=3;break}return re({message:"Error settling funds",description:"market is undefined",type:"error"}),e.abrupt("return");case 3:if(i){e.next=6;break}return re({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 6:if(E){e.next=9;break}return re({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 9:if(O){e.next=12;break}return re({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 12:return e.prev=12,e.next=15,he({market:o,openOrders:i,connection:d,wallet:b,baseCurrencyAccount:E,quoteCurrencyAccount:O});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),re({message:"Error settling funds",description:e.t0.message,type:"error"});case 20:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}var C=[[t,j,"base",null===o||void 0===o?void 0:o.baseMintAddress.toBase58()],[n,S,"quote",null===o||void 0===o?void 0:o.quoteMintAddress.toBase58()]];return r.a.createElement(Qt,{style:{flex:1,paddingTop:10}},C.map((function(e,t){var n=Object(s.a)(e,4),a=n[0],o=n[1],c=n[2],i=n[3];return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(Bn.a,{style:{borderColor:"white"}},a," ",i&&r.a.createElement(_t.a,{content:r.a.createElement(qn,{address:i}),placement:"bottomRight",title:"Token mint",trigger:"hover"},r.a.createElement(Rn.a,{style:{color:"#2abdd2"}}))),v&&r.a.createElement(Un,{align:"middle",style:{paddingBottom:10}},r.a.createElement(Nn,{accounts:null===w||void 0===w?void 0:w.filter((function(e){return e.effectiveMint.toBase58()===i})),mint:i,label:!0})),r.a.createElement(Un,{align:"middle",justify:"space-between",style:{paddingBottom:12}},r.a.createElement(Ut.a,null,"Wallet balance:"),r.a.createElement(Ut.a,null,o&&o.wallet)),r.a.createElement(Un,{align:"middle",justify:"space-between",style:{paddingBottom:12}},r.a.createElement(Ut.a,null,"Unsettled balance:"),r.a.createElement(Ut.a,null,o&&o.unsettled)),r.a.createElement(Un,{align:"middle",justify:"space-around"},r.a.createElement(Ut.a,{style:{width:150}},r.a.createElement(Xn,{block:!0,size:"large",onClick:function(){return y(c)}},"Deposit")),r.a.createElement(Ut.a,{style:{width:150}},r.a.createElement(Xn,{block:!0,size:"large",onClick:T},"Settle"))),r.a.createElement(_n,null,"All deposits go to your"," ",r.a.createElement(ae,{external:!0,to:p},f)," ","wallet"))})),r.a.createElement(Fn,{baseOrQuote:k,onClose:function(){return y("")}}))}var Vn=n(205),Gn=n(596),Qn=n(591),Yn=n(598);function Jn(){var e=Object(At.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #02bf76;\n  border-color: #02bf76;\n"]);return Jn=function(){return e},e}function Zn(){var e=Object(At.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #f23b69;\n  border-color: #f23b69;\n"]);return Zn=function(){return e},e}var $n=Object(It.c)(Xt.a)(Zn()),ea=Object(It.c)(Xt.a)(Jn()),ta={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"};function na(e){var t=e.style,n=e.setChangeOrderRef,o=Object(a.useState)("buy"),c=Object(s.a)(o,2),i=c[0],d=c[1],m=dt(),p=m.baseCurrency,f=m.quoteCurrency,b=m.market,v=xt(),h=Ot(),g=Et(),O=yt(),x=ht(!0),w=le(),j=w.wallet,S=w.connected,T=V(),M=mt(),C=Object(a.useState)(!1),A=Object(s.a)(C,2),I=A[0],B=A[1],P=Object(a.useState)(!1),F=Object(s.a)(P,2),z=F[0],N=F[1],K=Object(a.useState)(void 0),q=Object(s.a)(K,2),R=q[0],W=q[1],U=Object(a.useState)(void 0),_=Object(s.a)(U,2),X=_[0],H=_[1],G=Object(a.useState)(void 0),Q=Object(s.a)(G,2),Y=Q[0],Z=Q[1],$=Object(a.useState)(!1),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(0),oe=Object(s.a)(ae,2),ce=oe[0],ie=oe[1],ue=(h||0)+((x&&b?b.quoteSplSizeToNumber(x.quoteTokenFree):0)||0),se=v||0,de=(null===b||void 0===b?void 0:b.minOrderSize)&&E(b.minOrderSize),me=(null===b||void 0===b?void 0:b.tickSize)&&E(b.tickSize);Object(a.useEffect)((function(){n&&n(fe)}),[n]),Object(a.useEffect)((function(){R&&Y&&ve(ce)}),[i]),Object(a.useEffect)((function(){be()}),[Y,R]);var pe=function(e){if(W(e),e){var t=Y||M;if(t){var n=e&&y(e*t,de);H(n)}else H(void 0)}else H(void 0)},fe=function(e){var t=e.size,n=e.price,a=t&&y(t,de),r=n&&y(n,me);a&&pe(a),r&&Z(r)},be=function(){var e=k("buy"===i?ue/(Y||M||1):se,de),t=Math.min((R||0)/e*100,100);ie(t)},ve=function(e){if(!Y&&M){var t=me?M.toFixed(me):M;Z("number"===typeof t?t:parseFloat(t))}var n;"buy"===i?(Y||M)&&(n=ue/(Y||M||1)*e/100):n=se*e/100;var a=k(n,de);pe(a)};function he(){return ge.apply(this,arguments)}function ge(){return(ge=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y){e.next=6;break}return console.warn("Missing price"),re({message:"Missing price",type:"error"}),e.abrupt("return");case 6:if(R){e.next=10;break}return console.warn("Missing size"),re({message:"Missing size",type:"error"}),e.abrupt("return");case 10:return ne(!0),e.prev=11,e.next=14,je({side:i,price:Y,size:R,orderType:z?"ioc":I?"postOnly":"limit",market:b,connection:T,wallet:j,baseCurrencyAccount:null===g||void 0===g?void 0:g.pubkey,quoteCurrencyAccount:null===O||void 0===O?void 0:O.pubkey});case 14:D(Object(L.a)("getTokenAccounts",j,S)),Z(void 0),pe(void 0),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(11),console.warn(e.t0),re({message:"Error placing order",description:e.t0.message,type:"error"});case 23:return e.prev=23,ne(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[11,19,23,26]])})))).apply(this,arguments)}return r.a.createElement(Qt,{style:Object(J.a)({display:"flex",flexDirection:"column"},t)},r.a.createElement("div",{style:{flex:1}},r.a.createElement(Vn.a.Group,{onChange:function(e){return d(e.target.value)},value:i,buttonStyle:"solid",style:{marginBottom:8,width:"100%"}},r.a.createElement(Vn.a.Button,{value:"buy",style:{width:"50%",textAlign:"center",background:"buy"===i?"#02bf76":"",borderColor:"buy"===i?"#02bf76":""}},"BUY"),r.a.createElement(Vn.a.Button,{value:"sell",style:{width:"50%",textAlign:"center",background:"sell"===i?"#F23B69":"",borderColor:"sell"===i?"#F23B69":""}},"SELL")),r.a.createElement(Gn.a,{style:{textAlign:"right",paddingBottom:8},addonBefore:r.a.createElement("div",{style:{width:"30px"}},"Price"),suffix:r.a.createElement("span",{style:{fontSize:10,opacity:.5}},f),value:Y,type:"number",step:(null===b||void 0===b?void 0:b.tickSize)||1,onChange:function(e){return Z(parseFloat(e.target.value))}}),r.a.createElement(Gn.a.Group,{compact:!0,style:{paddingBottom:8}},r.a.createElement(Gn.a,{style:{width:"calc(50% + 30px)",textAlign:"right"},addonBefore:r.a.createElement("div",{style:{width:"30px"}},"Size"),suffix:r.a.createElement("span",{style:{fontSize:10,opacity:.5}},p),value:R,type:"number",step:(null===b||void 0===b?void 0:b.minOrderSize)||1,onChange:function(e){return pe(parseFloat(e.target.value))}}),r.a.createElement(Gn.a,{style:{width:"calc(50% - 30px)",textAlign:"right"},suffix:r.a.createElement("span",{style:{fontSize:10,opacity:.5}},f),value:X,type:"number",step:(null===b||void 0===b?void 0:b.minOrderSize)||1,onChange:function(e){return function(e){if(H(e),e){var t=Y||M;if(t){var n=e&&y(e/t,de);W(n)}else W(void 0)}else W(void 0)}(parseFloat(e.target.value))}})),r.a.createElement(Qn.a,{value:ce,tipFormatter:function(e){return"".concat(e,"%")},marks:ta,onChange:ve}),r.a.createElement("div",{style:{paddingTop:18}},"POST ",r.a.createElement(Yn.a,{checked:I,onChange:function(e){e&&N(!1),B(e)},style:{marginRight:40}}),"IOC ",r.a.createElement(Yn.a,{checked:z,onChange:function(e){e&&B(!1),N(e)}}))),"buy"===i?r.a.createElement(ea,{disabled:!Y||!R,onClick:he,block:!0,type:"primary",size:"large",loading:te},"Buy ",p):r.a.createElement($n,{disabled:!Y||!R,onClick:he,block:!0,type:"primary",size:"large",loading:te},"Sell ",p))}function aa(){var e=Object(At.a)(["\n  padding: 20px 0 14px;\n  color: #434a59;\n"]);return aa=function(){return e},e}function ra(){var e=Object(At.a)(["\n  color: rgba(255, 255, 255, 1);\n"]);return ra=function(){return e},e}var oa=It.c.div(ra()),ca=Object(It.c)(Wt.a)(aa());function ia(e){var t=e.smallScreen,n=dt(),a=n.baseCurrency,o=n.quoteCurrency,c=n.market,i=function(){var e=dt().market,t=null===e||void 0===e?void 0:e.address.toBase58();function n(){return(n=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,tt.getRecentTrades(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return R((function(){return n.apply(this,arguments)}),Object(L.a)("getBonfidaTrades",t),{refreshInterval:5e3},!1)}(),d=Object(s.a)(i,2),m=d[0],p=d[1];return r.a.createElement(Qt,{style:t?{flex:1}:{marginTop:"10px",minHeight:"270px",maxHeight:"calc(100vh - 700px)"}},r.a.createElement(oa,null,"Recent Market trades"),r.a.createElement(ca,null,r.a.createElement(Ut.a,{span:8},"Price (",o,") "),r.a.createElement(Ut.a,{span:8,style:{textAlign:"right"}},"Size (",a,")"),r.a.createElement(Ut.a,{span:8,style:{textAlign:"right"}},"Time")),!!m&&p&&r.a.createElement("div",{style:{marginRight:"-20px",paddingRight:"5px",overflowY:"scroll",maxHeight:t?"calc(100% - 75px)":"calc(100vh - 800px)"}},m.map((function(e,t){return r.a.createElement(Wt.a,{key:t,style:{marginBottom:4}},r.a.createElement(Ut.a,{span:8,style:{color:"buy"===e.side?"#41C77A":"#F23B69"}},(null===c||void 0===c?void 0:c.tickSize)&&!isNaN(e.price)?Number(e.price).toFixed(E(c.tickSize)):e.price),r.a.createElement(Ut.a,{span:8,style:{textAlign:"right"}},(null===c||void 0===c?void 0:c.minOrderSize)&&!isNaN(e.size)?Number(e.size).toFixed(E(c.minOrderSize)):e.size),r.a.createElement(Ut.a,{span:8,style:{textAlign:"right",color:"#434a59"}},e.time&&new Date(e.time).toLocaleTimeString()))}))))}var la=n(194),ua=n.n(la),sa=n(318),da=n.n(sa),ma=Kt.a.Title;function pa(e){var t=e.switchToLiveMarkets,n=function(){var e=St(),t=S("customMarkets",[]),n=Object(s.a)(t,1)[0];if(!e)return null;var a=[];return e.forEach((function(e){var t=e.market,r=e.openOrdersList,o=lt(t,n),c=o.baseCurrency,i=o.quoteCurrency,l=o.marketName;c&&i&&t&&(r||[]).forEach((function(e){var n=(null===e||void 0===e?void 0:e.baseTokenTotal)&&(null===e||void 0===e?void 0:e.baseTokenFree)&&t.baseSplSizeToNumber(e.baseTokenTotal.sub(e.baseTokenFree)),r=(null===e||void 0===e?void 0:e.quoteTokenTotal)&&(null===e||void 0===e?void 0:e.quoteTokenFree)&&t.baseSplSizeToNumber(e.quoteTokenTotal.sub(e.quoteTokenFree)),o=(null===e||void 0===e?void 0:e.baseTokenFree)&&t.baseSplSizeToNumber(e.baseTokenFree),u=(null===e||void 0===e?void 0:e.quoteTokenFree)&&t.baseSplSizeToNumber(e.quoteTokenFree);a.push({marketName:l,market:t,coin:c,key:"".concat(l).concat(c),orders:n,unsettled:o,openOrders:e}),a.push({marketName:l,market:t,coin:i,key:"".concat(l).concat(i),orders:r,unsettled:u,openOrders:e})}))})),a}(),a=function(){var e=le(),t=e.connected,n=e.wallet,a=S("customMarkets",[]),r=Object(s.a)(a,1)[0],o=H(),c=St(),i=c&&c.map((function(e){return e.market})),d=i&&i.filter((function(e){return!!e})).map((function(e){return e.address.toBase58()}));function m(){return(m=Object(u.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(i){e.next=4;break}return e.abrupt("return",null);case 4:return console.log("refreshing getOpenOrdersForDeprecatedMarkets"),a=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return a=lt(t,r),c=a.marketName,e.prev=3,console.log("Fetching open orders for",c),e.next=7,t.loadOrdersForOwner(o,n.publicKey);case 7:return e.abrupt("return",e.sent.map((function(e){return Object(J.a)({marketName:c,market:t},e)})));case 10:return e.prev=10,e.t0=e.catch(3),console.log("Failed loading open orders",t.address.toBase58(),e.t0),re({message:"Error loading open orders for deprecated ".concat(c),description:e.t0.message,type:"error"}),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(i.map(a));case 8:return e.abrupt("return",e.sent.filter((function(e){return!!e})).flat());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=Object(L.a)("getOpenOrdersForDeprecatedMarkets",t,o,n,d&&d.toString()),f=R((function(){return m.apply(this,arguments)}),p,{refreshInterval:ct}),b=Object(s.a)(f,2),v=b[0],h=b[1];return console.log("openOrders",v),{openOrders:v,loaded:h,refreshOpenOrders:function(){return D(p)}}}(),o=a.openOrders,c=a.loaded,i=a.refreshOpenOrders,d=rt().refresh,m=!o||o.length>0,p=n&&n.filter((function(e){var t=e.orders,n=e.unsettled;return t>0||n>0})),f=p&&p.length>0;return r.a.createElement(Qt,null,r.a.createElement(ma,{level:4,style:{color:"rgba(255, 255, 255, 1)"}},"Migrate to new USDC markets"),r.a.createElement(Kt.a,null,r.a.createElement(ae,{external:!0,to:"https://explorer.solana.com/address/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"},"Native USDC")," ","has arrived on Solana! See"," ",r.a.createElement(ae,{external:!0,to:"https://www.circle.com/blog/circle-partners-with-alameda-research-ftx-project-serum-to-introduce-support-for-usdc-on-solana"},"Circle's announcement")," ","for more information."),r.a.createElement("br",null),r.a.createElement(Kt.a,null,"Serum is transitioning from the previous"," ",r.a.createElement(ae,{external:!0,to:"https://explorer.solana.com/address/BXXkv6z8ykpG1yuvUDPgh732wzVHB69RnB9YgSYh3itW"},"Wrapped USDC"),", now called WUSDC, to Native USDC. You can convert from WUSDC to USDC directly on"," ",r.a.createElement(ae,{external:!0,to:"https://sollet.io"},"sollet.io"),", or can deposit WUSDC and be credited USDC on exchanges like"," ",r.a.createElement(ae,{external:!0,to:"https://ftx.com"},"FTX"),"."),r.a.createElement("br",null),r.a.createElement(Kt.a,null,"Markets with WUSDC as the quote curency are now deprecated. To migrate over to the new USDC markets, please cancel your orders and settle your funds on old markets."),r.a.createElement("div",{style:{marginTop:20,display:"flex",justifyContent:"center"}},r.a.createElement(Xt.a,{onClick:function(){return d(!0)}},r.a.createElement(da.a,null)," Refresh data")),n?r.a.createElement(r.a.Fragment,null,r.a.createElement(Bn.a,null,!m&&r.a.createElement(ua.a,null)," Cancel your orders"),m?c?r.a.createElement(On,{openOrders:o,onCancelSuccess:function(){setTimeout((function(){d(),i()}),1e3)}}):r.a.createElement(Ft.a,{size:"large"}):null,r.a.createElement(Bn.a,null,!f&&r.a.createElement(ua.a,null)," Settle your funds"),f&&r.a.createElement(hn,{balances:p,hideWalletBalance:!0,showMarket:!0,onSettleSuccess:function(){setTimeout(d,1e3)}}),r.a.createElement(Bn.a,null,"Switch to upgraded markets"),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(Xt.a,{onClick:t,disabled:f||m},"Switch to new markets"))):r.a.createElement(Ft.a,{size:"large"}))}var fa=n(606),ba=n(605),va=Kt.a.Text;function ha(e){var t,n,o=e.visible,c=e.onAddCustomMarket,i=e.onClose,l=H(),u=Object(a.useState)(""),d=Object(s.a)(u,2),p=d[0],f=d[1],v=Object(a.useState)(""),h=Object(s.a)(v,2),g=h[0],k=h[1],y=Object(a.useState)(""),E=Object(s.a)(y,2),O=E[0],x=E[1],w=Object(a.useState)(""),j=Object(s.a)(w,2),S=j[0],T=j[1],M=Object(a.useState)(null),C=Object(s.a)(M,2),A=C[0],I=C[1],B=Object(a.useState)(!1),P=Object(s.a)(B,2),F=P[0],z=P[1],N=b(p),K=Q(N?new m.PublicKey(p):null),q=Object(s.a)(K,1)[0],R=q?q.owner.toBase58():Z.MARKETS.find((function(e){return!e.deprecated})).programId.toBase58();Object(a.useEffect)((function(){N&&R?(z(!0),Z.Market.load(l,new m.PublicKey(p),{},new m.PublicKey(R)).then((function(e){I(e)})).catch((function(){D(),I(null)})).finally((function(){return z(!1)}))):D()}),[l,p,R]);var D=function(){k(null),x(null),T(null)},L=Z.MARKETS.find((function(e){return e.address.toBase58()===p&&e.programId.toBase58()===R})),W=Z.MARKETS.find((function(e){return e.programId.toBase58()===R})),U=(null===A||void 0===A?void 0:A.baseMintAddress)&&(null===(t=Z.TOKEN_MINTS.find((function(e){return e.address.equals(A.baseMintAddress)})))||void 0===t?void 0:t.name),_=(null===A||void 0===A?void 0:A.quoteMintAddress)&&(null===(n=Z.TOKEN_MINTS.find((function(e){return e.address.equals(A.quoteMintAddress)})))||void 0===n?void 0:n.name),X=!F&&!!A&&A.publicKey.toBase58()===p&&p&&R&&g&&(U||O)&&(_||S)&&N,V=function(){D(),I(null),f(null),i()};return r.a.createElement(Pn.a,{title:"Add custom market",visible:o,onOk:function(){if(X){var e={address:p,programId:R,name:g};U||(e.baseLabel=O),_||(e.quoteLabel=S),c(e),V()}else re({message:"Please fill in all fields with valid values",type:"error"})},okText:"Add",onCancel:V,okButtonProps:{disabled:!X}},r.a.createElement("div",null,N?r.a.createElement(r.a.Fragment,null,!A&&!F&&r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(va,{type:"danger"},"Not a valid market")),A&&L&&r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(va,{type:"warning"},"Market known: ",L.name)),A&&!W&&r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(va,{type:"danger"},"Warning: unknown DEX program")),A&&W&&W.deprecated&&r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(va,{type:"warning"},"Warning: deprecated DEX program"))):r.a.createElement(r.a.Fragment,null,p&&!N&&r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(va,{type:"danger"},"Invalid market ID"))),r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(Ut.a,{span:24},r.a.createElement(Gn.a,{placeholder:"Market Id",value:p,onChange:function(e){return f(e.target.value)},suffix:F?r.a.createElement(ba.a,null):null}))),r.a.createElement(Wt.a,{style:{marginBottom:8,marginTop:8}},r.a.createElement(Ut.a,{span:24},r.a.createElement(Gn.a,{placeholder:"Market Label",disabled:!A,value:g,onChange:function(e){return k(e.target.value)}}))),r.a.createElement(Wt.a,{gutter:[8],style:{marginBottom:8}},r.a.createElement(Ut.a,{span:12},r.a.createElement(Gn.a,{placeholder:"Base label",disabled:!A||U,value:U||O,onChange:function(e){return x(e.target.value)}}),A&&!U&&r.a.createElement("div",{style:{marginTop:8}},r.a.createElement(va,{type:"warning"},"Warning: unknown token"))),r.a.createElement(Ut.a,{span:12},r.a.createElement(Gn.a,{placeholder:"Quote label",disabled:!A||_,value:_||S,onChange:function(e){return T(e.target.value)}}),A&&!_&&r.a.createElement("div",{style:{marginTop:8}},r.a.createElement(va,{type:"warning"},"Warning: unknown token"))))))}function ga(){var e=Object(At.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n"]);return ga=function(){return e},e}var ka=Lt.a.Option,ya=Lt.a.OptGroup,Ea=It.c.div(ga());function Oa(){var e=dt(),t=e.market,n=e.marketName,o=e.customMarkets,c=e.setCustomMarkets,i=e.setMarketAddress,l=nt.filter((function(e){return!e.deprecated})),u=Object(a.useState)(!1),d=Object(s.a)(u,2),m=d[0],p=d[1],f=Object(a.useState)(!1),b=Object(s.a)(f,2),v=b[0],h=b[1],g=St(),k=Object(a.useState)({height:window.innerHeight,width:window.innerWidth}),y=Object(s.a)(k,2),E=y[0],O=y[1];Object(a.useEffect)((function(){document.title=n?"".concat(n," \u2014 Serum"):"Serum"}),[n]);var x=Object(a.useRef)();Object(a.useEffect)((function(){var e=function(){O({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var w=null===E||void 0===E?void 0:E.width,j={onChangeOrderRef:function(e){return x.current=e},onPrice:Object(a.useCallback)((function(e){return x.current&&x.current({price:e})}),[]),onSize:Object(a.useCallback)((function(e){return x.current&&x.current({size:e})}),[])},S=Object(a.useCallback)((function(){return m?r.a.createElement(wa,{switchToLiveMarkets:function(){return p(!1)}}):w<1e3?r.a.createElement(Ta,j):w<1450?r.a.createElement(Sa,j):r.a.createElement(ja,j)}),[w,j,m]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ha,{visible:v,onClose:function(){return h(!1)},onAddCustomMarket:function(e){if(Tt(o).some((function(t){return t.address.toBase58()===e.address})))re({message:"A market with the given ID already exists",type:"error"});else{var t=[].concat(Object(C.a)(o),[e]);c(t),i(e.address)}}}),r.a.createElement(Ea,null,r.a.createElement(Wt.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16},r.a.createElement(Ut.a,null,r.a.createElement(xa,{markets:l,setHandleDeprecated:p,placeholder:"Select market",customMarkets:o,onDeleteCustomMarket:function(e){var t=o.filter((function(t){return t.address!==e}));c(t)}})),t?r.a.createElement(Ut.a,null,r.a.createElement(_t.a,{content:r.a.createElement(qn,{address:t.publicKey.toBase58()}),placement:"bottomRight",title:"Market address",trigger:"click"},r.a.createElement(Rn.a,{style:{color:"#2abdd2"}}))):null,r.a.createElement(Ut.a,null,r.a.createElement(fa.a,{style:{color:"#2abdd2"},onClick:function(){return h(!0)}})),g&&g.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut.a,null,r.a.createElement(Kt.a,null,"You have unsettled funds on old markets! Please go through them to claim your funds.")),r.a.createElement(Ut.a,null,r.a.createElement(Xt.a,{onClick:function(){return p(!m)}},m?"View new markets":"Handle old markets")))),S()))}function xa(e){var t,n,a=e.markets,o=e.placeholder,c=e.setHandleDeprecated,i=e.customMarkets,l=e.onDeleteCustomMarket,u=dt(),s=u.market,d=u.setMarketAddress,m=function(e){return e.split("/")[0]},p=function(e){return e.split("/")[1]},f=null===(t=Tt(i).find((function(e){return(null===s||void 0===s?void 0:s.address)&&e.address.equals(s.address)})))||void 0===t||null===(n=t.address)||void 0===n?void 0:n.toBase58();return r.a.createElement(Lt.a,{showSearch:!0,size:"large",style:{width:200},placeholder:o||"Select a market",optionFilterProp:"name",onSelect:function(e){c(!1),d(e)},listHeight:400,value:f,filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},i&&i.length>0&&r.a.createElement(ya,{label:"Custom"},i.map((function(e,t){var n=e.address,a=e.name;return r.a.createElement(ka,{value:n,key:n,name:a,style:{padding:"10px",backgroundColor:t%2===0?"rgb(39, 44, 61)":null}},r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{flex:"auto"},a),f!==n&&r.a.createElement(Ut.a,null,r.a.createElement(kn.a,{onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),l&&l(n)}}))))}))),r.a.createElement(ya,{label:"Markets"},a.sort((function(e,t){return"USDT"===p(e.name)&&"USDT"!==p(t.name)?-1:"USDT"!==p(e.name)&&"USDT"===p(t.name)?1:0})).sort((function(e,t){return m(e.name)<m(t.name)?-1:m(e.name)>m(t.name)?1:0})).map((function(e,t){var n=e.address,a=e.name,o=e.deprecated;return r.a.createElement(ka,{value:n.toBase58(),key:n,name:a,style:{padding:"10px",backgroundColor:t%2===0?"rgb(39, 44, 61)":null}},a," ",o?" (Deprecated)":null)}))))}var wa=function(e){var t=e.switchToLiveMarkets;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{flex:"auto"},r.a.createElement(pa,{switchToLiveMarkets:t}))))},ja=function(e){var t=e.onChangeOrderRef,n=e.onPrice,a=e.onSize;return r.a.createElement(Wt.a,{style:{minHeight:"900px",flexWrap:"nowrap"}},r.a.createElement(Ut.a,{flex:"auto",style:{height:"100%",display:"flex"}},r.a.createElement(Cn,null)),r.a.createElement(Ut.a,{flex:"360px",style:{height:"100%"}},r.a.createElement(dn,{smallScreen:!1,onPrice:n,onSize:a}),r.a.createElement(ia,{smallScreen:!1})),r.a.createElement(Ut.a,{flex:"400px",style:{height:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(na,{setChangeOrderRef:t}),r.a.createElement(Hn,null)))},Sa=function(e){var t=e.onChangeOrderRef,n=e.onPrice,a=e.onSize;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt.a,{style:{height:"900px"}},r.a.createElement(Ut.a,{flex:"auto",style:{height:"100%",display:"flex"}},r.a.createElement(dn,{smallScreen:!0,depth:13,onPrice:n,onSize:a})),r.a.createElement(Ut.a,{flex:"auto",style:{height:"100%",display:"flex"}},r.a.createElement(ia,{smallScreen:!0})),r.a.createElement(Ut.a,{flex:"400px",style:{height:"100%",display:"flex",flexDirection:"column"}},r.a.createElement(na,{setChangeOrderRef:t}),r.a.createElement(Hn,null))),r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{flex:"auto"},r.a.createElement(Cn,null))))},Ta=function(e){var t=e.onChangeOrderRef,n=e.onPrice,a=e.onSize;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},r.a.createElement(na,{style:{flex:1},setChangeOrderRef:t})),r.a.createElement(Ut.a,{xs:24,sm:12},r.a.createElement(Hn,null))),r.a.createElement(Wt.a,{style:{height:"500px"}},r.a.createElement(Ut.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},r.a.createElement(dn,{smallScreen:!0,onPrice:n,onSize:a})),r.a.createElement(Ut.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},r.a.createElement(ia,{smallScreen:!0}))),r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{flex:"auto"},r.a.createElement(Cn,null))))};function Ma(){var e=function(){var e,t=H(),n=le().connected,a=wt(),r=Object(s.a)(a,2),o=r[0],c=r[1],i=at(dt().customMarkets),m=Object(s.a)(i,2),p=m[0],f=m[1],b={},v=Object(d.a)(o||[]);try{for(v.s();!(e=v.n()).done;){var h=e.value,g=h.market.toBase58();g in b||(b[g]=[]),b[g].push(h)}}catch(w){v.e(w)}finally{v.f()}var k=Object.fromEntries((p||[]).map((function(e){return[e.market.publicKey.toBase58(),e]}))),y=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.keys(b).map(function(){var e=Object(u.a)(l.a.mark((function e(n){var a,r,o,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k[n].market,e.next=3,Promise.all([a.loadBids(t),a.loadAsks(t)]);case 3:return r=e.sent,o=Object(s.a)(r,2),c=o[0],i=o[1],e.abrupt("return",{orders:a.filterForOpenOrders(c,i,b[n]),marketAddress:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=Object(L.a)("getAllOpenOrders",c,(o||[]).length,t,n,f),O=R(y,E,{refreshInterval:ct}),x=Object(s.a)(O,2);return{openOrders:x[0],loaded:x[1],refreshOpenOrders:function(){return D(E)}}}(),t=e.openOrders,n=e.loaded,a=e.refreshOpenOrders,o=dt().customMarkets,c=Tt(o),i=Object.fromEntries(c.map((function(e){return[e.address.toBase58(),e.name]}))),m=at(o),p=Object(s.a)(m,1)[0],f=Object.fromEntries((p||[]).map((function(e){return[e.market.address.toBase58(),e.market]}))),b=(t||[]).map((function(e){return e.orders.map((function(t){return Object(J.a)({marketName:i[e.marketAddress],market:f[e.marketAddress]},t)}))})).flat();return r.a.createElement(Qt,{style:{flex:1,paddingTop:10}},r.a.createElement(Xt.a,{onClick:a,loading:!n},"Refresh"),r.a.createElement(On,{openOrders:b,pageSize:25,loading:!n,onCancelSuccess:a,marketFilter:!0}))}function Ca(e){var t=e.walletBalances,n=H(),o=le(),c=o.wallet,i=o.connected,d=st(),p=Object(s.a)(d,1)[0],f=gt(),b=Object(s.a)(f,2),v=b[0],h=b[1],g=at(dt().customMarkets),k=Object(s.a)(g,2),y=k[0],E=k[1],O=Object(a.useState)(!1),x=Object(s.a)(O,2),w=x[0],j=x[1];function S(){return(S=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),e.prev=1,v&&h){e.next=5;break}return re({message:"Error settling funds",description:"TokenAccounts not connected",type:"error"}),e.abrupt("return");case 5:if(y&&E){e.next=8;break}return re({message:"Error settling funds",description:"Markets not connected",type:"error"}),e.abrupt("return");case 8:return e.next=10,ke({connection:n,tokenAccounts:v,selectedTokenAccounts:p,wallet:c,markets:y.map((function(e){return e.market}))});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),re({message:"Error settling funds",description:e.t0.message,type:"error"});case 15:return e.prev=15,j(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))).apply(this,arguments)}var M=[{title:"Coin",key:"coin",width:"20%",render:function(e){return r.a.createElement(Wt.a,{align:"middle"},r.a.createElement("a",{href:"https://explorer.solana.com/address/".concat(e.mint),target:"_blank",rel:"noopener noreferrer"},e.coin||T(new m.PublicKey(e.mint))))}},{title:"Wallet Balance",dataIndex:"walletBalance",key:"walletBalance",width:"20%"},{title:"Open orders total balances",dataIndex:"openOrdersTotal",key:"openOrdersTotal",width:"20%"},{title:"Unsettled balances",dataIndex:"openOrdersFree",key:"openOrdersFree",width:"20%"},{title:"Selected token account",key:"selectTokenAccount",width:"20%",render:function(e){return r.a.createElement(Wt.a,{align:"middle",style:{width:"430px"}},r.a.createElement(Nn,{accounts:null===v||void 0===v?void 0:v.filter((function(t){return t.effectiveMint.toBase58()===e.mint})),mint:e.mint}))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(vn,{emptyLabel:"No balances",dataSource:t,columns:M,pagination:!1}),i&&r.a.createElement(Xt.a,{onClick:function(){return S.apply(this,arguments)},loading:w},"Settle all funds"))}var Aa=xn.a.TabPane;function Ia(){var e=function(){var e=gt(),t=Object(s.a)(e,1)[0],n=le().connected,a=et(),r=Object(s.a)(a,2),o=r[0],c=r[1];if(!n||!c)return[];var i,l={},u=Object(d.a)(t||[]);try{for(u.s();!(i=u.n()).done;){var m=i.value;if(m.account){var p=void 0;(p=m.effectiveMint.equals(me.WRAPPED_SOL_MINT)?{mint:me.WRAPPED_SOL_MINT,owner:m.pubkey,amount:m.account.lamports}:He(m.account.data)).mint.toBase58()in l||(l[p.mint.toBase58()]=0);var b=o&&o[p.mint.toBase58()],v=O(new f.a(p.amount),x((null===b||void 0===b?void 0:b.decimals)||0));l[p.mint.toBase58()]+=v}}}catch(h){u.e(h)}finally{u.f()}return Object.entries(l).map((function(e){var t=Object(s.a)(e,2);return{mint:t[0],balance:t[1]}}))}(),t=function(){var e,t=dt().customMarkets,n=at(t),a=Object(s.a)(n,1)[0],r=Object.fromEntries(Z.TOKEN_MINTS.map((function(e){return[e.address.toBase58(),e.name]}))),o=Object(d.a)(a||[]);try{var c=function(){var n=e.value,a=t.find((function(e){return e.address===n.market.address.toBase58()}));n.market.baseMintAddress.toBase58()in r||a&&(r[n.market.baseMintAddress.toBase58()]=a.baseLabel||"".concat(a.name,"_BASE")),n.market.quoteMintAddress.toBase58()in r||a&&(r[n.market.quoteMintAddress.toBase58()]=a.quoteLabel||"".concat(a.name,"_QUOTE"))};for(o.s();!(e=o.n()).done;)c()}catch(i){o.e(i)}finally{o.f()}return r}(),n=function(){var e=wt(),t=Object(s.a)(e,2),n=t[0],a=t[1],r=et(),o=Object(s.a)(r,2),c=o[0],i=o[1],l=at(dt().customMarkets),u=Object(s.a)(l,1)[0];if(!a||!i)return{};var m,p=Object.fromEntries((u||[]).map((function(e){return[e.market.address.toBase58(),e]}))),b={},v=Object(d.a)(n||[]);try{for(v.s();!(m=v.n()).done;){var h=m.value,g=p[h.market.toBase58()],k=null===g||void 0===g?void 0:g.market.baseMintAddress.toBase58(),y=null===g||void 0===g?void 0:g.market.quoteMintAddress.toBase58();k in b||(b[k]=[]),y in b||(b[y]=[]);var E=c&&c[k],w=O(new f.a(h.baseTokenFree),x((null===E||void 0===E?void 0:E.decimals)||0)),j=O(new f.a(h.baseTokenTotal),x((null===E||void 0===E?void 0:E.decimals)||0)),S=c&&c[y],T=O(new f.a(h.quoteTokenFree),x((null===S||void 0===S?void 0:S.decimals)||0)),M=O(new f.a(h.quoteTokenTotal),x((null===S||void 0===S?void 0:S.decimals)||0));b[k].push({market:h.market,free:w,total:j}),b[y].push({market:h.market,free:T,total:M})}}catch(C){v.e(C)}finally{v.f()}return b}(),a=(e||[]).map((function(e){var a,r={coin:t[e.mint],mint:e.mint,walletBalance:e.balance,openOrdersFree:0,openOrdersTotal:0},o=Object(d.a)(n[e.mint]||[]);try{for(o.s();!(a=o.n()).done;){var c=a.value;r.openOrdersFree+=c.free,r.openOrdersTotal+=c.total}}catch(i){o.e(i)}finally{o.f()}return r}));return r.a.createElement(Qt,{style:{flex:1,paddingTop:10}},r.a.createElement(xn.a,{defaultActiveKey:"walletBalances"},r.a.createElement(Aa,{tab:"Wallet Balances",key:"walletBalances"},r.a.createElement(Ca,{walletBalances:a}))))}var Ba=n(607);function Pa(){var e,t=le(),n=t.connected,a=t.wallet,o=null===a||void 0===a||null===(e=a.publicKey)||void 0===e?void 0:e.toBase58();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xt.a,{type:"text",size:"large",onClick:n?a.disconnect:a.connect,style:{color:"#2abdd2"}},r.a.createElement(Ba.a,null),n?"Disconnect":"Connect wallet"),n&&r.a.createElement(_t.a,{content:r.a.createElement(qn,{address:o}),placement:"bottomRight",title:"Wallet public key",trigger:"click"},r.a.createElement(Rn.a,{style:{color:"#2abdd2"}})))}var Fa=n(608);function za(){var e=Object(At.a)(["\n  background: #02bf76;\n  border-color: #02bf76;\n"]);return za=function(){return e},e}function Na(){var e=Object(At.a)(["\n  color: #2abdd2;\n  background-color: #212734;\n  border-width: 0px;\n"]);return Na=function(){return e},e}var Ka=Lt.a.Option,qa=Kt.a.Title,Ra=Object(It.c)(Xt.a)(Na()),Da=Object(It.c)(Xt.a)(za());function La(){var e=le(),t=e.connected,n=e.wallet,o=dt().customMarkets,c=Tt(o),i=dt(),l=i.market,u=i.setMarketAddress,d=Object(a.useState)(void 0),m=Object(s.a)(d,2),p=m[0],f=m[1],b=Object(a.useState)(void 0),v=Object(s.a)(b,2),h=v[0],g=v[1],k=Object(a.useState)(void 0),y=Object(s.a)(k,2),E=y[0],O=y[1],x=Object.fromEntries(c.map((function(e){return[e.name,e]}))),w=new Map;Object.keys(x).forEach((function(e){var t=e.split("/"),n=Object(s.a)(t,2),a=n[0],r=n[1];w.has(a)?w.set(a,new Set([].concat(Object(C.a)(w.get(a)||[]),[r]))):w.set(a,new Set([r])),w.has(r)?w.set(r,new Set([].concat(Object(C.a)(w.get(r)||[]),[a]))):w.set(r,new Set([a]))}));return r.a.createElement(Qt,{style:{maxWidth:500}},r.a.createElement(qa,{level:3},"Convert"),!t&&r.a.createElement(Wt.a,{justify:"center"},r.a.createElement(Ut.a,null,r.a.createElement(Pa,null))),w&&t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(Ut.a,null,r.a.createElement(Lt.a,{style:{minWidth:300},placeholder:"Select a token",value:p,onChange:function(e){f(e),g(void 0)}},Array.from(w.keys()).map((function(e){return r.a.createElement(Ka,{value:e,key:e},e)}))))),p&&r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(Ut.a,null,r.a.createElement(Lt.a,{style:{minWidth:300},value:h,onChange:function(e){var t=c.filter((function(e){return!e.deprecated})).find((function(t){return t.name==="".concat(p,"/").concat(e)||t.name==="".concat(e,"/").concat(p)}));if(!t)return console.warn("Could not find market info for market names ".concat(p,"/").concat(e," or ").concat(e,"/").concat(p)),void re({message:"Invalid market",type:"error"});u(t.address.toBase58()),g(e)}},Object(C.a)(w.get(p)||[]).map((function(e){return r.a.createElement(Ka,{value:e,key:e},e)}))))),p&&h&&r.a.createElement(Wa,{size:E,setSize:O,fromToken:p,toToken:h,wallet:n,market:l,customMarkets:o})))}function Wa(e){var t=e.size,n=e.setSize,o=e.fromToken,c=e.toToken,i=e.wallet,d=e.market,m=e.customMarkets,p=gt(),f=Object(s.a)(p,1)[0],b=jt(),v=Object(a.useState)(),h=Object(s.a)(v,2),g=h[0],y=h[1],O=Object(a.useState)(),x=Object(s.a)(O,2),w=x[0],j=x[1],S=H(),T=V(),M=Object(a.useState)(!1),C=Object(s.a)(M,2),A=C[0],I=C[1],B=function(e){var t=lt(e,m).marketName;if(!t)throw Error("Cannot determine if coin is quote or base because marketName is missing");var n=t.split("/"),a=Object(s.a)(n,1)[0];return o===a},P=function(){var e=Object(u.a)(l.a.mark((function e(){var n,a,r,o,c,u,m,p,b,v,h,g;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=4;break}return console.warn("Market is null when attempting convert."),re({message:"Invalid market",type:"error"}),e.abrupt("return");case 4:n=kt(f,null===d||void 0===d?void 0:d.baseMintAddress),a=kt(f,null===d||void 0===d?void 0:d.quoteMintAddress),e.prev=6,r=B(d)?"sell":"buy",e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(6),console.warn(e.t0),re({message:"Error placing order",description:e.t0.message,type:"error"}),e.abrupt("return");case 15:return o="buy"===r?d._decoded.asks:d._decoded.bids,e.next=18,S.getAccountInfo(o);case 18:if(null===(c=e.sent)||void 0===c?void 0:c.data){e.next=22;break}return re({message:"Invalid orderbook data",type:"error"}),e.abrupt("return");case 22:if(u=Z.Orderbook.decode(d,c.data),m=u&&u.getL2(1).map((function(e){return Object(s.a)(e,1)[0]})),p=Object(s.a)(m,1),p[0]){e.next=27;break}return re({message:"No best price found",type:"error"}),e.abrupt("return");case 27:if(t){e.next=30;break}return re({message:"Size not specified",type:"error"}),e.abrupt("return");case 30:return b=E(d.tickSize),v=Mt(u,t,b),h=E(d.minOrderSize),g=k("sell"===r?t:t/v,h),I(!0),e.prev=36,e.next=39,je({side:r,price:v,size:g,orderType:"ioc",market:d,connection:T,wallet:i,baseCurrencyAccount:null===n||void 0===n?void 0:n.pubkey,quoteCurrencyAccount:null===a||void 0===a?void 0:a.pubkey});case 39:e.next=45;break;case 41:e.prev=41,e.t1=e.catch(36),console.warn(e.t1),re({message:"Error placing order",description:e.t1.message,type:"error"});case 45:return e.prev=45,I(!1),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[6,10],[36,41,45,48]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(l.a.mark((function e(){var n,a,r,o,c,i,u,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=B(d)?"sell":"buy",a="buy"===n?d._decoded.asks:d._decoded.bids,e.next=5,S.getAccountInfo(a);case 5:if((null===(r=e.sent)||void 0===r?void 0:r.data)&&d){e.next=8;break}return e.abrupt("return",[null,null]);case 8:if(o=Z.Orderbook.decode(d,r.data),c=o&&o.getL2(1).map((function(e){return Object(s.a)(e,1)[0]})),i=Object(s.a)(c,1),i[0]&&t){e.next=12;break}return e.abrupt("return",[null,null]);case 12:if(u=E(d.tickSize),m=Ct(o,t,u),"buy"!==n){e.next=18;break}return e.abrupt("return",[m.toFixed(6),1]);case 18:return e.abrupt("return",[1,m.toFixed(6)]);case 19:e.next=25;break;case 21:return e.prev=21,e.t0=e.catch(0),console.log("Got error ".concat(e.t0)),e.abrupt("return",[null,null]);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){F().then((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];y(n||void 0),j(a||void 0)}))}),[null===d||void 0===d?void 0:d.address.toBase58(),t]);var z=d&&t&&t>0,N=b.find((function(e){return e.coin===o})),K=.99*(((null===N||void 0===N?void 0:N.unsettled)||0)+((null===N||void 0===N?void 0:N.wallet)||0));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(Ut.a,null,r.a.createElement(Gn.a,{style:{minWidth:300},addonBefore:"Size (".concat(o,")"),placeholder:"Size",value:null===t?void 0:t,type:"number",onChange:function(e){return n(parseFloat(e.target.value)||void 0)}}))),r.a.createElement(Wt.a,{gutter:12,style:{marginBottom:8}},r.a.createElement(Ut.a,{span:12},r.a.createElement(Ra,{block:!0,size:"large",onClick:function(){return n(k(K,4))}},"Max: ",K.toFixed(4))),r.a.createElement(Ut.a,{span:12},r.a.createElement(Da,{block:!0,type:"primary",size:"large",loading:A,onClick:P,disabled:!z},"Convert"))),z&&r.a.createElement(Wt.a,{align:"middle",justify:"center"},r.a.createElement(Ut.a,null,g," ",o),r.a.createElement(Ut.a,{offset:1},r.a.createElement(Fa.a,null)),r.a.createElement(Ut.a,{offset:1},w," ",c)))}function Ua(){var e=Object(At.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n"]);return Ua=function(){return e},e}var _a=It.c.div(Ua());function Xa(){return r.a.createElement(_a,{style:{flex:1,paddingTop:10}},r.a.createElement(Wt.a,{justify:"center"},r.a.createElement(Ut.a,null,r.a.createElement(La,null))))}var Ha=n(588),Va=n(610),Ga=n(101),Qa=n(319),Ya=n.n(Qa),Ja=r.a.createContext(null);function Za(e){var t=e.children,n=S("autoSettleEnabled",!0),a=Object(s.a)(n,2),o=a[0],c=a[1],i=gt(),d=Object(s.a)(i,1)[0],m=le(),p=m.connected,f=m.wallet,b=at(dt().customMarkets),v=Object(s.a)(b,1)[0],h=H(),g=st(),k=Object(s.a)(g,1)[0];return Ht((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(v||[]).map((function(e){return e.market})),e.prev=1,console.log("Auto settling"),e.next=5,ke({connection:h,wallet:f,tokenAccounts:d||[],markets:t,selectedTokenAccounts:k});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Error auto settling funds: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();p&&(null===f||void 0===f?void 0:f.autoApprove)&&o&&e()}),1e4),r.a.createElement(Ja.Provider,{value:{autoSettleEnabled:o,setAutoSettleEnabled:c}},t)}var $a=Kt.a.Paragraph;function er(e){var t=e.autoApprove,n=function(){var e=Object(a.useContext)(Ja);if(!e)throw new Error("Missing preferences context");return{autoSettleEnabled:e.autoSettleEnabled,setAutoSettleEnabled:e.setAutoSettleEnabled}}(),o=n.autoSettleEnabled,c=n.setAutoSettleEnabled;return r.a.createElement("div",null,r.a.createElement(Yn.a,{style:{marginRight:10},disabled:!t,checked:t&&o,onChange:c})," ","Auto settle",!t&&r.a.createElement($a,{style:{color:"rgba(255,255,255,0.5)",marginTop:10}},"To use auto settle, first enable auto approval in your wallet"))}function tr(e){var t=e.visible,n=e.testingConnection,o=e.onAddCustomEndpoint,c=e.onClose,i=Object(a.useState)(""),l=Object(s.a)(i,2),u=l[0],d=l[1],m=Object(a.useState)(""),p=Object(s.a)(m,2),f=p[0],b=p[1],v=function(){d(""),b(""),c&&c()},h=""!==u&&""!==f;return r.a.createElement(Pn.a,{title:"Add custom endpoint",visible:t,onOk:function(){o({name:f,endpoint:"https://"+u,custom:!0}),v()},okText:"Add",onCancel:v,okButtonProps:{disabled:!h,loading:n}},r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(Ut.a,{span:24},r.a.createElement(Gn.a,{placeholder:"Cluster Name",value:f,onChange:function(e){return b(e.target.value)}}))),r.a.createElement(Wt.a,{style:{marginBottom:8}},r.a.createElement(Ut.a,{span:24},r.a.createElement(Gn.a,{placeholder:"Cluster Endpoint",value:u,addonBefore:"https://",onChange:function(e){return d(e.target.value)}}))))}var nr=n(320),ar=n(609),rr=Lt.a.Option,or=nr.concat(Z.TOKEN_MINTS.map((function(e){return{name:"".concat(e.name," SPL"),url:"https://explorer.solana.com/address/".concat(e.address.toBase58()),description:"".concat(e.name," SPL token"),icon:"",tags:["token","blockchain","solana","spl","solana",e.address.toBase58()]}})));function cr(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(void 0),l=Object(s.a)(i,2),u=l[0],d=l[1],m=function(){c([]),d(void 0)},p=o.map((function(e){return r.a.createElement(rr,{key:e.name,value:e.name,href:e.url},r.a.createElement("h3",null,e.name),r.a.createElement(Kt.a.Text,{type:"secondary"},e.url.replace("https://","")))})),f=Object(a.useRef)();return r.a.createElement(Lt.a,{ref:f,showSearch:!0,allowClear:!0,value:u,placeholder:e.focussed||void 0===e.focussed?"Search for dex, swap, wallet, token...":"",onSearch:function(e){d(""===e?void 0:e);var t=or.filter((function(t){return function(e,t){var n=e.toLowerCase();return t.name.toLowerCase().includes(n)||t.tags.some((function(e){return e.toLowerCase().includes(n)||n.includes(e.toLowerCase())}))}(e,t)}));c(t)},onClear:m,onSelect:function(e,t){window.open(t.href,"_blank"),m()},onFocus:e.onFocus,onBlur:function(){e.onBlur(),m()},notFoundContent:null,style:{width:e.width||"300px",transition:e.focussed?"width 0.1s ease 0.1s":""},dropdownStyle:{width:e.width||"300px"},dropdownMatchSelectWidth:!1,suffixIcon:r.a.createElement(ar.a,{onClick:function(){return f.current&&f.current.focus()}}),filterOption:!1},p)}function ir(){var e=Object(At.a)(["\n  display: flex;\n  align-items: center;\n  color: #2abdd2;\n  font-weight: bold;\n  cursor: pointer;\n  img {\n    height: 30px;\n    margin-right: 8px;\n  }\n"]);return ir=function(){return e},e}function lr(){var e=Object(At.a)(["\n  background-color: #0d1017;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  padding: 0px 30px;\n  flex-wrap: wrap;\n"]);return lr=function(){return e},e}var ur=It.c.div(lr()),sr=It.c.div(ir()),dr={"/learn":"https://serum-academy.com/en/serum-dex/","/add-market":"https://serum-academy.com/en/add-market/","/wallet-support":"https://serum-academy.com/en/wallet-support","/dex-list":"https://serum-academy.com/en/dex-list/","/developer-resources":"https://serum-academy.com/en/developer-resources/","/explorer":"https://explorer.solana.com","/srm-faq":"https://projectserum.com/srm-faq","/swap":"https://swap.projectserum.com"};function mr(){var e=le(),t=e.connected,n=e.wallet,o=e.providerUrl,c=e.setProvider,i=G(),l=i.endpoint,u=i.endpointInfo,d=i.setEndpoint,p=i.availableEndpoints,f=i.setCustomEndpoints,b=Object(a.useState)(!1),v=Object(s.a)(b,2),h=v[0],g=v[1],k=Object(a.useState)(!1),y=Object(s.a)(k,2),E=y[0],O=y[1],x=Object(Dt.g)(),w=Object(Dt.f)(),j=Object(a.useState)(!1),S=Object(s.a)(j,2),T=S[0],M=S[1],A=Object(a.useCallback)((function(e){e.key in dr||w.push(e.key)}),[w]),I=u&&u.custom;return Object(a.useEffect)((function(){var e=function(){I&&d(W[0].endpoint)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[I,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(tr,{visible:h,testingConnection:E,onAddCustomEndpoint:function(e){if(p.some((function(t){return t.endpoint===e.endpoint})))re({message:"An endpoint with the given url already exists",type:"error"});else{var t=function(t){console.log("Connection to ".concat(e.endpoint," failed: ").concat(t)),re({message:"Failed to connect to ".concat(e.endpoint),type:"error"})};try{new m.Connection(e.endpoint,"recent").getEpochInfo().then((function(t){O(!0),console.log("testing connection to ".concat(e.endpoint));var n=[].concat(Object(C.a)(p.filter((function(e){return e.custom}))),[e]);d(e.endpoint),f(n)})).catch(t)}catch(n){t(n)}finally{O(!1)}}},onClose:function(){return g(!1)}}),r.a.createElement(ur,null,r.a.createElement(sr,{onClick:function(){return w.push("/")}},r.a.createElement("img",{src:Ya.a,alt:""}),"SERUM"),r.a.createElement(Ga.a,{mode:"horizontal",onClick:A,selectedKeys:[x.pathname],style:{borderBottom:"none",backgroundColor:"transparent",display:"flex",alignItems:"flex-end",flex:1}},r.a.createElement(Ga.a.Item,{key:"/",style:{margin:"0 10px 0 20px"}},"TRADE"),!T&&r.a.createElement(Ga.a.Item,{key:"/swap",style:{margin:"0 10px"}},r.a.createElement("a",{href:dr["/swap"],target:"_blank",rel:"noopener noreferrer"},"SWAP")),t&&(!T||"/balances"===x.pathname)&&r.a.createElement(Ga.a.Item,{key:"/balances",style:{margin:"0 10px"}},"BALANCES"),t&&(!T||"/orders"===x.pathname)&&r.a.createElement(Ga.a.Item,{key:"/orders",style:{margin:"0 10px"}},"ORDERS"),t&&(!T||"/convert"===x.pathname)&&r.a.createElement(Ga.a.Item,{key:"/convert",style:{margin:"0 10px"}},"CONVERT"),(!T||"/list-new-market"===x.pathname)&&r.a.createElement(Ga.a.Item,{key:"/list-new-market",style:{margin:"0 10px"}},"ADD MARKET"),!T&&r.a.createElement(Ga.a.SubMenu,{title:"LEARN",onTitleClick:function(){return window.open(dr["/learn"],"_blank")},style:{margin:"0 0px 0 10px"}},r.a.createElement(Ga.a.Item,{key:"/add-market"},r.a.createElement("a",{href:dr["/add-market"],target:"_blank",rel:"noopener noreferrer"},"Adding a market")),r.a.createElement(Ga.a.Item,{key:"/wallet-support"},r.a.createElement("a",{href:dr["/wallet-support"],target:"_blank",rel:"noopener noreferrer"},"Supported wallets")),r.a.createElement(Ga.a.Item,{key:"/dex-list"},r.a.createElement("a",{href:dr["/dex-list"],target:"_blank",rel:"noopener noreferrer"},"DEX list")),r.a.createElement(Ga.a.Item,{key:"/developer-resources"},r.a.createElement("a",{href:dr["/developer-resources"],target:"_blank",rel:"noopener noreferrer"},"Developer resources")),r.a.createElement(Ga.a.Item,{key:"/explorer"},r.a.createElement("a",{href:dr["/explorer"],target:"_blank",rel:"noopener noreferrer"},"Solana block explorer")),r.a.createElement(Ga.a.Item,{key:"/srm-faq"},r.a.createElement("a",{href:dr["/srm-faq"],target:"_blank",rel:"noopener noreferrer"},"SRM FAQ")))),r.a.createElement("div",{style:{display:"flex",alignItems:"center",paddingRight:5}},r.a.createElement(cr,{onFocus:function(){return M(!0)},onBlur:function(){return M(!1)},focussed:T,width:T?"350px":"35px"})),r.a.createElement("div",null,r.a.createElement(Wt.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16},r.a.createElement(Ut.a,null,r.a.createElement(fa.a,{style:{color:"#2abdd2"},onClick:function(){return g(!0)}})),r.a.createElement(Ut.a,null,r.a.createElement(_t.a,{content:l,placement:"bottomRight",title:"URL",trigger:"hover"},r.a.createElement(Rn.a,{style:{color:"#2abdd2"}}))),r.a.createElement(Ut.a,null,r.a.createElement(Lt.a,{onSelect:d,value:l,style:{marginRight:8,width:"150px"}},p.map((function(e){var t=e.name,n=e.endpoint;return r.a.createElement(Lt.a.Option,{value:n,key:n},t)})))))),t&&r.a.createElement("div",null,r.a.createElement(_t.a,{content:r.a.createElement(er,{autoApprove:null===n||void 0===n?void 0:n.autoApprove}),placement:"bottomRight",title:"Settings",trigger:"click"},r.a.createElement(Xt.a,{style:{marginRight:8}},r.a.createElement(Va.a,null),"Settings"))),r.a.createElement("div",null,r.a.createElement(Lt.a,{onSelect:c,value:o},oe.map((function(e){var t=e.name,n=e.url;return r.a.createElement(Lt.a.Option,{value:n,key:n},t)})))),r.a.createElement("div",null,r.a.createElement(Pa,null))))}var pr=n(285),fr="https://discord.gg/EDvudv6",br="https://t.me/ProjectSerum",vr="https://github.com/project-serum",hr="https://projectserum.com/",gr="https://projectserum.com/developer-resources",kr="https://solanabeach.io",yr=Ha.a.Footer,Er=pr.a.useBreakpoint,Or=[{description:"Serum Developer Resources",link:gr},{description:"Discord",link:fr},{description:"Telegram",link:br},{description:"GitHub",link:vr},{description:"Project Serum",link:hr},{description:"Solana Network",link:kr}],xr=function(){var e=!Er().lg;return r.a.createElement(yr,{style:{height:"45px",paddingBottom:10,paddingTop:10}},r.a.createElement(Wt.a,{align:"middle",gutter:[16,4]},!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut.a,{flex:"auto"}),Or.map((function(e,t){return r.a.createElement(Ut.a,{key:t+""},r.a.createElement(ae,{external:!0,to:e.link},e.description))}))),r.a.createElement(Ut.a,{flex:"auto"})))},wr=Ha.a.Header,jr=Ha.a.Content;function Sr(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ha.a,{style:{display:"flex",minHeight:"100vh",flexDirection:"column"}},r.a.createElement(wr,{style:{padding:0,minHeight:64,height:"unset"}},r.a.createElement(mr,null)),r.a.createElement(jr,{style:{flex:1}},t),r.a.createElement(xr,null)))}var Tr=n(592),Mr=n(81);function Cr(e,t,n){var o=Object(a.useState)(""),c=Object(s.a)(o,2),i=c[0],l=c[1],u=Q(b(i)?new m.PublicKey(i):null),d=Object(s.a)(u,2),p=d[0],f=d[1],v=Object(a.useMemo)((function(){var e="",t=!1,n=null,a=null;if(i)if(t=!0,p)if(p.owner.equals(Z.TokenInstructions.TOKEN_PROGRAM_ID)&&82===p.data.length){var r=Ve(p.data);r.initialized?(e="success",a={address:new m.PublicKey(i),decimals:r.decimals}):(e="error",n="Invalid SPL mint")}else e="error",n="Invalid SPL mint address";else b(i)&&!f?e="validating":(e="error",n="Invalid Solana address");return{validateStatus:e,hasFeedback:t,help:n,mintInfo:a}}),[i,p,f]),h=v.validateStatus,g=v.hasFeedback,k=v.help,y=v.mintInfo;return[r.a.createElement(Tr.a.Item,{label:r.a.createElement(Mr.a,{title:r.a.createElement(r.a.Fragment,null,n," You can look up token mint addresses on"," ",r.a.createElement(ae,{external:!0,to:"https://sollet.io"},"sollet.io"),".")},t),name:e,validateStatus:h,hasFeedback:g,help:k},r.a.createElement(Gn.a,{value:i,onChange:function(e){return l(e.target.value.trim())}})),y]}function Ar(){var e=Object(At.a)(["\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n"]);return Ar=function(){return e},e}var Ir=Kt.a.Text,Br=Kt.a.Title,Pr=It.c.div(Ar());function Fr(){var e,t,n=H(),o=le(),c=o.wallet,i=o.connected,d=Cr("baseMint",r.a.createElement(Ir,null,"Base Token Mint Address"," ",r.a.createElement(Ir,{type:"secondary"},"(e.g. BTC solana address:"," ",r.a.createElement(Ir,{type:"secondary",code:!0},"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E"),")")),"The base token is the token being traded. For example, the base token of a BTC/USDT market is BTC."),m=Object(s.a)(d,2),p=m[0],f=m[1],b=Cr("quoteMint",r.a.createElement(Ir,null,"Quote Token Mint Address"," ",r.a.createElement(Ir,{type:"secondary"},"(e.g. USDT solana address:"," ",r.a.createElement(Ir,{type:"secondary",code:!0},"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4"),")")),"The quote token is the token used to price trades. For example, the quote token of a BTC/USDT market is USDT."),v=Object(s.a)(b,2),h=v[0],g=v[1],k=Object(a.useState)("1"),y=Object(s.a)(k,2),E=y[0],O=y[1],x=Object(a.useState)("0.01"),w=Object(s.a)(x,2),j=w[0],S=w[1],T=Z.MARKETS.find((function(e){return!e.deprecated})).programId,M=Object(a.useState)(!1),C=Object(s.a)(M,2),A=C[0],I=C[1],B=Object(a.useState)(null),P=Object(s.a)(B,2),F=P[0],z=P[1];f&&parseFloat(E)>0&&(e=Math.round(Math.pow(10,f.decimals)*parseFloat(E)),g&&parseFloat(j)>0&&(t=Math.round(parseFloat(E)*Math.pow(10,g.decimals)*parseFloat(j))));var N=i&&!!f&&!!g&&!!e&&!!t;function K(){return(K=Object(u.a)(l.a.mark((function a(){var r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(N){a.next=2;break}return a.abrupt("return");case 2:return I(!0),a.prev=3,a.next=6,Te({connection:n,wallet:c,baseMint:f.address,quoteMint:g.address,baseLotSize:e,quoteLotSize:t,dexProgramId:T});case 6:r=a.sent,z(r),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(3),console.warn(a.t0),re({message:"Error listing new market: "+a.t0.message,type:"error"});case 14:return a.prev=14,I(!1),a.finish(14);case 17:case"end":return a.stop()}}),a,null,[[3,10,14,17]])})))).apply(this,arguments)}return r.a.createElement(Pr,null,r.a.createElement(Qt,null,r.a.createElement(Br,{level:4},"List New Market"),r.a.createElement(Tr.a,{labelCol:{span:24},wrapperCol:{span:24},layout:"vertical",onFinish:function(){return K.apply(this,arguments)}},p,h,r.a.createElement(Tr.a.Item,{label:r.a.createElement(Mr.a,{title:"Smallest allowed order size. For a BTC/USDT market, this would be in units of BTC."},"Minimum Order Size"," ",r.a.createElement(Ir,{type:"secondary"},"(Lot size in e.g. BTC)")),name:"lotSize",initialValue:"1",validateStatus:f&&g?e?"success":"error":null,hasFeedback:f&&g},r.a.createElement(Gn.a,{value:E,onChange:function(e){return O(e.target.value.trim())},type:"number",min:"0",step:"any"})),r.a.createElement(Tr.a.Item,{label:r.a.createElement(Mr.a,{title:"Smallest amount by which prices can move. For a BTC/USDT market, this would be in units of USDT."},"Tick Size"," ",r.a.createElement(Ir,{type:"secondary"},"(Price increment in e.g. USDT)")),name:"tickSize",initialValue:"0.01",validateStatus:f&&g?t?"success":"error":null,hasFeedback:f&&g},r.a.createElement(Gn.a,{value:j,onChange:function(e){return S(e.target.value.trim())},type:"number",min:"0",step:"any"})),r.a.createElement(Tr.a.Item,{label:" ",colon:!1},r.a.createElement(Xt.a,{type:"primary",htmlType:"submit",disabled:!N,loading:A},i?"Submit":"Not connected to wallet")))),F?r.a.createElement(Qt,null,r.a.createElement(Ir,null,"New market address: ",F.toBase58())):null)}var zr=n(93);function Nr(){var e=Object(At.a)(["\n  margin-top: 16px;\n  margin-bottom: 16px;\n"]);return Nr=function(){return e},e}function Kr(){var e=Object(At.a)(["\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n"]);return Kr=function(){return e},e}var qr=Kt.a.Text,Rr=Kt.a.Title,Dr=It.c.div(Kr()),Lr=It.c.div(Nr()),Wr="8qZoqDMXTfLZz6BYrDfD5Cuy65JKkaNwktb54hj1yaoK";function Ur(){var e=H(),t=le(),n=t.wallet,o=t.connected,c=Object(a.useState)(""),i=Object(s.a)(c,2),p=i[0],b=i[1],v=Object(a.useState)(Wr),h=Object(s.a)(v,2),g=h[0],k=h[1],y=Object(a.useState)("1"),E=Object(s.a)(y,2),O=E[0],x=E[1],w=Object(a.useState)([{valid:!1},{valid:!1}]),j=Object(s.a)(w,2),S=j[0],T=j[1],M=gt(),C=Object(s.a)(M,1)[0],A=Object(a.useState)(!1),I=Object(s.a)(A,2),B=I[0],P=I[1],F=Object(a.useState)(null),z=Object(s.a)(F,2),N=z[0],K=z[1],q=o&&p.trim()&&g&&parseFloat(O)>0&&S.every((function(e){return e.valid}))&&C;function R(){return(R=Object(u.a)(l.a.mark((function t(){var a,r,o,c,i,u,b,v,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(q){t.next=2;break}return t.abrupt("return");case 2:return P(!0),t.prev=3,a=S,t.next=7,zr.PoolTransactions.initializeSimplePool({connection:e,programId:new m.PublicKey(g),poolName:p,poolStateSpace:1024,poolMintDecimals:6,initialPoolMintSupply:new f.a(Math.round(Math.pow(10,6)*parseFloat(O))),assetMints:a.map((function(e){return e.mint})),initialAssetQuantities:a.map((function(e){return new f.a(e.quantity)})),creator:n.publicKey,creatorAssets:a.map((function(e){var t=null===C||void 0===C?void 0:C.find((function(t){return t.effectiveMint.equals(e.mint)}));if(!t)throw new Error("No token account for "+e.mint.toBase58());return t.pubkey}))});case 7:return r=t.sent,o=Object(s.a)(r,2),c=o[0],i=o[1],t.next=13,Promise.all(i.map((function(t){var a=t.transaction,r=t.signers;return Be({transaction:a,wallet:n,signers:r,connection:e})})));case 13:u=t.sent,b=Object(d.a)(u),t.prev=15,b.s();case 17:if((v=b.n()).done){t.next=23;break}return h=v.value,t.next=21,Fe({signedTransaction:h,connection:e});case 21:t.next=17;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(15),b.e(t.t0);case 28:return t.prev=28,b.f(),t.finish(28);case 31:K(c),t.next=38;break;case 34:t.prev=34,t.t1=t.catch(3),console.warn(t.t1),re({message:"Error creating new pool: "+t.t1.message,type:"error"});case 38:return t.prev=38,P(!1),t.finish(38);case 41:case"end":return t.stop()}}),t,null,[[3,34,38,41],[15,25,28,31]])})))).apply(this,arguments)}return r.a.createElement(Dr,null,r.a.createElement(Qt,null,r.a.createElement(Rr,{level:4},"Create new pool"),r.a.createElement(Tr.a,{layout:"vertical",onFinish:function(){return R.apply(this,arguments)}},r.a.createElement(Tr.a.Item,{label:r.a.createElement(Mr.a,{title:"Public name of the pool."},"Pool Name"),name:"name"},r.a.createElement(Gn.a,{value:p,onChange:function(e){return b(e.target.value)}})),r.a.createElement(Tr.a.Item,{label:r.a.createElement(Mr.a,{title:"Address of the pool program."},"Program ID"," ",r.a.createElement(qr,{type:"secondary"},"(e.g. ",Wr,")")),name:"programId",initialValue:Wr},r.a.createElement(Gn.a,{value:g,onChange:function(e){return k(e.target.value)}})),r.a.createElement(Tr.a.Item,{label:r.a.createElement(Mr.a,{title:"Initial number of pool tokens to mint to your account."},"Initial Pool Token Supply"),name:"initialSupply",initialValue:"1"},r.a.createElement(Gn.a,{value:O,onChange:function(e){return x(e.target.value.trim())},type:"number",min:"0",step:"any"})),r.a.createElement(Lr,null,r.a.createElement(Xt.a,{onClick:function(){return T((function(e){return e.concat({valid:!1})}))}},"Add token")," ",r.a.createElement(Xt.a,{onClick:function(){return T((function(e){return e.slice(0,e.length-1)}))},disabled:S.length<=1},"Remove token")),S.map((function(e,t){return r.a.createElement(_r,{setInitialAssets:T,index:t,key:t})})),r.a.createElement(Tr.a.Item,{label:" ",colon:!1},r.a.createElement(Xt.a,{type:"primary",htmlType:"submit",disabled:!q,loading:B},o?"Submit":"Not connected to wallet")))),N?r.a.createElement(Qt,null,r.a.createElement(qr,null,"New pool address:"," ",r.a.createElement(ae,{to:"/pools/".concat(N.toBase58())},N.toBase58()))):null)}function _r(e){var t=e.setInitialAssets,n=e.index,o=Cr("mint".concat(n),r.a.createElement(qr,null,"Token ",n+1," Mint Address"),r.a.createElement(r.a.Fragment,null,"Token mint address for token ",n+1,".")),c=Object(s.a)(o,2),i=c[0],l=c[1],u=Object(a.useState)(""),d=Object(s.a)(u,2),m=d[0],p=d[1];return Object(a.useEffect)((function(){var e;if(l&&parseFloat(m)>=0){var a=Math.round(Math.pow(10,l.decimals)*parseFloat(m));e={mint:l.address,quantity:a,valid:!0}}else e={valid:!1};t((function(t){return t.map((function(t,a){return a===n?e:t}))}))}),[t,n,l,m]),r.a.createElement(r.a.Fragment,null,i,r.a.createElement(Tr.a.Item,{label:r.a.createElement(Mr.a,{title:r.a.createElement(r.a.Fragment,null,"Initial quantity of token ",n+1," to deposit into the pool.")},"Token ",n+1," Initial Quantity"),name:"quantity".concat(n),validateStatus:"success"},r.a.createElement(Gn.a,{value:m,onChange:function(e){return p(e.target.value.trim())},type:"number",min:"0",step:"any"})))}var Xr=n(595);function Hr(e){var t=e.poolInfo,n=e.basket;return r.a.createElement("ul",null,t.state.assets.map((function(e,t){return r.a.createElement(Vr,{key:t,mint:e.mint,quantity:n.quantities[t]})})))}function Vr(e){var t=e.mint,n=e.quantity,a=Q(t),o=Object(s.a)(a,1)[0],c=r.a.createElement(Ft.a,{size:"small"});if(o){var i=Ve(o.data);c=r.a.createElement(r.a.Fragment,null,n.toNumber()/Math.pow(10,i.decimals))}return r.a.createElement("li",null,c," ",t.toBase58())}var Gr=Kt.a.Text,Qr=Kt.a.Paragraph;function Yr(e){var t=e.poolInfo,n=e.mintInfo,a=H(),o=R((function(){return Object(zr.getPoolBasket)(a,t,{redeem:n.supply})}),Object(L.a)(zr.getPoolBasket,a,t.address.toBase58(),"total",n.supply.toString())),c=Object(s.a)(o,1)[0];return r.a.createElement(Qt,{stretchVertical:!0},r.a.createElement(Qr,null,"Name: ",t.state.name),r.a.createElement(Qr,null,"Address: ",r.a.createElement(Gr,{copyable:!0},t.address.toBase58())),r.a.createElement(Qr,null,"Pool token mint address:"," ",r.a.createElement(Gr,{copyable:!0},t.state.poolTokenMint.toBase58())),r.a.createElement(Qr,null,"Total supply: ",n.supply.toNumber()/Math.pow(10,n.decimals)),r.a.createElement(Gr,null,"Total assets:"),r.a.createElement("div",null,c?r.a.createElement(Hr,{poolInfo:t,basket:c}):r.a.createElement(Ft.a,null)))}var Jr=Kt.a.Text,Zr=xn.a.TabPane;function $r(e){var t=e.poolInfo,n=e.mintInfo;return r.a.createElement(Qt,{stretchVertical:!0},r.a.createElement(xn.a,null,r.a.createElement(Zr,{tab:"Create",key:"create"},r.a.createElement(eo,{poolInfo:t,mintInfo:n,tab:"create"})),r.a.createElement(Zr,{tab:"Redeem",key:"redeem"},r.a.createElement(eo,{poolInfo:t,mintInfo:n,tab:"redeem"}))))}function eo(e){var t=e.poolInfo,n=e.mintInfo,o=e.tab,c=H(),i=le(),d=i.wallet,m=i.connected,p=Object(a.useState)(""),b=Object(s.a)(p,2),v=b[0],h=b[1],g=gt(),k=Object(s.a)(g,1)[0],y=Object(a.useState)(!1),E=Object(s.a)(y,2),O=E[0],x=E[1],w=Object(a.useMemo)((function(){var e=Math.round(parseFloat(v)*Math.pow(10,n.decimals));return e>0?"create"===o?{create:new f.a(e)}:{redeem:new f.a(e)}:null}),[n.decimals,v,o]),j=R(Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=6;break}return e.next=3,Object(zr.getPoolBasket)(c,t,w);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=null;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)}))),Object(L.a)(zr.getPoolBasket,c,t.address.toBase58(),w)),S=Object(s.a)(j,2),T=S[0],M=S[1];function C(e){var t=null===k||void 0===k?void 0:k.find((function(t){return t.effectiveMint.equals(e)}));if(t)return t.pubkey;throw new Error("No token account for "+e.toBase58())}var A=m&&w&&T;function I(){return(I=Object(u.a)(l.a.mark((function e(n){var a,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),w&&T&&m&&A){e.next=3;break}return e.abrupt("return");case 3:return x(!0),e.prev=4,a=zr.PoolTransactions.execute(t,w,{owner:d.publicKey,poolTokenAccount:C(t.state.poolTokenMint),assetAccounts:t.state.assets.map((function(e){return C(e.mint)}))},T),r=a.transaction,i=a.signers,e.next=8,Ae({connection:c,wallet:d,transaction:r,signers:i});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.warn(e.t0),re({message:"Error "+("create"===o?"creating":"redeeming")+" pool tokens: "+e.t0.message,type:"error"});case 14:return e.prev=14,x(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,10,14,17]])})))).apply(this,arguments)}return r.a.createElement("form",{onSubmit:function(e){return I.apply(this,arguments)}},r.a.createElement(Gn.a,{addonBefore:r.a.createElement(r.a.Fragment,null,"Quantity"),value:v,onChange:function(e){return h(e.target.value.trim())},style:{marginBottom:24}}),r.a.createElement("div",null,T?r.a.createElement(r.a.Fragment,null,r.a.createElement(Jr,null,"create"===o?"Cost":"Proceeds",": "),r.a.createElement(Jr,{type:"secondary"},"(indicative only)"),r.a.createElement(Hr,{poolInfo:t,basket:T})):M?null:r.a.createElement(Ft.a,null)),r.a.createElement(Xt.a,{htmlType:"submit",type:"primary",disabled:!A||O},m?"Submit":"Wallet not connected"))}var to=xn.a.TabPane;function no(e){var t=e.poolInfo;return r.a.createElement(Qt,null,r.a.createElement(xn.a,null,r.a.createElement(to,{tab:"Wallet Balances",key:"wallet"},r.a.createElement(ao,{poolInfo:t})),r.a.createElement(to,{tab:"Pool Balances",key:"pool"},r.a.createElement(ro,{poolInfo:t}))))}function ao(e){var t=e.poolInfo,n=gt(),a=Object(s.a)(n,1)[0];return r.a.createElement("ul",null,[t.state.poolTokenMint].concat(Object(C.a)(t.state.assets.map((function(e){return e.mint})))).map((function(e,t){var n=null===a||void 0===a?void 0:a.find((function(t){return t.effectiveMint.equals(e)}));return n?r.a.createElement(oo,{key:t,mint:e,publicKey:n.pubkey}):null})))}function ro(e){var t=e.poolInfo;return r.a.createElement("ul",null,t.state.assets.map((function(e,t){return r.a.createElement(oo,{key:t,mint:e.mint,publicKey:e.vaultAddress})})))}function oo(e){var t=e.mint,n=e.publicKey,a=Q(t),o=Object(s.a)(a,1)[0],c=Q(n),i=Object(s.a)(c,1)[0],l=r.a.createElement(Ft.a,{size:"small"});if(o&&i){var u=Ve(o.data),d=He(i.data);l=r.a.createElement(r.a.Fragment,null,d.amount/Math.pow(10,u.decimals))}return r.a.createElement("li",null,l," ",t.toBase58()," ",n.toBase58())}var co=Kt.a.Text;function io(){var e=Object(Dt.h)().poolAddress,t=Q(function(e){try{return new m.PublicKey(e),!0}catch(t){return!1}}(e)?new m.PublicKey(e):null),n=Object(s.a)(t,2),o=n[0],c=n[1],i=Object(Dt.f)(),l=Object(a.useMemo)((function(){if(!o)return null;try{return{address:new m.PublicKey(e),state:Object(zr.decodePoolState)(o.data),program:o.owner}}catch(t){return null}}),[e,o]),u=Q(null===l||void 0===l?void 0:l.state.poolTokenMint),d=Object(s.a)(u,2),p=d[0],f=d[1],b=Object(a.useMemo)((function(){return p?Ve(p.data):null}),[p]);return l&&b?r.a.createElement(r.a.Fragment,null,r.a.createElement(Xr.a,{title:r.a.createElement(r.a.Fragment,null,"Pool ",l.address.toBase58()),onBack:function(){return i.push("/pools")},subTitle:l.state.name}),r.a.createElement(Wt.a,null,r.a.createElement(Ut.a,{xs:24,lg:12},r.a.createElement(Yr,{poolInfo:l,mintInfo:b})),r.a.createElement(Ut.a,{xs:24,lg:12},r.a.createElement($r,{poolInfo:l,mintInfo:b})),r.a.createElement(Ut.a,{xs:24},r.a.createElement(no,{poolInfo:l})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Xr.a,{title:r.a.createElement(r.a.Fragment,null,"Pool ",e),onBack:function(){return i.push("/pools")}}),r.a.createElement(Qt,null,c&&f?r.a.createElement(co,null,"Invalid pool"):r.a.createElement(Ft.a,null)))}function lo(){var e=Object(At.a)(["\n  display: flex;\n  margin-top: 16px;\n  margin-bottom: 48px;\n"]);return lo=function(){return e},e}function uo(){var e=Object(At.a)(["\n  max-width: 700px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n"]);return uo=function(){return e},e}var so=Kt.a.Title,mo=It.c.div(uo()),po=It.c.form(lo());function fo(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(Dt.f)();return r.a.createElement(mo,null,r.a.createElement(Qt,null,r.a.createElement(so,{level:3},"Pools"),r.a.createElement(po,{onSubmit:function(e){e.preventDefault(),c.push("/pools/".concat(n))}},r.a.createElement(Gn.a,{value:n,onChange:function(e){return o(e.target.value.trim())},placeholder:"Pool address"}),r.a.createElement(Xt.a,{type:"primary",htmlType:"submit"},"Go")),r.a.createElement(ae,{to:"/pools/new"},"Create new pool")))}function bo(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a,{basename:"/"},r.a.createElement(Sr,null,r.a.createElement(Dt.c,null,r.a.createElement(Dt.a,{exact:!0,path:"/",component:Oa}),r.a.createElement(Dt.a,{exact:!0,path:"/orders",component:Ma}),r.a.createElement(Dt.a,{exact:!0,path:"/balances",component:Ia}),r.a.createElement(Dt.a,{exact:!0,path:"/convert",component:Xa}),r.a.createElement(Dt.a,{exact:!0,path:"/list-new-market",component:Fr}),r.a.createElement(Dt.a,{exact:!0,path:"/pools"},r.a.createElement(fo,null)),r.a.createElement(Dt.a,{exact:!0,path:"/pools/new"},r.a.createElement(Ur,null)),r.a.createElement(Dt.a,{exact:!0,path:"/pools/:poolAddress"},r.a.createElement(io,null))))))}function vo(){return r.a.createElement(a.Suspense,{fallback:function(){return r.a.createElement(Ft.a,{size:"large"})}},r.a.createElement(Pt,null),r.a.createElement(Rt,null,r.a.createElement(X,null,r.a.createElement(ut,null,r.a.createElement(ie,null,r.a.createElement(Za,null,r.a.createElement(a.Suspense,{fallback:function(){return r.a.createElement(Ft.a,{size:"large"})}},r.a.createElement(bo,null))))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(vo,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[332,1,2]]]);
//# sourceMappingURL=main.92bc842a.chunk.js.map