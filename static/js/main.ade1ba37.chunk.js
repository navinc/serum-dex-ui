(this["webpackJsonpserum-dex-ui"]=this["webpackJsonpserum-dex-ui"]||[]).push([[0],{14:function(e,t,n){"use strict";n.d(t,"l",(function(){return j})),n.d(t,"d",(function(){return x})),n.d(t,"z",(function(){return w})),n.d(t,"a",(function(){return A})),n.d(t,"v",(function(){return I})),n.d(t,"k",(function(){return z})),n.d(t,"j",(function(){return P})),n.d(t,"p",(function(){return F})),n.d(t,"s",(function(){return q})),n.d(t,"w",(function(){return R})),n.d(t,"c",(function(){return L})),n.d(t,"t",(function(){return D})),n.d(t,"q",(function(){return U})),n.d(t,"u",(function(){return _})),n.d(t,"r",(function(){return W})),n.d(t,"n",(function(){return H})),n.d(t,"x",(function(){return Q})),n.d(t,"g",(function(){return G})),n.d(t,"h",(function(){return J})),n.d(t,"o",(function(){return X})),n.d(t,"e",(function(){return V})),n.d(t,"A",(function(){return Y})),n.d(t,"m",(function(){return Z})),n.d(t,"y",(function(){return $})),n.d(t,"i",(function(){return ee})),n.d(t,"f",(function(){return te})),n.d(t,"b",(function(){return ne}));var r=n(64),a=n(10),c=n.n(a),o=n(86),i=n(23),u=n(9),l=n(39),s=n(31),d=n(21),m=n(0),f=n.n(m),p=n(29),b=n(68),v=n(37),g=n(50),k=n(80),h=n(27),y=n(66),O=n(169),E=s.MARKETS;function j(){return E.filter((function(e){return!e.deprecated}))}function x(e){var t=Object(v.e)(),n=Object(m.useState)([]),r=Object(u.a)(n,2),a=r[0],l=r[1];return Object(m.useEffect)((function(){(function(){var n=Object(i.a)(c.a.mark((function n(){var r,a,i,u,d;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=[],a=Object(o.a)(ne(e)),n.prev=2,a.s();case 4:if((i=a.n()).done){n.next=18;break}return u=i.value,n.prev=6,n.next=9,s.Market.load(t,u.address,{},u.programId);case 9:d=n.sent,r.push({market:d,marketName:u.name,programId:u.programId}),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(6),Object(h.a)({message:"Error loading all market",description:n.t0.message,type:"error"});case 16:n.next=4;break;case 18:n.next=23;break;case 20:n.prev=20,n.t1=n.catch(2),a.e(n.t1);case 23:return n.prev=23,a.f(),n.finish(23);case 26:l(r);case 27:case"end":return n.stop()}}),n,null,[[2,20,23,26],[6,13]])})));return function(){return n.apply(this,arguments)}})()()}),[t,e]),a}function w(){var e,t=Object(v.e)(),n=Object(g.c)().wallet;function r(){return(r=Object(i.a)(c.a.mark((function e(){var r,a,i,u,l,m,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t&&n.publicKey){e.next=2;break}return e.abrupt("return",[]);case 2:console.log("refreshing useUnmigratedOpenOrdersAccounts"),r=[],a=Array.from(new Set(E.filter((function(e){return e.deprecated})).map((function(e){return e.programId.toBase58()})))).map((function(e){return new d.PublicKey(e)})),u=Object(o.a)(a),e.prev=6,u.s();case 8:if((l=u.n()).done){e.next=22;break}return i=l.value,e.prev=10,e.next=13,s.OpenOrders.findForOwner(t,n.publicKey,i);case 13:m=e.sent,r=r.concat(m.filter((function(e){return e.baseTokenTotal.toNumber()||e.quoteTokenTotal.toNumber()})).filter((function(e){return E.some((function(t){return t.deprecated&&t.address.equals(e.market)}))}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),console.log("Error loading deprecated markets",null===(f=i)||void 0===f?void 0:f.toBase58(),e.t0.message);case 20:e.next=8;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(6),u.e(e.t1);case 27:return e.prev=27,u.f(),e.finish(27);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[6,24,27,30],[10,17]])})))).apply(this,arguments)}var a=Object(k.a)("getUnmigratedOpenOrdersAccounts",t,null===n||void 0===n||null===(e=n.publicKey)||void 0===e?void 0:e.toBase58()),l=Object(b.c)((function(){return r.apply(this,arguments)}),a,{refreshInterval:T});return{accounts:Object(u.a)(l,1)[0],refresh:function(e){return Object(b.a)(a,e)}}}var S=f.a.createContext(null),T=5e6,M=E.find((function(e){var t=e.name,n=e.deprecated;return"SRM/USDT"===t&&!n}));function C(e,t){var n,r;if(!e)return{};var a=ne(t).find((function(t){return t.address.equals(e.address)})),c=(null===e||void 0===e?void 0:e.baseMintAddress)&&(null===(n=s.TOKEN_MINTS.find((function(t){return t.address.equals(e.baseMintAddress)})))||void 0===n?void 0:n.name)||(null===a||void 0===a?void 0:a.baseLabel)&&"".concat(null===a||void 0===a?void 0:a.baseLabel,"*")||"UNKNOWN",o=(null===e||void 0===e?void 0:e.quoteMintAddress)&&(null===(r=s.TOKEN_MINTS.find((function(t){return t.address.equals(e.quoteMintAddress)})))||void 0===r?void 0:r.name)||(null===a||void 0===a?void 0:a.quoteLabel)&&"".concat(null===a||void 0===a?void 0:a.quoteLabel,"*")||"UNKNOWN";return Object(l.a)(Object(l.a)({},a),{},{marketName:null===a||void 0===a?void 0:a.name,baseCurrency:c,quoteCurrency:o,marketInfo:a})}function A(e){var t=e.children,n=Object(p.i)("marketAddress",null===M||void 0===M?void 0:M.address.toBase58()),r=Object(u.a)(n,2),a=r[0],c=r[1],o=Object(p.i)("customMarkets",[]),i=Object(u.a)(o,2),b=i[0],g=i[1],k=a&&new d.PublicKey(a),y=Object(v.e)(),O=ne(b),E=k&&O.find((function(e){return e.address.equals(k)}));Object(m.useEffect)((function(){E&&E.deprecated&&(console.log("Switching markets from deprecated",E),M&&c(M.address.toBase58()))}),[]);var j=Object(m.useState)(),x=Object(u.a)(j,2),w=x[0],T=x[1];return Object(m.useEffect)((function(){var e;w&&E&&(null===(e=w._decoded.ownAddress)||void 0===e?void 0:e.equals(null===E||void 0===E?void 0:E.address))||(T(null),E&&E.address?s.Market.load(y,E.address,{},E.programId).then(T).catch((function(e){return Object(h.a)({message:"Error loading market",description:e.message,type:"error"})})):Object(h.a)({message:"Error loading market",description:"Please select a market from the dropdown",type:"error"}))}),[y,E]),f.a.createElement(S.Provider,{value:Object(l.a)(Object(l.a)({market:w},C(w,b)),{},{setMarketAddress:c,customMarkets:b,setCustomMarkets:g})},t)}function I(){var e=Object(p.i)("selectedTokenAccounts",{}),t=Object(u.a)(e,2);return[t[0],t[1]]}function z(){var e=Object(m.useContext)(S);if(!e)throw new Error("Missing market context");return e}function P(){var e=Object(m.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],a=F(),c=Object(u.a)(a,1)[0],o=Q();return Object(m.useEffect)((function(){var e,t,n=(null===c||void 0===c||null===(e=c.bids)||void 0===e?void 0:e.length)>0&&Number(c.bids[0][0]),a=(null===c||void 0===c||null===(t=c.asks)||void 0===t?void 0:t.length)>0&&Number(c.asks[0][0]),i=o&&o.length>0&&o[0].price,u=n&&a?i?[n,a,i].sort((function(e,t){return e-t}))[1]:(n+a)/2:null;r(u)}),[c,o]),n}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=z(),n=t.market,r=Object(v.e)();function a(){return o.apply(this,arguments)}function o(){return(o=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&r){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.loadFills(r,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var l=Object(b.c)(a,Object(k.a)("getUnfilteredTrades",n,r),{refreshInterval:5e3}),s=Object(u.a)(l,1),d=s[0];return d}function N(){var e=z().market,t=Object(v.c)(e&&e._decoded.bids),n=Object(v.c)(e&&e._decoded.asks);return{bidOrderbook:e&&t?s.Orderbook.decode(e,t):null,askOrderbook:e&&n?s.Orderbook.decode(e,n):null}}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=N(),n=t.bidOrderbook,r=t.askOrderbook,a=z(),c=a.market,o=n&&c?n.getL2(e).map((function(e){var t=Object(u.a)(e,2);return[t[0],t[1]]})):[],i=r&&c?r.getL2(e).map((function(e){var t=Object(u.a)(e,2);return[t[0],t[1]]})):[];return[{bids:o,asks:i},!!o||!!i]}function K(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=z(),n=t.market,r=Object(g.c)(),a=r.connected,o=r.wallet,u=Object(v.e)();function l(){return s.apply(this,arguments)}function s(){return(s=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",null);case 2:if(n){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,n.findOpenOrdersAccountsForOwner(u,o.publicKey);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.c)(l,Object(k.a)("getOpenOrdersAccounts",o,n,a),{refreshInterval:e?1e3:5e3})}function q(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=K(e),n=Object(u.a)(t,1),r=n[0];return r?r[0]:null}function R(){var e=Object(g.c)(),t=e.connected,n=e.wallet,r=Object(v.e)();function a(){return(a=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(O.a)(r,n.publicKey);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.c)((function(){return a.apply(this,arguments)}),Object(k.a)("getTokenAccounts",n,t),{refreshInterval:5e3})}function L(e,t,n){if(!e||!t)return null;var r=e.filter((function(e){var r=e.effectiveMint,a=e.pubkey;return t.equals(r)&&(!n||("string"===typeof n?n:n.toBase58())===a.toBase58())}));return r&&r[0]}function D(){var e=R(),t=Object(u.a)(e,1)[0],n=z().market,r=I(),a=Object(u.a)(r,1)[0],c=null===n||void 0===n?void 0:n.quoteMintAddress;return L(t,c,c&&a[c.toBase58()])}function U(){var e=R(),t=Object(u.a)(e,1)[0],n=z().market,r=I(),a=Object(u.a)(r,1)[0],c=null===n||void 0===n?void 0:n.baseMintAddress;return L(t,c,c&&a[c.toBase58()])}function _(){var e,t=D(),n=z().market,r=Object(v.d)(null===t||void 0===t?void 0:t.pubkey),a=Object(u.a)(r,2),c=a[0],o=a[1];return n&&t&&o&&c?n.quoteMintAddress.equals(s.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===c||void 0===c?void 0:c.lamports)/1e9)&&void 0!==e?e:0:n.quoteSplSizeToNumber(new y.BN(c.data.slice(64,72),10,"le")):null}function W(){var e,t=U(),n=z().market,r=Object(v.d)(null===t||void 0===t?void 0:t.pubkey),a=Object(u.a)(r,2),c=a[0],o=a[1];return n&&t&&o&&c?n.baseMintAddress.equals(s.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===c||void 0===c?void 0:c.lamports)/1e9)&&void 0!==e?e:0:n.baseSplSizeToNumber(new y.BN(c.data.slice(64,72),10,"le")):null}function H(){var e=z(),t=e.market,n=e.marketName,r=q(),a=N(),c=a.bidOrderbook,o=a.askOrderbook;return t&&r&&c&&o?t.filterForOpenOrders(c,o,[r]).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{marketName:n,market:t})})):null}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=B(e);return t?t.filter((function(e){return e.eventFlags.maker})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{side:"buy"===e.side?"sell":"buy"})})):null}function G(){var e=z().market,t=Object(g.c)(),n=t.connected,r=t.wallet,a=Object(v.e)();function o(){return(o=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:if(e){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,e.findFeeDiscountKeys(a,r.publicKey);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(b.c)((function(){return o.apply(this,arguments)}),Object(k.a)("getFeeDiscountKeys",r,e,n),{refreshInterval:5e3})}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=z(),n=t.marketName,r=B(e),a=K(),c=Object(u.a)(a,1),o=c[0];return o&&0!==o.length&&r?r.filter((function(e){return o.some((function(t){return e.openOrders.equals(t.publicKey)}))})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{marketName:n})})):null}function X(){var e=Object(g.c)(),t=e.connected,n=e.wallet,a=Object(v.e)(),s=x([]);function d(){return(d=Object(i.a)(c.a.mark((function e(){var i,d,m,f,p,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],t){e.next=3;break}return e.abrupt("return",i);case 3:m=Object(o.a)(s),e.prev=4,p=c.a.mark((function e(){var t,o,s,m,p,b,v,g,k,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=f.value,o=(t=d).market,s=t.marketName,o){e.next=4;break}return e.abrupt("return",{v:i});case 4:return e.next=6,o.findOpenOrdersAccountsForOwner(a,n.publicKey);case 6:if(m=e.sent,p=m&&m[0]){e.next=10;break}return e.abrupt("return",{v:i});case 10:return e.next=12,Promise.all([o.loadBids(a),o.loadAsks(a)]);case 12:b=e.sent,v=Object(u.a)(b,2),g=v[0],k=v[1],h=[].concat(Object(r.a)(g),Object(r.a)(k)).filter((function(e){return e.openOrdersAddress.equals(p.publicKey)})).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{marketName:s})})),i=i.concat(h);case 18:case"end":return e.stop()}}),e)})),m.s();case 7:if((f=m.n()).done){e.next=14;break}return e.delegateYield(p(),"t0",9);case 9:if("object"!==typeof(b=e.t0)){e.next=12;break}return e.abrupt("return",b.v);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(4),m.e(e.t1);case 19:return e.prev=19,m.f(),e.finish(19);case 22:return e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,null,[[4,16,19,22]])})))).apply(this,arguments)}return Object(b.c)((function(){return d.apply(this,arguments)}),Object(k.a)("getOpenOrdersForAllMarkets",t,a,n,s),{refreshInterval:5e3})}function V(){var e=W(),t=_(),n=q(!0),r=z(),a=r.baseCurrency,c=r.quoteCurrency,o=r.market,i=n&&n.baseTokenTotal&&n.baseTokenFree,u=n&&n.quoteTokenTotal&&n.quoteTokenFree;return"UNKNOWN"!==a&&"UNKNOWN"!==c&&a&&c?[{market:o,key:"".concat(a).concat(c).concat(a),coin:a,wallet:e,orders:i&&o&&n?o.baseSplSizeToNumber(n.baseTokenTotal.sub(n.baseTokenFree)):null,openOrders:n,unsettled:i&&o&&n?o.baseSplSizeToNumber(n.baseTokenFree):null},{market:o,key:"".concat(c).concat(a).concat(c),coin:c,wallet:t,openOrders:n,orders:u&&o&&n?o.quoteSplSizeToNumber(n.quoteTokenTotal.sub(n.quoteTokenFree)):null,unsettled:u&&o&&n?o.quoteSplSizeToNumber(n.quoteTokenFree):null}]:[]}function Y(){return[[],!0]}function Z(){return[[],!0]}function $(){var e=Object(v.e)(),t=w().accounts,n=t&&Array.from(new Set(t.map((function(e){return e.market})))),r=n&&n.map((function(e){return e.toBase58()})),a=function(){var t=Object(i.a)(c.a.mark((function t(){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:return r=function(){var t=Object(i.a)(c.a.mark((function t(n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=E.find((function(e){return e.address.equals(n)}))){t.next=5;break}return console.log("Failed loading market"),Object(h.a)({message:"Error loading market",type:"error"}),t.abrupt("return",null);case 5:return t.prev=5,console.log("Loading market",r.name),t.next=9,s.Market.load(e,r.address,{},r.programId);case 9:return t.abrupt("return",t.sent);case 12:return t.prev=12,t.t0=t.catch(5),console.log("Failed loading market",r.name,t.t0),Object(h.a)({message:"Error loading market",description:t.t0.message,type:"error"}),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),t.next=5,Promise.all(n.map(r));case 5:return t.abrupt("return",t.sent.filter((function(e){return e})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o=Object(b.c)(a,Object(k.a)("useUnmigratedDeprecatedMarketsInner",e,r&&r.toString()),{refreshInterval:T}),l=Object(u.a)(o,1)[0];return l?l.map((function(e){return{market:e,openOrdersList:null===t||void 0===t?void 0:t.filter((function(t){return e&&t.market.equals(e.address)}))}})):null}function ee(){var e=Object(g.c)(),t=e.connected,n=e.wallet,r=Object(p.i)("customMarkets",[]),a=Object(u.a)(r,1)[0],o=Object(v.e)(),s=$(),d=s&&s.map((function(e){return e.market})),m=d&&d.filter((function(e){return!!e})).map((function(e){return e.address.toBase58()}));function f(){return(f=Object(i.a)(c.a.mark((function e(){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(d){e.next=4;break}return e.abrupt("return",null);case 4:return console.log("refreshing getOpenOrdersForDeprecatedMarkets"),r=function(){var e=Object(i.a)(c.a.mark((function e(t){var r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return r=C(t,a),i=r.marketName,e.prev=3,console.log("Fetching open orders for",i),e.next=7,t.loadOrdersForOwner(o,n.publicKey);case 7:return e.abrupt("return",e.sent.map((function(e){return Object(l.a)({marketName:i,market:t},e)})));case 10:return e.prev=10,e.t0=e.catch(3),console.log("Failed loading open orders",t.address.toBase58(),e.t0),Object(h.a)({message:"Error loading open orders for deprecated ".concat(i),description:e.t0.message,type:"error"}),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(d.map(r));case 8:return e.abrupt("return",e.sent.filter((function(e){return!!e})).flat());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=Object(k.a)("getOpenOrdersForDeprecatedMarkets",t,o,n,m&&m.toString()),O=Object(b.c)((function(){return f.apply(this,arguments)}),y,{refreshInterval:T}),E=Object(u.a)(O,2),j=E[0],x=E[1];return console.log("openOrders",j),{openOrders:j,loaded:x,refreshOpenOrders:function(){return Object(b.a)(y)}}}function te(){var e=$(),t=Object(p.i)("customMarkets",[]),n=Object(u.a)(t,1)[0];if(!e)return null;var r=[];return e.forEach((function(e){var t=e.market,a=e.openOrdersList,c=C(t,n),o=c.baseCurrency,i=c.quoteCurrency,u=c.marketName;o&&i&&t&&(a||[]).forEach((function(e){var n=(null===e||void 0===e?void 0:e.baseTokenTotal)&&(null===e||void 0===e?void 0:e.baseTokenFree)&&t.baseSplSizeToNumber(e.baseTokenTotal.sub(e.baseTokenFree)),a=(null===e||void 0===e?void 0:e.quoteTokenTotal)&&(null===e||void 0===e?void 0:e.quoteTokenFree)&&t.baseSplSizeToNumber(e.quoteTokenTotal.sub(e.quoteTokenFree)),c=(null===e||void 0===e?void 0:e.baseTokenFree)&&t.baseSplSizeToNumber(e.baseTokenFree),l=(null===e||void 0===e?void 0:e.quoteTokenFree)&&t.baseSplSizeToNumber(e.quoteTokenFree);r.push({marketName:u,market:t,coin:o,key:"".concat(u).concat(o),orders:n,unsettled:c,openOrders:e}),r.push({marketName:u,market:t,coin:i,key:"".concat(u).concat(i),orders:a,unsettled:l,openOrders:e})}))})),r}function ne(e){var t=e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{address:new d.PublicKey(e.address),programId:new d.PublicKey(e.programId),deprecated:!1})}));return[].concat(Object(r.a)(t),Object(r.a)(E))}},169:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return y}));var r=n(9),a=n(10),c=n.n(a),o=n(23),i=n(7),u=n(59),l=n.n(u),s=n(21),d=n(120),m=i.struct([i.blob(32,"mint"),i.blob(32,"owner"),i.nu64("amount"),i.blob(93)]),f=i.struct([i.blob(44),i.u8("decimals"),i.u8("initialized"),i.blob(36)]);function p(e){var t=m.decode(e),n=t.mint,r=t.owner,a=t.amount;return{mint:new s.PublicKey(n),owner:new s.PublicKey(r),amount:a}}function b(e){var t=f.decode(e);return{decimals:t.decimals,initialized:t.initialized}}function v(e){return[{memcmp:{offset:m.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:m.span}]}var g=new s.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function k(e,t){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v(n),e.next=3,t._rpcRequest("getProgramAccounts",[g.toBase58(),{commitment:t.commitment,filters:r}]);case 3:if(!(a=e.sent).error){e.next=6;break}throw new Error("failed to get token accounts owned by "+n.toBase58()+": "+a.error.message);case 6:return e.abrupt("return",a.result.map((function(e){var t=e.pubkey,n=e.account,r=n.data,a=n.executable,c=n.owner,o=n.lamports;return{publicKey:new s.PublicKey(t),accountInfo:{data:l.a.decode(r),executable:a,owner:new s.PublicKey(c),lamports:o}}})).filter((function(e){var t=e.accountInfo;return r.every((function(e){if(e.dataSize)return t.data.length===e.dataSize;if(e.memcmp){var n=l.a.decode(e.memcmp.bytes);return t.data.slice(e.memcmp.offset,e.memcmp.offset+n.length).equals(n)}return!1}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(c.a.mark((function e(t,n){var a,o,i,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([k(t,n),t.getAccountInfo(n)]);case 2:return a=e.sent,o=Object(r.a)(a,2),i=o[0],u=o[1],l=i.map((function(e){var t=e.publicKey,n=e.accountInfo;return{pubkey:t,account:n,effectiveMint:p(n.data).mint}})),e.abrupt("return",l.concat({pubkey:n,account:u,effectiveMint:d.WRAPPED_SOL_MINT}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},268:function(e,t,n){e.exports=n.p+"static/media/logo.49174c73.svg"},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0),a=n.n(r),c=n(208),o=n(91);function i(e){var t=e.message,n=e.description,r=e.txid,i=e.type,u=void 0===i?"info":i,l=e.placement,s=void 0===l?"bottomLeft":l;r&&(n=a.a.createElement(o.a,{external:!0,to:"https://explorer.solana.com/tx/"+r,style:{color:"#0000ff"}},"View transaction ",r.slice(0,8),"...",r.slice(r.length-8))),c.a[u]({message:a.a.createElement("span",{style:{color:"black"}},t),description:a.a.createElement("span",{style:{color:"black",opacity:.5}},n),placement:s,style:{backgroundColor:"white"}})}},274:function(e,t,n){e.exports=n(462)},279:function(e,t,n){},280:function(e,t,n){},284:function(e,t){},285:function(e,t){},29:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"g",(function(){return b})),n.d(t,"c",(function(){return v})),n.d(t,"i",(function(){return h})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return O}));var r=n(10),a=n.n(r),c=n(86),o=n(9),i=n(23),u=n(0),l=n(21);function s(e){if(!e)return!1;try{return new l.PublicKey(e),!0}catch(t){return!1}}function d(e){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function p(e,t){return t?Math.floor(e*Math.pow(10,t))/Math.pow(10,t):e}function b(e,t){return t?Math.round(e*Math.pow(10,t))/Math.pow(10,t):e}function v(e){return isNaN(e)||Math.floor(e)===e?0:e.toString().split(".")[1].length||0}var g={};function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,r=Object(u.useState)(e+"\n"+n),a=Object(o.a)(r,2),c=a[1];Object(u.useEffect)((function(){return g[e]||(g[e]=[]),g[e].push(c),function(){g[e]=g[e].filter((function(e){return e!==c})),0===g[e].length&&delete g[e]}}),[e]);var i=Object(u.useCallback)((function(t){n!==t&&(null===t?localStorage.removeItem(e):localStorage.setItem(e,t),g[e].forEach((function(n){return n(e+"\n"+t)})))}),[n,e]);return[n,i]}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=k(e,JSON.stringify(t)),r=Object(o.a)(n,2),a=r[0],c=r[1];return[a&&JSON.parse(a),function(e){return c(JSON.stringify(e))}]}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.toBase58();return n.slice(0,t)+"\u2026"+n.slice(-t)}function O(e,t,n){if(!n&&Object.keys(e).length!==Object.keys(t).length)return!1;n=n||Object.keys(e);var r,a=Object(c.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(e[o]!==t[o])return!1}}catch(i){a.e(i)}finally{a.f()}return!0}},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"g",(function(){return k})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return O}));var r=n(10),a=n.n(r),c=n(23),o=n(9),i=n(29),u=n(21),l=n(0),s=n.n(l),d=n(68),m=n(80),f=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com",custom:!1},{name:"testnet",endpoint:Object(u.clusterApiUrl)("testnet"),custom:!1},{name:"devnet",endpoint:Object(u.clusterApiUrl)("devnet"),custom:!1},{name:"localnet",endpoint:"http://127.0.0.1:8899",custom:!1}],p=new Map,b=s.a.createContext(null);function v(e){var t=e.children,n=Object(i.i)("connectionEndpts",f[0].endpoint),r=Object(o.a)(n,2),a=r[0],c=r[1],d=Object(i.i)("customConnectionEndpoints",[]),m=Object(o.a)(d,2),p=m[0],v=m[1],g=f.concat(p),k=Object(l.useMemo)((function(){return new u.Connection(a,"recent")}),[a]),h=Object(l.useMemo)((function(){return new u.Connection(a,"recent")}),[a]);return Object(l.useEffect)((function(){var e=k.onAccountChange((new u.Account).publicKey,(function(){}));return function(){k.removeAccountChangeListener(e)}}),[k]),Object(l.useEffect)((function(){var e=k.onSlotChange((function(){return null}));return function(){k.removeSlotChangeListener(e)}}),[k]),Object(l.useEffect)((function(){var e=h.onAccountChange((new u.Account).publicKey,(function(){}));return function(){h.removeAccountChangeListener(e)}}),[h]),Object(l.useEffect)((function(){var e=h.onSlotChange((function(){return null}));return function(){h.removeSlotChangeListener(e)}}),[h]),s.a.createElement(b.Provider,{value:{endpoint:a,setEndpoint:c,connection:k,sendConnection:h,availableEndpoints:g,setCustomEndpoints:v}},t)}function g(){var e=Object(l.useContext)(b);if(!e)throw new Error("Missing connection context");return e.connection}function k(){var e=Object(l.useContext)(b);if(!e)throw new Error("Missing connection context");return e.sendConnection}function h(){var e=Object(l.useContext)(b);if(!e)throw new Error("Missing connection context");return{endpoint:e.endpoint,endpointInfo:e.availableEndpoints.find((function(t){return t.endpoint===e.endpoint})),setEndpoint:e.setEndpoint,availableEndpoints:e.availableEndpoints,setCustomEndpoints:e.setCustomEndpoints}}function y(e){var t=g(),n=Object(m.a)(t,null===e||void 0===e?void 0:e.toBase58()),r=Object(d.c)(Object(c.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e?t.getAccountInfo(e):null);case 1:case"end":return n.stop()}}),n)}))),n,{refreshInterval:6e4}),i=Object(o.a)(r,2),u=i[0],s=i[1];return Object(l.useEffect)((function(){if(e){if(p.has(n)){++p.get(n).count}else{var r=null,a=t.onAccountChange(e,(function(e){e.data&&(r&&r.equals(e.data)||Object(d.b)(n,e),r=e.data)}));p.set(n,{count:1,subscriptionId:a})}return function(){var e=p.get(n);e.count-1<=0?(t.removeAccountChangeListener(e.subscriptionId),p.delete(n)):--e.count}}}),[n]),[u,s]}function O(e){var t=y(e),n=Object(o.a)(t,1)[0];return n&&n.data}},462:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),o=n.n(c),i=(n(279),n(280),n(37)),u=n(14),l=n(50),s=n(44),d=n(45);function m(){var e=Object(s.a)(["\nhtml,body{\n  background: #11161D;\n}\ninput[type=number]::-webkit-inner-spin-button {\n  opacity: 0;\n}\ninput[type=number]:hover::-webkit-inner-spin-button,\ninput[type=number]:focus::-webkit-inner-spin-button {\n  opacity: 0.25;\n}\n/* width */\n::-webkit-scrollbar {\n  width: 15px;\n}\n/* Track */\n::-webkit-scrollbar-track {\n  background: #2d313c;\n}\n/* Handle */\n::-webkit-scrollbar-thumb {\n  background: #5b5f67;\n}\n/* Handle on hover */\n::-webkit-scrollbar-thumb:hover {\n  background: #5b5f67;\n}\n.ant-slider-track, .ant-slider:hover .ant-slider-track {\n  background-color: #2abdd2;\n  opacity: 0.75;\n}\n.ant-slider-track,\n.ant-slider ant-slider-track:hover {\n  background-color: #2abdd2;\n  opacity: 0.75;\n}\n.ant-slider-dot-active,\n.ant-slider-handle,\n.ant-slider-handle-click-focused,\n.ant-slider:hover .ant-slider-handle:not(.ant-tooltip-open)  {\n  border: 2px solid #2abdd2; \n}\n.ant-table-tbody > tr.ant-table-row:hover > td {\n  background: #273043;\n}\n.ant-table-tbody > tr > td {\n  border-bottom: 8px solid #1A2029;\n}\n.ant-table-container table > thead > tr:first-child th {\n  border-bottom: none;\n}\n.ant-divider-horizontal.ant-divider-with-text::before, .ant-divider-horizontal.ant-divider-with-text::after {\n  border-top: 1px solid #434a59 !important;\n}\n.ant-layout {\n    background: #11161D\n  }\n  .ant-table {\n    background: #212734;\n  }\n  .ant-table-thead > tr > th {\n    background: #1A2029;\n  }\n.ant-select-item-option-content {\n  img {\n    margin-right: 4px;\n  }\n}\n.ant-modal-content {\n  background-color: #212734;\n}\n\n@-webkit-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n@-moz-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n@-keyframes highlight {\n  from { background-color: #2abdd2;}\n  to {background-color: #1A2029;}\n}\n.flash {\n  -moz-animation: highlight 0.5s ease 0s 1 alternate ;\n  -webkit-animation: highlight 0.5s ease 0s 1 alternate;\n  animation: highlight 0.5s ease 0s 1 alternate;\n}"]);return m=function(){return e},e}var f=Object(d.a)(m()),p=n(262),b=n(104),v=n(110),g=n(186),k=n(183),h=n(471),y=h.a.Title,O=function(e){Object(g.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(v.a)(n,[{key:"render",value:function(){return this.state.hasError?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(y,{level:2},"Something went wrong."),a.a.createElement(y,{level:4},"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.Component),E=n(137),j=n(57),x=n(64),w=n(9),S=n(148),T=n(463),M=n(464),C=n(476),A=n(67),I=n(29);function z(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){clearInterval(e)}}}),[t])}var P=n(39);function B(){var e=Object(s.a)(["\n  margin: 5px;\n  padding: 20px;\n  background-color: #1a2029;\n"]);return B=function(){return e},e}var N=d.c.div(B());function F(e){var t=e.style,n=e.children;return a.a.createElement(N,{style:Object(P.a)({},t)},n)}var K=n(477),q=n(478);function R(){var e=Object(s.a)(["\n  position: absolute;\n  right: 5px;\n  color: white;\n"]);return R=function(){return e},e}function L(){var e=Object(s.a)(["\n      background-color: ",";\n    "]);return L=function(){return e},e}function D(){var e=Object(s.a)(["\n      width: ",";\n    "]);return D=function(){return e},e}function U(){var e=Object(s.a)(["\n  text-align: right;\n  float: right;\n  height: 100%;\n  ","\n  ","\n"]);return U=function(){return e},e}function _(){var e=Object(s.a)(["\n  padding: 20px 0 14px;\n  font-weight: 700;\n"]);return _=function(){return e},e}function W(){var e=Object(s.a)(["\n  padding: 20px 0 14px;\n  color: #434a59;\n"]);return W=function(){return e},e}function H(){var e=Object(s.a)(["\n  color: rgba(255, 255, 255, 1);\n"]);return H=function(){return e},e}var Q=d.c.div(H()),G=Object(d.c)(T.a)(W()),J=Object(d.c)(T.a)(_()),X=d.c.div(U(),(function(e){return e["data-width"]&&Object(d.b)(D(),e["data-width"])}),(function(e){return e["data-bgcolor"]&&Object(d.b)(L(),e["data-bgcolor"])})),V=d.c.div(R());function Y(e){var t=e.smallScreen,n=e.depth,c=void 0===n?7:n,o=e.onPrice,i=e.onSize,l=Object(u.j)(),s=Object(u.p)(),d=Object(w.a)(s,1)[0],m=Object(u.k)(),f=m.baseCurrency,p=m.quoteCurrency,b=Object(r.useRef)(null),v=Object(r.useRef)(null),g=Object(r.useState)(null),k=Object(w.a)(g,2),h=k[0],y=k[1];function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.slice(0,c).reduce((function(e,n,r){var a,c=Object(w.a)(n,2),o=c[0],i=c[1],u=((null===(a=e[r-1])||void 0===a?void 0:a.cumulativeSize)||0)+i;return e.push({price:o,size:i,cumulativeSize:u,sizePercent:Math.round(u/(t||1)*100)}),e}),[]);return n&&(r=r.reverse()),r}return z((function(){if(!b.current||JSON.stringify(b.current)!==JSON.stringify(v.current)){var e=(null===d||void 0===d?void 0:d.bids)||[],t=(null===d||void 0===d?void 0:d.asks)||[],n=function(e,t,n){var r=Object(w.a)(t,2)[1];return n<c?e+r:e},r=e.reduce(n,0)+t.reduce(n,0),a=O(e,r,!1),o=O(t,r,!0);b.current={bids:null===d||void 0===d?void 0:d.bids,asks:null===d||void 0===d?void 0:d.asks},y({bids:a,asks:o})}}),250),Object(r.useEffect)((function(){v.current={bids:null===d||void 0===d?void 0:d.bids,asks:null===d||void 0===d?void 0:d.asks}}),[d]),a.a.createElement(F,{style:t?{flex:1}:{height:"500px",overflow:"hidden"}},a.a.createElement(Q,null,"Orderbook"),a.a.createElement(G,null,a.a.createElement(M.a,{span:12,style:{textAlign:"left"}},"Size (",f,")"),a.a.createElement(M.a,{span:12,style:{textAlign:"right"}},"Price (",p,")")),null===h||void 0===h?void 0:h.asks.map((function(e){var t=e.price,n=e.size,r=e.sizePercent;return a.a.createElement(Z,{key:t+"",price:t,size:n,side:"sell",sizePercent:r,onPriceClick:function(){return o(t)},onSizeClick:function(){return i(n)}})})),a.a.createElement($,{markPrice:l}),null===h||void 0===h?void 0:h.bids.map((function(e){var t=e.price,n=e.size,r=e.sizePercent;return a.a.createElement(Z,{key:t+"",price:t,size:n,side:"buy",sizePercent:r,onPriceClick:function(){return o(t)},onSizeClick:function(){return i(n)}})})))}var Z=a.a.memo((function(e){var t=e.side,n=e.price,c=e.size,o=e.sizePercent,i=e.onSizeClick,l=e.onPriceClick,s=Object(r.useRef)(),d=Object(u.k)().market;Object(r.useEffect)((function(){var e,t;!(null===(e=s.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=s.current)||void 0===t||t.classList.add("flash"));var n=setTimeout((function(){var e,t;return(null===(e=s.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=s.current)||void 0===t?void 0:t.classList.remove("flash"))}),250);return function(){return clearTimeout(n)}}),[n,c]);var m=(null===d||void 0===d?void 0:d.minOrderSize)&&!isNaN(c)?Number(c).toFixed(Object(I.c)(d.minOrderSize)+1):c,f=(null===d||void 0===d?void 0:d.tickSize)&&!isNaN(n)?Number(n).toFixed(Object(I.c)(d.tickSize)+1):n;return a.a.createElement(T.a,{ref:s,style:{marginBottom:1},onClick:i},a.a.createElement(M.a,{span:12,style:{textAlign:"left"}},m),a.a.createElement(M.a,{span:12,style:{textAlign:"right"}},a.a.createElement(X,{"data-width":o+"%","data-bgcolor":"buy"===t?"rgba(65, 199, 122, 0.6)":"rgba(242, 60, 105, 0.6)"}),a.a.createElement(V,{onClick:l},f)))}),(function(e,t){return Object(I.d)(e,t,["price","size","sizePercent"])})),$=a.a.memo((function(e){var t=e.markPrice,n=Object(u.k)().market,c=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e}),[e]),t.current}(t),o=t>c?"#41C77A":t<c?"#F23B69":"white",i=t&&(null===n||void 0===n?void 0:n.tickSize)&&t.toFixed(Object(I.c)(n.tickSize));return a.a.createElement(J,{justify:"center"},a.a.createElement(M.a,{style:{color:o}},t>c&&a.a.createElement(K.a,{style:{marginRight:5}}),t<c&&a.a.createElement(q.a,{style:{marginRight:5}}),i||"----"))}),(function(e,t){return Object(I.d)(e,t,["markPrice"])})),ee=n(10),te=n.n(ee),ne=n(23),re=n(32),ae=n(467);function ce(e){var t=e.dataSource,n=e.columns,r=e.emptyLabel,c=void 0===r?"No data":r,o=e.pagination,i=void 0!==o&&o,u=e.loading,l=void 0!==u&&u,s=e.pageSize,d=void 0===s?10:s;return a.a.createElement(re.b,{renderEmpty:function(){return a.a.createElement("div",{style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center"}},c)}},a.a.createElement(ae.a,{dataSource:t,columns:n,pagination:!!i&&{pagination:!0,pageSize:d},loading:l}))}var oe=n(69),ie=n(27);function ue(e){var t=e.balances,n=e.showMarket,r=e.hideWalletBalance,c=e.onSettleSuccess,o=Object(u.w)(),s=Object(w.a)(o,1)[0],d=Object(i.g)(),m=Object(l.c)().wallet;function f(){return(f=Object(ne.a)(te.a.mark((function e(t,n){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(oe.e)({market:t,openOrders:n,connection:d,wallet:m,baseCurrencyAccount:Object(u.c)(s,null===t||void 0===t?void 0:t.baseMintAddress),quoteCurrencyAccount:Object(u.c)(s,null===t||void 0===t?void 0:t.quoteMintAddress)});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),Object(ie.a)({message:"Error settling funds",description:e.t0.message,type:"error"}),e.abrupt("return");case 9:c&&c();case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var p=[n?{title:"Market",dataIndex:"marketName",key:"marketName"}:null,{title:"Coin",dataIndex:"coin",key:"coin"},r?null:{title:"Wallet Balance",dataIndex:"wallet",key:"wallet"},{title:"Orders",dataIndex:"orders",key:"orders"},{title:"Unsettled",dataIndex:"unsettled",key:"unsettled"},{key:"action",render:function(e){var t=e.market,n=e.openOrders,r=e.marketName;return a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(A.a,{ghost:!0,style:{marginRight:12},onClick:function(){return function(e,t){return f.apply(this,arguments)}(t,n)}},"Settle ",r))}}].filter((function(e){return e}));return a.a.createElement(ce,{emptyLabel:"No balances",dataSource:t,columns:p,pagination:!1})}var le=n(474),se=n(479);function de(){var e=Object(s.a)(["\n  color: #f23b69;\n  border: 1px solid #f23b69;\n"]);return de=function(){return e},e}var me=Object(d.c)(A.a)(de());function fe(e){var t=e.openOrders,n=e.onCancelSuccess,c=Object(l.c)().wallet,o=Object(i.g)(),u=Object(r.useState)(null),s=Object(w.a)(u,2),d=s[0],m=s[1];function f(){return(f=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(null===t||void 0===t?void 0:t.orderId),e.prev=1,e.next=4,Object(oe.a)({order:t,market:t.market,connection:o,wallet:c});case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),Object(ie.a)({message:"Error cancelling order",description:e.t0.message,type:"error"}),e.abrupt("return");case 10:return e.prev=10,m(null),e.finish(10);case 13:n&&n();case 14:case"end":return e.stop()}}),e,null,[[1,6,10,13]])})))).apply(this,arguments)}var p=[{title:"Market",dataIndex:"marketName",key:"marketName"},{title:"Side",dataIndex:"side",key:"side",render:function(e){return a.a.createElement(le.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700}},e.charAt(0).toUpperCase()+e.slice(1))}},{title:"Size",dataIndex:"size",key:"size"},{title:"Price",dataIndex:"price",key:"price"},{key:"orderId",render:function(e){return a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(me,{icon:a.a.createElement(se.a,null),onClick:function(){return function(e){return f.apply(this,arguments)}(e)},loading:d+""===(null===e||void 0===e?void 0:e.orderId)+""},"Cancel"))}}],b=(t||[]).map((function(e){return Object.assign(e,{key:e.orderId})}));return a.a.createElement(T.a,null,a.a.createElement(M.a,{span:24},a.a.createElement(ce,{emptyLabel:"No open orders",dataSource:b,columns:p,pagination:!0,pageSize:5})))}var pe=n(468);function be(){var e=Object(u.h)(),t=Object(u.k)().quoteCurrency,n=[{title:"Market",dataIndex:"marketName",key:"marketName"},{title:"Side",dataIndex:"side",key:"side",render:function(e){return a.a.createElement(le.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700}},e.charAt(0).toUpperCase()+e.slice(1))}},{title:"Size",dataIndex:"size",key:"size"},{title:"Price",dataIndex:"price",key:"price"},{title:"Liquidity",dataIndex:"liquidity",key:"liquidity"},{title:t?"Fees (".concat(t,")"):"Fees",dataIndex:"feeCost",key:"feeCost"}],r=(e||[]).map((function(e){return Object(P.a)(Object(P.a)({},e),{},{key:"".concat(e.orderId).concat(e.side),liquidity:e.eventFlags.maker?"Maker":"Taker"})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,null,a.a.createElement(M.a,{span:24},a.a.createElement(ce,{dataSource:r,columns:n,pagination:!0,pageSize:5,emptyLabel:"No fills"}))))}var ve=n(31);function ge(){var e=Object(u.g)(),t=[{title:"Fee Tier",dataIndex:"feeTier",key:"feeTier",render:function(e,t){return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(h.a,null,e),0===t.index?a.a.createElement("div",{style:{marginLeft:10}},a.a.createElement(le.a,{color:"#41C77A",style:{fontWeight:700}},"Selected")):null)}},{title:"Taker",dataIndex:"taker",key:"taker",render:function(e,t){return I.f.format(Object(ve.getFeeRates)(t.feeTier).taker)}},{title:"Maker",dataIndex:"maker",key:"maker",render:function(e,t){return I.f.format(Object(ve.getFeeRates)(t.feeTier).maker)}},{title:"Public Key",dataIndex:"pubkey",key:"pubkey",render:function(e){return e.toBase58()}},{title:"Balance",dataIndex:"balance",key:"balance"},{title:"Mint",dataIndex:"mint",key:"mint",render:function(e,t){return t.mint.equals(ve.TokenInstructions.SRM_MINT)?"SRM":t.mint.equals(ve.TokenInstructions.MSRM_MINT)?"MSRM":"UNKNOWN"}}],n=(Object(w.a)(e,1)[0]||[]).map((function(e,t){return Object(P.a)(Object(P.a)({},e),{},{index:t,key:e.pubkey.toBase58()})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,null,a.a.createElement(M.a,{span:24},a.a.createElement(ce,{dataSource:n,columns:t,pagination:!0,pageSize:5,emptyLabel:"No (M)SRM accounts"}))),a.a.createElement(T.a,{style:{marginTop:8}},a.a.createElement(M.a,null,a.a.createElement(h.a,null,"Holding SRM or MSRM makes you eligible for fee discounts:"),a.a.createElement(ke,null))))}function ke(){var e=[{title:"Fee Tier",dataIndex:"feeTier",key:"feeTier"},{title:"Taker",dataIndex:"taker",key:"taker",render:function(e,t){return I.f.format(Object(ve.getFeeRates)(t.feeTier).taker)}},{title:"Maker",dataIndex:"maker",key:"maker",render:function(e,t){return I.f.format(Object(ve.getFeeRates)(t.feeTier).maker)}},{title:"Requirements",dataIndex:"requirements",key:"requirements",render:function(e,t){return a.a.createElement(h.a,null,t.balance?"\u2265 ".concat(t.balance," ").concat(t.token):"None")}}];return a.a.createElement(ce,{dataSource:[{feeTier:0,taker:.0022,maker:-3e-4,token:"",balance:""},{feeTier:1,taker:.002,maker:-3e-4,token:"SRM",balance:100},{feeTier:2,taker:.0018,maker:-3e-4,token:"SRM",balance:1e3},{feeTier:3,taker:.0016,maker:-3e-4,token:"SRM",balance:1e4},{feeTier:4,taker:.0014,maker:-3e-4,token:"SRM",balance:1e5},{feeTier:5,taker:.0012,maker:-3e-4,token:"SRM",balance:1e6},{feeTier:6,taker:.001,maker:-5e-4,token:"MSRM",balance:1}].map((function(e){return Object(P.a)(Object(P.a)({},e),{},{key:e.feeTier})})),columns:e})}var he=h.a.Paragraph,ye=pe.a.TabPane;function Oe(){var e=Object(u.k)().market;return a.a.createElement(F,{style:{flex:1,paddingTop:20}},a.a.createElement(h.a,null,a.a.createElement(he,{style:{color:"rgba(255,255,255,0.5)"}},"Make sure to go to Balances and click Settle to send out your funds."),a.a.createElement(he,{style:{color:"rgba(255,255,255,0.5)"}},"To fund your wallet, ",a.a.createElement("a",{href:"https://www.sollet.io"},"sollet.io"),". You can get SOL from FTX, Binance, BitMax, and others. You can get other tokens from FTX."," ")),a.a.createElement(pe.a,{defaultActiveKey:"orders"},a.a.createElement(ye,{tab:"Open Orders",key:"orders"},a.a.createElement(Ee,null)),a.a.createElement(ye,{tab:"Recent Trade History",key:"fills"},a.a.createElement(be,null)),a.a.createElement(ye,{tab:"Balances",key:"balances"},a.a.createElement(je,null)),e&&e.supportsSrmFeeDiscounts?a.a.createElement(ye,{tab:"Fee discounts",key:"fees"},a.a.createElement(ge,null)):null))}var Ee=function(){var e=Object(u.n)();return a.a.createElement(fe,{openOrders:e})},je=function(){var e=Object(u.e)();return a.a.createElement(ue,{balances:e})},xe=n(465),we=n(472),Se=n(91);function Te(e){var t,n,r,c=e.onClose,o=e.baseOrQuote,i=Object(u.k)(),s=i.market,d=i.baseCurrency,m=i.quoteCurrency,f=Object(l.c)(),p=f.providerName,b=f.providerUrl,v=Object(u.q)(),g=Object(u.t)();return"base"===o?(t=null===s||void 0===s?void 0:s.baseMintAddress,n=v,r=d):"quote"===o?(t=null===s||void 0===s?void 0:s.quoteMintAddress,n=g,r=m):n=null,t?a.a.createElement(we.a,{title:r,visible:!!t,onOk:c,onCancel:c},a.a.createElement("div",{style:{paddingTop:"20px"}},a.a.createElement("p",{style:{color:"white"}},"Mint address:"),a.a.createElement("p",{style:{color:"rgba(255,255,255,0.5)"}},t.toBase58()),a.a.createElement("div",null,a.a.createElement("p",{style:{color:"white"}},"SPL Deposit address:"),a.a.createElement("p",{style:{color:"rgba(255,255,255,0.5)"}},n?n.pubkey.toBase58():a.a.createElement(a.a.Fragment,null,"Visit"," ",a.a.createElement(Se.a,{external:!0,to:b},p)," ","to create an account for this mint"))))):null}var Me=n(480);function Ce(){var e=Object(s.a)(["\n  padding-bottom: 10px;\n"]);return Ce=function(){return e},e}var Ae=Object(d.c)(T.a)(Ce());function Ie(e){var t,n=e.accounts,r=e.mint,c=Object(u.v)(),o=Object(w.a)(c,2),i=o[0],l=o[1];t=r&&r in i?i[r]:n&&(null===n||void 0===n?void 0:n.length)>0?n[0].pubkey.toBase58():void 0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ae,{align:"middle"},a.a.createElement(M.a,{span:8},"Token account:"),a.a.createElement(M.a,{span:13},a.a.createElement(S.a,{style:{width:"100%"},value:t,onSelect:function(e){if(r){var t=Object(P.a)({},i);t[r]=e,l(t)}else Object(ie.a)({message:"Error selecting token account",description:"Mint is undefined",type:"error"})}},null===n||void 0===n?void 0:n.map((function(e){return a.a.createElement(S.a.Option,{key:e.pubkey.toBase58(),value:e.pubkey.toBase58()},a.a.createElement(h.a.Text,{code:!0},Object(I.a)(e.pubkey,8)))})))),a.a.createElement(M.a,{span:2,offset:1},a.a.createElement(A.a,{shape:"round",icon:a.a.createElement(Me.a,null),size:"small",onClick:function(){return t&&navigator.clipboard.writeText(t)}}))))}function ze(){var e=Object(s.a)(["\n  color: #2abdd2;\n  background-color: #212734;\n  border-width: 0px;\n"]);return ze=function(){return e},e}function Pe(){var e=Object(s.a)(["\n  font-size: 12px;\n  padding-top: 6px;\n"]);return Pe=function(){return e},e}function Be(){var e=Object(s.a)(["\n  padding-bottom: 20px;\n"]);return Be=function(){return e},e}var Ne=Object(d.c)(T.a)(Be()),Fe=d.c.p(Pe()),Ke=Object(d.c)(A.a)(ze());function qe(){var e=Object(u.k)(),t=e.baseCurrency,n=e.quoteCurrency,c=e.market,o=Object(u.e)(),s=Object(u.s)(!0),d=Object(i.g)(),m=Object(l.c)(),f=m.providerUrl,p=m.providerName,b=m.wallet,v=m.connected,g=Object(r.useState)(""),k=Object(w.a)(g,2),h=k[0],y=k[1],O=Object(u.q)(),E=Object(u.t)(),j=Object(u.w)(),x=Object(w.a)(j,1)[0],S=o&&o.find((function(e){return e.coin===t})),T=o&&o.find((function(e){return e.coin===n}));function C(){return A.apply(this,arguments)}function A(){return(A=Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return Object(ie.a)({message:"Error settling funds",description:"market is undefined",type:"error"}),e.abrupt("return");case 3:if(s){e.next=6;break}return Object(ie.a)({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 6:if(O){e.next=9;break}return Object(ie.a)({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 9:if(E){e.next=12;break}return Object(ie.a)({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 12:return e.prev=12,e.next=15,Object(oe.e)({market:c,openOrders:s,connection:d,wallet:b,baseCurrencyAccount:O,quoteCurrencyAccount:E});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),Object(ie.a)({message:"Error settling funds",description:e.t0.message,type:"error"});case 20:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}var I=[[t,S,"base",null===c||void 0===c?void 0:c.baseMintAddress.toBase58()],[n,T,"quote",null===c||void 0===c?void 0:c.quoteMintAddress.toBase58()]];return a.a.createElement(F,{style:{flex:1,paddingTop:10}},I.map((function(e,t){var n=Object(w.a)(e,4),r=n[0],c=n[1],o=n[2],i=n[3];return a.a.createElement(a.a.Fragment,{key:t},a.a.createElement(xe.a,{style:{borderColor:"white"}},r),v&&a.a.createElement(Ie,{accounts:null===x||void 0===x?void 0:x.filter((function(e){return e.effectiveMint.toBase58()===i})),mint:i}),a.a.createElement(Ne,{align:"middle",justify:"space-between",style:{paddingBottom:12}},a.a.createElement(M.a,null,"Wallet balance:"),a.a.createElement(M.a,null,c&&c.wallet)),a.a.createElement(Ne,{align:"middle",justify:"space-between",style:{paddingBottom:12}},a.a.createElement(M.a,null,"Unsettled balance:"),a.a.createElement(M.a,null,c&&c.unsettled)),a.a.createElement(Ne,{align:"middle",justify:"space-around"},a.a.createElement(M.a,{style:{width:150}},a.a.createElement(Ke,{block:!0,size:"large",onClick:function(){return y(o)}},"Deposit")),a.a.createElement(M.a,{style:{width:150}},a.a.createElement(Ke,{block:!0,size:"large",onClick:C},"Settle"))),a.a.createElement(Fe,null,"All deposits go to your"," ",a.a.createElement(Se.a,{external:!0,to:f},p)," ","wallet"))})),a.a.createElement(Te,{baseOrQuote:h,onClose:function(){return y("")}}))}var Re=n(184),Le=n(473),De=n(470),Ue=n(475);function _e(){var e=Object(s.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #02bf76;\n  border-color: #02bf76;\n"]);return _e=function(){return e},e}function We(){var e=Object(s.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #f23b69;\n  border-color: #f23b69;\n"]);return We=function(){return e},e}var He=Object(d.c)(A.a)(We()),Qe=Object(d.c)(A.a)(_e()),Ge={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"};function Je(e){var t=e.style,n=e.setChangeOrderRef,c=Object(r.useState)("buy"),o=Object(w.a)(c,2),s=o[0],d=o[1],m=Object(u.k)(),f=m.baseCurrency,p=m.quoteCurrency,b=m.market,v=Object(u.r)(),g=Object(u.u)(),k=Object(u.q)(),h=Object(u.t)(),y=Object(u.s)(!0),O=Object(l.c)().wallet,E=Object(i.g)(),j=Object(u.j)(),x=Object(r.useState)(!1),S=Object(w.a)(x,2),T=S[0],M=S[1],C=Object(r.useState)(!1),A=Object(w.a)(C,2),z=A[0],B=A[1],N=Object(r.useState)(void 0),K=Object(w.a)(N,2),q=K[0],R=K[1],L=Object(r.useState)(void 0),D=Object(w.a)(L,2),U=D[0],_=D[1],W=Object(r.useState)(void 0),H=Object(w.a)(W,2),Q=H[0],G=H[1],J=Object(r.useState)(!1),X=Object(w.a)(J,2),V=X[0],Y=X[1],Z=Object(r.useState)(0),$=Object(w.a)(Z,2),ee=$[0],re=$[1],ae=(g||0)+((y&&b?b.quoteSplSizeToNumber(y.quoteTokenFree):0)||0),ce=v||0,ue=(null===b||void 0===b?void 0:b.minOrderSize)&&Object(I.c)(b.minOrderSize),le=(null===b||void 0===b?void 0:b.tickSize)&&Object(I.c)(b.tickSize);Object(r.useEffect)((function(){n&&n(de)}),[n]),Object(r.useEffect)((function(){q&&Q&&fe(ee)}),[s]),Object(r.useEffect)((function(){me()}),[Q,q]);var se=function(e){if(R(e),e){var t=Q||j;if(t){var n=e*t,r=e&&Object(I.g)(n,ue);_(r)}else _(void 0)}else _(void 0)},de=function(e){var t=e.size,n=e.price,r=t&&Object(I.g)(t,ue),a=n&&Object(I.g)(n,le);r&&se(r),a&&G(a)},me=function(){var e="buy"===s?ae/(Q||j||1):ce,t=Object(I.b)(e,ue),n=Math.min((q||0)/t*100,100);re(n)},fe=function(e){if(!Q&&j){var t=le?j.toFixed(le):j;G("number"===typeof t?t:parseFloat(t))}var n;"buy"===s?(Q||j)&&(n=ae/(Q||j||1)*e/100):n=ce*e/100;var r=Object(I.b)(n,ue);se(r)};function pe(){return be.apply(this,arguments)}function be(){return(be=Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=6;break}return console.warn("Missing price"),Object(ie.a)({message:"Missing price",type:"error"}),e.abrupt("return");case 6:if(q){e.next=10;break}return console.warn("Missing size"),Object(ie.a)({message:"Missing size",type:"error"}),e.abrupt("return");case 10:return Y(!0),e.prev=11,e.next=14,Object(oe.c)({side:s,price:Q,size:q,orderType:z?"ioc":T?"postOnly":"limit",market:b,connection:E,wallet:O,baseCurrencyAccount:null===k||void 0===k?void 0:k.pubkey,quoteCurrencyAccount:null===h||void 0===h?void 0:h.pubkey});case 14:G(void 0),se(void 0),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(11),console.warn(e.t0),Object(ie.a)({message:"Error placing order",description:e.t0.message,type:"error"});case 22:return e.prev=22,Y(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[11,18,22,25]])})))).apply(this,arguments)}return a.a.createElement(F,{style:Object(P.a)({display:"flex",flexDirection:"column"},t)},a.a.createElement("div",{style:{flex:1}},a.a.createElement(Re.a.Group,{onChange:function(e){return d(e.target.value)},value:s,buttonStyle:"solid",style:{marginBottom:8,width:"100%"}},a.a.createElement(Re.a.Button,{value:"buy",style:{width:"50%",textAlign:"center",background:"buy"===s?"#02bf76":"",borderColor:"buy"===s?"#02bf76":""}},"BUY"),a.a.createElement(Re.a.Button,{value:"sell",style:{width:"50%",textAlign:"center",background:"sell"===s?"#F23B69":"",borderColor:"sell"===s?"#F23B69":""}},"SELL")),a.a.createElement(Le.a,{style:{textAlign:"right",paddingBottom:8},addonBefore:a.a.createElement("div",{style:{width:"30px"}},"Price"),suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},p),value:Q,type:"number",step:(null===b||void 0===b?void 0:b.tickSize)||1,onChange:function(e){return G(parseFloat(e.target.value))}}),a.a.createElement(Le.a.Group,{compact:!0,style:{paddingBottom:8}},a.a.createElement(Le.a,{style:{width:"calc(50% + 30px)",textAlign:"right"},addonBefore:a.a.createElement("div",{style:{width:"30px"}},"Size"),suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},f),value:q,type:"number",step:(null===b||void 0===b?void 0:b.minOrderSize)||1,onChange:function(e){return se(parseFloat(e.target.value))}}),a.a.createElement(Le.a,{style:{width:"calc(50% - 30px)",textAlign:"right"},suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},p),value:U,type:"number",step:(null===b||void 0===b?void 0:b.minOrderSize)||1,onChange:function(e){return function(e){if(_(e),e){var t=Q||j;if(t){var n=e/t,r=e&&Object(I.g)(n,ue);R(r)}else R(void 0)}else R(void 0)}(parseFloat(e.target.value))}})),a.a.createElement(De.a,{value:ee,tipFormatter:function(e){return"".concat(e,"%")},marks:Ge,onChange:fe}),a.a.createElement("div",{style:{paddingTop:18}},"POST ",a.a.createElement(Ue.a,{checked:T,onChange:function(e){e&&B(!1),M(e)},style:{marginRight:40}}),"IOC ",a.a.createElement(Ue.a,{checked:z,onChange:function(e){e&&M(!1),B(e)}}))),"buy"===s?a.a.createElement(Qe,{disabled:!Q||!q,onClick:pe,block:!0,type:"primary",size:"large",loading:V},"Buy ",f):a.a.createElement(He,{disabled:!Q||!q,onClick:pe,block:!0,type:"primary",size:"large",loading:V},"Sell ",f))}function Xe(){var e=Object(s.a)(["\n  height: calc(100% - 75px);\n  margin-right: -20px;\n  padding-right: 5px;\n  overflow-y: scroll;\n"]);return Xe=function(){return e},e}function Ve(){var e=Object(s.a)(["\n  padding: 20px 0 14px;\n  color: #434a59;\n"]);return Ve=function(){return e},e}function Ye(){var e=Object(s.a)(["\n  color: rgba(255, 255, 255, 1);\n"]);return Ye=function(){return e},e}var Ze=d.c.div(Ye()),$e=Object(d.c)(T.a)(Ve()),et=d.c.div(Xe());function tt(e){var t=e.smallScreen,n=Object(u.k)(),r=n.baseCurrency,c=n.quoteCurrency,o=n.market,i=Object(u.x)();return a.a.createElement(F,{style:t?{flex:1}:{marginTop:"10px",minHeight:"270px",height:"calc(100vh - 710px)"}},a.a.createElement(Ze,null,"Recent Market trades"),a.a.createElement($e,null,a.a.createElement(M.a,{span:12,style:{textAlign:"left"}},"Size (",r,")"),a.a.createElement(M.a,{span:12,style:{textAlign:"right"}},"Price (",c,")"," ")),!!i&&a.a.createElement(et,null,i.map((function(e,t){return a.a.createElement(T.a,{key:t,style:{marginBottom:4}},a.a.createElement(M.a,{span:12,style:{textAlign:"left"}},(null===o||void 0===o?void 0:o.minOrderSize)&&!isNaN(e.size)?Number(e.size).toFixed(Object(I.c)(o.minOrderSize)):e.size),a.a.createElement(M.a,{span:12,style:{textAlign:"right",color:"buy"===e.side?"#41C77A":"#F23B69"}},(null===o||void 0===o?void 0:o.tickSize)&&!isNaN(e.price)?Number(e.price).toFixed(Object(I.c)(o.tickSize)):e.price))}))))}var nt=n(481);function rt(e){var t=e.title,n=e.address;return a.a.createElement("div",null,t&&a.a.createElement("p",{style:{color:"white"}},t),a.a.createElement(A.a,{type:"link",icon:a.a.createElement(nt.a,null),href:"https://explorer.solana.com/address/"+n,target:"_blank",rel:"noopener noreferrer"},n))}var at=n(173),ct=n.n(at),ot=n(267),it=n.n(ot),ut=h.a.Title;function lt(e){var t=e.switchToLiveMarkets,n=Object(u.f)(),r=Object(u.i)(),c=r.openOrders,o=r.loaded,i=r.refreshOpenOrders,l=Object(u.z)().refresh,s=!c||c.length>0,d=n&&n.filter((function(e){var t=e.orders,n=e.unsettled;return t>0||n>0})),m=d&&d.length>0;return a.a.createElement(F,null,a.a.createElement(ut,{level:4,style:{color:"rgba(255, 255, 255, 1)"}},"Migrate to new markets"),a.a.createElement(h.a,null,"Serum has rolled out upgraded markets! They're faster and support fee discounts based on SRM holdings."),a.a.createElement("br",null),a.a.createElement(h.a,null,"To migrate over to the new markets, please cancel your orders and settle your funds on old markets."),a.a.createElement("div",{style:{marginTop:20,display:"flex",justifyContent:"center"}},a.a.createElement(A.a,{onClick:function(){return l(!0)}},a.a.createElement(it.a,null)," Refresh data")),n?a.a.createElement(a.a.Fragment,null,a.a.createElement(xe.a,null,!s&&a.a.createElement(ct.a,null)," Cancel your orders"),s?o?a.a.createElement(fe,{openOrders:c,onCancelSuccess:function(){setTimeout((function(){l(),i()}),1e3)}}):a.a.createElement(p.a,{size:"large"}):null,a.a.createElement(xe.a,null,!m&&a.a.createElement(ct.a,null)," Settle your funds"),m&&a.a.createElement(ue,{balances:d,hideWalletBalance:!0,showMarket:!0,onSettleSuccess:function(){setTimeout(l,1e3)}}),a.a.createElement(xe.a,null,"Switch to upgraded markets"),a.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.a.createElement(A.a,{onClick:t,disabled:m||s},"Switch to new markets"))):a.a.createElement(p.a,{size:"large"}))}var st=n(483),dt=n(484),mt=n(21),ft=n(482),pt=h.a.Text;function bt(e){var t,n,c=e.visible,o=e.onAddCustomMarket,u=e.onClose,l=Object(i.e)(),s=Object(r.useState)(""),d=Object(w.a)(s,2),m=d[0],f=d[1],p=Object(r.useState)(""),b=Object(w.a)(p,2),v=b[0],g=b[1],k=Object(r.useState)(""),h=Object(w.a)(k,2),y=h[0],O=h[1],E=Object(r.useState)(""),j=Object(w.a)(E,2),x=j[0],S=j[1],C=Object(r.useState)(null),A=Object(w.a)(C,2),z=A[0],P=A[1],B=Object(r.useState)(!1),N=Object(w.a)(B,2),F=N[0],K=N[1],q=Object(I.e)(m),R=Object(i.d)(q?new mt.PublicKey(m):null),L=Object(w.a)(R,1)[0],D=L?L.owner.toBase58():ve.MARKETS.find((function(e){return!e.deprecated})).programId.toBase58();Object(r.useEffect)((function(){q&&D?(K(!0),ve.Market.load(l,new mt.PublicKey(m),{},new mt.PublicKey(D)).then((function(e){P(e)})).catch((function(){U(),P(null)})).finally((function(){return K(!1)}))):U()}),[l,m,D]);var U=function(){g(null),O(null),S(null)},_=ve.MARKETS.find((function(e){return e.address.toBase58()===m&&e.programId.toBase58()===D})),W=ve.MARKETS.find((function(e){return e.programId.toBase58()===D})),H=(null===z||void 0===z?void 0:z.baseMintAddress)&&(null===(t=ve.TOKEN_MINTS.find((function(e){return e.address.equals(z.baseMintAddress)})))||void 0===t?void 0:t.name),Q=(null===z||void 0===z?void 0:z.quoteMintAddress)&&(null===(n=ve.TOKEN_MINTS.find((function(e){return e.address.equals(z.quoteMintAddress)})))||void 0===n?void 0:n.name),G=!F&&!!z&&z.publicKey.toBase58()===m&&m&&D&&v&&(H||y)&&(Q||x)&&q,J=function(){U(),P(null),f(null),u()};return a.a.createElement(we.a,{title:"Add custom market",visible:c,onOk:function(){if(G){var e={address:m,programId:D,name:v};H||(e.baseLabel=y),Q||(e.quoteLabel=x),o(e),J()}else Object(ie.a)({message:"Please fill in all fields with valid values",type:"error"})},okText:"Add",onCancel:J,okButtonProps:{disabled:!G}},a.a.createElement("div",null,q?a.a.createElement(a.a.Fragment,null,!z&&!F&&a.a.createElement(T.a,{style:{marginBottom:8}},a.a.createElement(pt,{type:"danger"},"Not a valid market")),z&&_&&a.a.createElement(T.a,{style:{marginBottom:8}},a.a.createElement(pt,{type:"warning"},"Market known: ",_.name)),z&&!W&&a.a.createElement(T.a,{style:{marginBottom:8}},a.a.createElement(pt,{type:"danger"},"Warning: unknown DEX program")),z&&W&&W.deprecated&&a.a.createElement(T.a,{style:{marginBottom:8}},a.a.createElement(pt,{type:"warning"},"Warning: deprecated DEX program"))):a.a.createElement(a.a.Fragment,null,m&&!q&&a.a.createElement(T.a,{style:{marginBottom:8}},a.a.createElement(pt,{type:"danger"},"Invalid market ID"))),a.a.createElement(T.a,{style:{marginBottom:8}},a.a.createElement(M.a,{span:24},a.a.createElement(Le.a,{placeholder:"Market Id",value:m,onChange:function(e){return f(e.target.value)},suffix:F?a.a.createElement(ft.a,null):null}))),a.a.createElement(T.a,{style:{marginBottom:8,marginTop:8}},a.a.createElement(M.a,{span:24},a.a.createElement(Le.a,{placeholder:"Market Label",disabled:!z,value:v,onChange:function(e){return g(e.target.value)}}))),a.a.createElement(T.a,{gutter:[8],style:{marginBottom:8}},a.a.createElement(M.a,{span:12},a.a.createElement(Le.a,{placeholder:"Base label",disabled:!z||H,value:H||y,onChange:function(e){return O(e.target.value)}}),z&&!H&&a.a.createElement("div",{style:{marginTop:8}},a.a.createElement(pt,{type:"warning"},"Warning: unknown token"))),a.a.createElement(M.a,{span:12},a.a.createElement(Le.a,{placeholder:"Quote label",disabled:!z||Q,value:Q||x,onChange:function(e){return S(e.target.value)}}),z&&!Q&&a.a.createElement("div",{style:{marginTop:8}},a.a.createElement(pt,{type:"warning"},"Warning: unknown token"))))))}function vt(){var e=Object(s.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n"]);return vt=function(){return e},e}var gt=S.a.Option,kt=S.a.OptGroup,ht=d.c.div(vt());function yt(){var e=Object(u.k)(),t=e.market,n=e.marketName,c=e.customMarkets,o=e.setCustomMarkets,i=e.setMarketAddress,l=Object(u.l)(),s=Object(r.useState)(!1),d=Object(w.a)(s,2),m=d[0],f=d[1],p=Object(r.useState)(!1),b=Object(w.a)(p,2),v=b[0],g=b[1],k=Object(u.y)(),y=Object(r.useState)({height:window.innerHeight,width:window.innerWidth}),O=Object(w.a)(y,2),E=O[0],j=O[1];Object(r.useEffect)((function(){document.title=n?"".concat(n," \u2014 Serum"):"Serum"}),[n]);var S=Object(r.useRef)();Object(r.useEffect)((function(){var e=function(){j({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var I=null===E||void 0===E?void 0:E.width,z={onChangeOrderRef:function(e){return S.current=e},onPrice:Object(r.useCallback)((function(e){return S.current&&S.current({price:e})}),[]),onSize:Object(r.useCallback)((function(e){return S.current&&S.current({size:e})}),[])},P=Object(r.useCallback)((function(){return m?a.a.createElement(Et,{switchToLiveMarkets:function(){return f(!1)}}):I<1e3?a.a.createElement(wt,z):I<1450?a.a.createElement(xt,z):a.a.createElement(jt,z)}),[I,z,m]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(bt,{visible:v,onClose:function(){return g(!1)},onAddCustomMarket:function(e){if(Object(u.b)(c).some((function(t){return t.address.toBase58()===e.address})))Object(ie.a)({message:"A market with the given ID already exists",type:"error"});else{var t=[].concat(Object(x.a)(c),[e]);o(t),i(e.address)}}}),a.a.createElement(ht,null,a.a.createElement(T.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16},a.a.createElement(M.a,null,a.a.createElement(Ot,{markets:l,setHandleDeprecated:f,placeholder:"Select market",customMarkets:c,onDeleteCustomMarket:function(e){var t=c.filter((function(t){return t.address!==e}));o(t)}})),t?a.a.createElement(M.a,null,a.a.createElement(C.a,{content:a.a.createElement(rt,{address:t.publicKey.toBase58()}),placement:"bottomRight",title:"Market address",trigger:"click"},a.a.createElement(st.a,{style:{color:"#2abdd2"}}))):null,a.a.createElement(M.a,null,a.a.createElement(dt.a,{style:{color:"#2abdd2"},onClick:function(){return g(!0)}})),k&&k.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement(M.a,null,a.a.createElement(h.a,null,"You have unsettled funds on old markets! Please go through them to claim your funds.")),a.a.createElement(M.a,null,a.a.createElement(A.a,{onClick:function(){return f(!m)}},m?"View new markets":"Handle old markets")))),P()))}function Ot(e){var t,n,r=e.markets,c=e.placeholder,o=e.setHandleDeprecated,i=e.customMarkets,l=e.onDeleteCustomMarket,s=Object(u.k)(),d=s.market,m=s.setMarketAddress,f=function(e){return e.split("/")[0]},p=function(e){return e.split("/")[1]},b=null===(t=Object(u.b)(i).find((function(e){return(null===d||void 0===d?void 0:d.address)&&e.address.equals(d.address)})))||void 0===t||null===(n=t.address)||void 0===n?void 0:n.toBase58();return a.a.createElement(S.a,{showSearch:!0,size:"large",style:{width:200},placeholder:c||"Select a market",optionFilterProp:"name",onSelect:function(e){o(!1),m(e)},listHeight:400,value:b,filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},i&&i.length>0&&a.a.createElement(kt,{label:"Custom"},i.map((function(e,t){var n=e.address,r=e.name;return a.a.createElement(gt,{value:n,key:n,name:r,style:{padding:"10px",backgroundColor:t%2===0?"rgb(39, 44, 61)":null}},a.a.createElement(T.a,null,a.a.createElement(M.a,{flex:"auto"},r),b!==n&&a.a.createElement(M.a,null,a.a.createElement(se.a,{onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),l&&l(n)}}))))}))),a.a.createElement(kt,{label:"Markets"},r.sort((function(e,t){return"USDT"===p(e.name)&&"USDT"!==p(t.name)?-1:"USDT"!==p(e.name)&&"USDT"===p(t.name)?1:0})).sort((function(e,t){return f(e.name)<f(t.name)?-1:f(e.name)>f(t.name)?1:0})).map((function(e,t){var n=e.address,r=e.name,c=e.deprecated;return a.a.createElement(gt,{value:n.toBase58(),key:n,name:r,style:{padding:"10px",backgroundColor:t%2===0?"rgb(39, 44, 61)":null}},r," ",c?" (Deprecated)":null)}))))}var Et=function(e){var t=e.switchToLiveMarkets;return a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,null,a.a.createElement(M.a,{flex:"auto"},a.a.createElement(lt,{switchToLiveMarkets:t}))))},jt=function(e){var t=e.onChangeOrderRef,n=e.onPrice,r=e.onSize;return a.a.createElement(T.a,{style:{minHeight:"900px",flexWrap:"nowrap"}},a.a.createElement(M.a,{flex:"auto",style:{height:"100%",display:"flex"}},a.a.createElement(Oe,null)),a.a.createElement(M.a,{flex:"360px",style:{height:"100%"}},a.a.createElement(Y,{smallScreen:!1,onPrice:n,onSize:r}),a.a.createElement(tt,{smallScreen:!1})),a.a.createElement(M.a,{flex:"400px",style:{height:"100%",display:"flex",flexDirection:"column"}},a.a.createElement(Je,{setChangeOrderRef:t}),a.a.createElement(qe,null)))},xt=function(e){var t=e.onChangeOrderRef,n=e.onPrice,r=e.onSize;return a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,{style:{height:"900px"}},a.a.createElement(M.a,{flex:"auto",style:{height:"100%",display:"flex"}},a.a.createElement(Y,{smallScreen:!0,depth:13,onPrice:n,onSize:r})),a.a.createElement(M.a,{flex:"auto",style:{height:"100%",display:"flex"}},a.a.createElement(tt,{smallScreen:!0})),a.a.createElement(M.a,{flex:"400px",style:{height:"100%",display:"flex",flexDirection:"column"}},a.a.createElement(Je,{setChangeOrderRef:t}),a.a.createElement(qe,null))),a.a.createElement(T.a,null,a.a.createElement(M.a,{flex:"auto"},a.a.createElement(Oe,null))))},wt=function(e){var t=e.onChangeOrderRef,n=e.onPrice,r=e.onSize;return a.a.createElement(a.a.Fragment,null,a.a.createElement(T.a,null,a.a.createElement(M.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},a.a.createElement(Je,{style:{flex:1},setChangeOrderRef:t})),a.a.createElement(M.a,{xs:24,sm:12},a.a.createElement(qe,null))),a.a.createElement(T.a,{style:{height:"500px"}},a.a.createElement(M.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},a.a.createElement(Y,{smallScreen:!0,onPrice:n,onSize:r})),a.a.createElement(M.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},a.a.createElement(tt,{smallScreen:!0}))),a.a.createElement(T.a,null,a.a.createElement(M.a,{flex:"auto"},a.a.createElement(Oe,null))))};function St(){var e=Object(u.o)(),t=Object(w.a)(e,1)[0];return a.a.createElement(F,{style:{flex:1,paddingTop:10}},a.a.createElement(fe,{openOrders:t}))}function Tt(e){var t=e.loaded,n=void 0!==t&&t,r=e.walletBalances;return a.a.createElement(ce,{emptyLabel:"No balances",dataSource:r,columns:[{title:"Coin",dataIndex:"key",key:"key"},{title:"Wallet Balance",dataIndex:"wallet",key:"wallet"}],pagination:!1,loading:!n})}function Mt(e){var t=e.accountBalances,n=Object(i.e)(),r=Object(l.c)().wallet;function c(){return(c=Object(ne.a)(te.a.mark((function e(t){var a,c,o,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.market,c=t.openOrders,o=t.baseCurrencyAccount,i=t.quoteCurrencyAccount,e.next=4,Object(oe.e)({market:a,openOrders:c,connection:n,wallet:r,baseCurrencyAccount:o,quoteCurrencyAccount:i});case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),Object(ie.a)({message:"Error settling funds",description:e.t0.message,type:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var o=[{title:"Market",dataIndex:"key",key:"key"},{title:"Orders",dataIndex:"orders",key:"orders"},{title:"Unsettled",dataIndex:"unsettled",key:"unsettled"},{key:"action",render:function(e){return a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(A.a,{ghost:!0,style:{marginRight:12},onClick:function(){return function(e){return c.apply(this,arguments)}(e)}},"Settle"))}}];return a.a.createElement(ce,{emptyLabel:"No balances",dataSource:t,columns:o.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{key:"".concat(e.market).concat(e.coin)})})),pagination:!1})}var Ct=pe.a.TabPane;function At(){var e=Object(u.A)(),t=Object(w.a)(e,2),n=t[0],r=t[1],c=Object(u.m)(),o=Object(w.a)(c,2),i=o[0],l=o[1];return a.a.createElement(F,{style:{flex:1,paddingTop:10}},a.a.createElement(pe.a,{defaultActiveKey:"walletBalances"},a.a.createElement(Ct,{tab:"Wallet Balances",key:"walletBalances"},a.a.createElement(Tt,{loaded:r,walletBalances:n})),a.a.createElement(Ct,{tab:"Market balances",key:"marketBalances"},a.a.createElement(Mt,{loaded:l,accountBalances:i}))))}var It=n(466),zt=n(485),Pt=n(486),Bt=n(115),Nt=n(268),Ft=n.n(Nt),Kt=a.a.createContext(null);function qt(e){var t=e.children,n=Object(I.i)("autoSettleEnabled",!1),r=Object(w.a)(n,2),c=r[0],o=r[1],s=Object(u.w)(),d=Object(w.a)(s,1)[0],m=Object(l.c)(),f=m.connected,p=m.wallet,b=Object(u.k)().customMarkets,v=Object(u.d)(b),g=Object(i.e)(),k=Object(u.v)(),h=Object(w.a)(k,1)[0];return z((function(){var e=function(){var e=Object(ne.a)(te.a.mark((function e(){var t;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.map((function(e){return e.market})),e.prev=1,console.log("Auto settling"),e.next=5,Object(oe.d)({connection:g,wallet:p,tokenAccounts:d||[],markets:t,selectedTokenAccounts:h});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Error auto settling funds: "+e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();f&&(null===p||void 0===p?void 0:p.autoApprove)&&c&&e()}),1e4),a.a.createElement(Kt.Provider,{value:{autoSettleEnabled:c,setAutoSettleEnabled:o}},t)}var Rt=h.a.Paragraph;function Lt(e){var t=e.autoApprove,n=function(){var e=Object(r.useContext)(Kt);if(!e)throw new Error("Missing preferences context");return{autoSettleEnabled:e.autoSettleEnabled,setAutoSettleEnabled:e.setAutoSettleEnabled}}(),c=n.autoSettleEnabled,o=n.setAutoSettleEnabled;return a.a.createElement("div",null,a.a.createElement(Ue.a,{style:{marginRight:10},disabled:!t,checked:t&&c,onChange:o})," ","Auto settle",!t&&a.a.createElement(Rt,{style:{color:"rgba(255,255,255,0.5)",marginTop:10}},"To use auto settle, first enable auto approval in your wallet"))}function Dt(e){var t=e.visible,n=e.testingConnection,c=e.onAddCustomEndpoint,o=e.onClose,i=Object(r.useState)(""),u=Object(w.a)(i,2),l=u[0],s=u[1],d=Object(r.useState)(""),m=Object(w.a)(d,2),f=m[0],p=m[1],b=function(){s(""),p(""),o&&o()},v=""!==l&&""!==f;return a.a.createElement(we.a,{title:"Add custom endpoint",visible:t,onOk:function(){c({name:f,endpoint:"https://"+l,custom:!0}),b()},okText:"Add",onCancel:b,okButtonProps:{disabled:!v,loading:n}},a.a.createElement(T.a,{style:{marginBottom:8}},a.a.createElement(M.a,{span:24},a.a.createElement(Le.a,{placeholder:"Cluster Name",value:f,onChange:function(e){return p(e.target.value)}}))),a.a.createElement(T.a,{style:{marginBottom:8}},a.a.createElement(M.a,{span:24},a.a.createElement(Le.a,{placeholder:"Cluster Endpoint",value:l,addonBefore:"https://",onChange:function(e){return s(e.target.value)}}))))}function Ut(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  color: #2abdd2;\n  font-weight: bold;\n  cursor: pointer;\n  img {\n    height: 30px;\n    margin-right: 8px;\n  }\n"]);return Ut=function(){return e},e}function _t(){var e=Object(s.a)(["\n  background-color: #0d1017;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  padding: 0px 30px;\n  flex-wrap: wrap;\n"]);return _t=function(){return e},e}var Wt=d.c.div(_t()),Ht=d.c.div(Ut()),Qt={"/learn":"https://serum-academy.com/en/serum-dex/","/add-market":"https://serum-academy.com/en/add-market/","/wallet-support":"https://serum-academy.com/en/wallet-support","/dex-list":"https://serum-academy.com/en/dex-list/","/developer-resources":"https://serum-academy.com/en/developer-resources/","/explorer":"https://explorer.solana.com","/srm-faq":"https://projectserum.com/srm-faq"};function Gt(){var e,t=Object(l.c)(),n=t.connected,c=t.wallet,o=t.providerUrl,u=t.setProvider,s=Object(i.f)(),d=s.endpoint,m=s.endpointInfo,f=s.setEndpoint,p=s.availableEndpoints,b=s.setCustomEndpoints,v=Object(r.useState)(!1),g=Object(w.a)(v,2),k=g[0],h=g[1],y=Object(r.useState)(!1),O=Object(w.a)(y,2),E=O[0],I=O[1],z=Object(j.f)(),P=Object(j.e)(),B=null===c||void 0===c||null===(e=c.publicKey)||void 0===e?void 0:e.toBase58(),N=Object(r.useCallback)((function(e){e.key in Qt||P.push(e.key)}),[P]),F=m&&m.custom;return Object(r.useEffect)((function(){var e=function(){F&&f(i.b[0].endpoint)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[F,f]),a.a.createElement(a.a.Fragment,null,a.a.createElement(Dt,{visible:k,testingConnection:E,onAddCustomEndpoint:function(e){if(p.some((function(t){return t.endpoint===e.endpoint})))Object(ie.a)({message:"An endpoint with the given url already exists",type:"error"});else{var t=function(t){console.log("Connection to ".concat(e.endpoint," failed: ").concat(t)),Object(ie.a)({message:"Failed to connect to ".concat(e.endpoint),type:"error"})};try{new mt.Connection(e.endpoint,"recent").getEpochInfo().then((function(t){I(!0),console.log("testing connection to ".concat(e.endpoint));var n=[].concat(Object(x.a)(p.filter((function(e){return e.custom}))),[e]);f(e.endpoint),b(n)})).catch(t)}catch(n){t(n)}finally{I(!1)}}},onClose:function(){return h(!1)}}),a.a.createElement(Wt,null,a.a.createElement(Ht,null,a.a.createElement("img",{src:Ft.a,alt:"",onClick:function(){return P.push("/")}}),"SERUM"),a.a.createElement(Bt.a,{mode:"horizontal",onClick:N,selectedKeys:[z.pathname],style:{borderBottom:"none",backgroundColor:"transparent",display:"flex",alignItems:"flex-end",flex:1}},a.a.createElement(Bt.a.Item,{key:"/"},"TRADE"),a.a.createElement(Bt.a.SubMenu,{title:"LEARN",onTitleClick:function(){return window.open(Qt["/learn"],"_blank")}},a.a.createElement(Bt.a.Item,{key:"/add-market"},a.a.createElement("a",{href:Qt["/add-market"],target:"_blank",rel:"noopener noreferrer"},"Adding a market")),a.a.createElement(Bt.a.Item,{key:"/wallet-support"},a.a.createElement("a",{href:Qt["/wallet-support"],target:"_blank",rel:"noopener noreferrer"},"Supported wallets")),a.a.createElement(Bt.a.Item,{key:"/dex-list"},a.a.createElement("a",{href:Qt["/dex-list"],target:"_blank",rel:"noopener noreferrer"},"DEX list")),a.a.createElement(Bt.a.Item,{key:"/developer-resources"},a.a.createElement("a",{href:Qt["/developer-resources"],target:"_blank",rel:"noopener noreferrer"},"Developer resources")),a.a.createElement(Bt.a.Item,{key:"/explorer"},a.a.createElement("a",{href:Qt["/explorer"],target:"_blank",rel:"noopener noreferrer"},"Solana block explorer")),a.a.createElement(Bt.a.Item,{key:"/srm-faq"},a.a.createElement("a",{href:Qt["/srm-faq"],target:"_blank",rel:"noopener noreferrer"},"SRM FAQ")))),a.a.createElement("div",null,a.a.createElement(T.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16},a.a.createElement(M.a,null,a.a.createElement(dt.a,{style:{color:"#2abdd2"},onClick:function(){return h(!0)}})),a.a.createElement(M.a,null,a.a.createElement(C.a,{content:d,placement:"bottomRight",title:"URL",trigger:"hover"},a.a.createElement(st.a,{style:{color:"#2abdd2"}}))),a.a.createElement(M.a,null,a.a.createElement(S.a,{onSelect:f,value:d,style:{marginRight:8,width:"150px"}},p.map((function(e){var t=e.name,n=e.endpoint;return a.a.createElement(S.a.Option,{value:n,key:n},t)})))))),n&&a.a.createElement("div",null,a.a.createElement(C.a,{content:a.a.createElement(Lt,{autoApprove:null===c||void 0===c?void 0:c.autoApprove}),placement:"bottomRight",title:"Settings",trigger:"click"},a.a.createElement(A.a,{style:{marginRight:8}},a.a.createElement(zt.a,null),"Settings"))),a.a.createElement("div",null,a.a.createElement(S.a,{onSelect:u,value:o},l.a.map((function(e){var t=e.name,n=e.url;return a.a.createElement(S.a.Option,{value:n,key:n},t)})))),a.a.createElement("div",null,a.a.createElement(A.a,{type:"text",size:"large",onClick:n?c.disconnect:c.connect,style:{color:"#2abdd2"}},a.a.createElement(Pt.a,null),n?"Disconnect":"Connect wallet"),n&&a.a.createElement(C.a,{content:a.a.createElement(rt,{address:B}),placement:"bottomRight",title:"Wallet public key",trigger:"click"},a.a.createElement(st.a,{style:{color:"#2abdd2"}})))))}var Jt=n(239),Xt="https://discord.gg/MxZFT4v",Vt="https://t.me/ProjectSerum",Yt="https://github.com/project-serum",Zt="https://projectserum.com/",$t="https://projectserum.com/developer-resources",en="https://solanabeach.io",tn=It.a.Footer,nn=Jt.a.useBreakpoint,rn=[{description:"Serum Developer Resources",link:$t},{description:"Discord",link:Xt},{description:"Telegram",link:Vt},{description:"GitHub",link:Yt},{description:"Project Serum",link:Zt},{description:"Solana Network",link:en}],an=function(){var e=!nn().lg;return a.a.createElement(tn,{style:{height:"45px",paddingBottom:10,paddingTop:10}},a.a.createElement(T.a,{align:"middle",gutter:[16,4]},!e&&a.a.createElement(a.a.Fragment,null,a.a.createElement(M.a,{flex:"auto"}),rn.map((function(e,t){return a.a.createElement(M.a,{key:t+""},a.a.createElement(Se.a,{external:!0,to:e.link},e.description))}))),a.a.createElement(M.a,{flex:"auto"})))},cn=It.a.Header,on=It.a.Content;function un(e){var t=e.children;return a.a.createElement(a.a.Fragment,null,a.a.createElement(It.a,{style:{display:"flex",minHeight:"100vh",flexDirection:"column"}},a.a.createElement(cn,{style:{padding:0,minHeight:64,height:"unset"}},a.a.createElement(Gt,null)),a.a.createElement(on,{style:{flex:1}},t),a.a.createElement(an,null)))}var ln=n(469),sn=n(83),dn=n(169);function mn(){var e=Object(s.a)(["\n  max-width: 800px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 24px;\n  margin-bottom: 24px;\n"]);return mn=function(){return e},e}var fn=h.a.Text,pn=h.a.Title,bn=d.c.div(mn());function vn(){var e,t,n=Object(i.e)(),c=Object(l.c)(),o=c.wallet,u=c.connected,s=gn("baseMint",a.a.createElement(fn,null,"Base Token Mint Address"," ",a.a.createElement(fn,{type:"secondary"},"(e.g. BTC solana address: ",a.a.createElement(fn,{type:"secondary",code:!0},"9n4nbM75f5Ui33ZbPYXn59EwSgE8CGsHtAeTH5YFeJ9E"),")")),"The base token is the token being traded. For example, the base token of a BTC/USDT market is BTC."),d=Object(w.a)(s,2),m=d[0],f=d[1],p=gn("quoteMint",a.a.createElement(fn,null,"Quote Token Mint Address"," ",a.a.createElement(fn,{type:"secondary"},"(e.g. USDT solana address: ",a.a.createElement(fn,{type:"secondary",code:!0},"BQcdHdAQW1hczDbBi9hiegXAR7A98Q9jx3X3iBBBDiq4"),")")),"The quote token is the token used to price trades. For example, the quote token of a BTC/USDT market is USDT."),b=Object(w.a)(p,2),v=b[0],g=b[1],k=Object(r.useState)("1"),h=Object(w.a)(k,2),y=h[0],O=h[1],E=Object(r.useState)("0.01"),j=Object(w.a)(E,2),x=j[0],S=j[1],T=ve.MARKETS.find((function(e){return!e.deprecated})).programId,M=Object(r.useState)(!1),C=Object(w.a)(M,2),I=C[0],z=C[1],P=Object(r.useState)(null),B=Object(w.a)(P,2),N=B[0],K=B[1];f&&parseFloat(y)>0&&(e=Math.round(Math.pow(10,f.decimals)*parseFloat(y)),g&&parseFloat(x)>0&&(t=Math.round(parseFloat(y)*Math.pow(10,g.decimals)*parseFloat(x))));var q=u&&!!f&&!!g&&!!e&&!!t;function R(){return(R=Object(ne.a)(te.a.mark((function r(){var a;return te.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(q){r.next=2;break}return r.abrupt("return");case 2:return z(!0),r.prev=3,r.next=6,Object(oe.b)({connection:n,wallet:o,baseMint:f.address,quoteMint:g.address,baseLotSize:e,quoteLotSize:t,dexProgramId:T});case 6:a=r.sent,K(a),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(3),console.warn(r.t0),Object(ie.a)({message:"Error listing new market: "+r.t0.message,type:"error"});case 14:return r.prev=14,z(!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))).apply(this,arguments)}return a.a.createElement(bn,null,a.a.createElement(F,null,a.a.createElement(pn,{level:4},"List New Market"),a.a.createElement(ln.a,{labelCol:{span:24},wrapperCol:{span:24},layout:"vertical",onFinish:function(){return R.apply(this,arguments)}},m,v,a.a.createElement(ln.a.Item,{label:a.a.createElement(sn.a,{title:"Smallest allowed order size. For a BTC/USDT market, this would be in units of BTC."},"Minimum Order Size ",a.a.createElement(fn,{type:"secondary"},"(Lot size in e.g. BTC)")),name:"lotSize",initialValue:"1",validateStatus:f&&g?e?"success":"error":null,hasFeedback:f&&g},a.a.createElement(Le.a,{value:y,onChange:function(e){return O(e.target.value.trim())},type:"number",min:"0",step:"any"})),a.a.createElement(ln.a.Item,{label:a.a.createElement(sn.a,{title:"Smallest amount by which prices can move. For a BTC/USDT market, this would be in units of USDT."},"Tick Size ",a.a.createElement(fn,{type:"secondary"},"(Price increment in e.g. USDT)")),name:"tickSize",initialValue:"0.01",validateStatus:f&&g?t?"success":"error":null,hasFeedback:f&&g},a.a.createElement(Le.a,{value:x,onChange:function(e){return S(e.target.value.trim())},type:"number",min:"0",step:"any"})),a.a.createElement(ln.a.Item,{label:" ",colon:!1},a.a.createElement(A.a,{type:"primary",htmlType:"submit",disabled:!q,loading:I},u?"Submit":"Not connected to wallet")))),N?a.a.createElement(F,null,a.a.createElement(fn,null,"New market address: ",N.toBase58())):null)}function gn(e,t,n){var c=Object(r.useState)(""),o=Object(w.a)(c,2),u=o[0],l=o[1],s=Object(i.d)(Object(I.e)(u)?new mt.PublicKey(u):null),d=Object(w.a)(s,2),m=d[0],f=d[1],p=null,b=!1,v=null,g=null;if(u)if(b=!0,m)if(m.owner.equals(ve.TokenInstructions.TOKEN_PROGRAM_ID)&&82===m.data.length){var k=Object(dn.b)(m.data);k.initialized?(p="success",g={address:new mt.PublicKey(u),decimals:k.decimals}):(p="error",v="Invalid SPL mint")}else p="error",v="Invalid SPL mint address";else Object(I.e)(u)&&!f?p="loading":(p="error",v="Invalid Solana address");return[a.a.createElement(ln.a.Item,{label:a.a.createElement(sn.a,{title:a.a.createElement(a.a.Fragment,null,n," You can look up token mint addresses on"," ",a.a.createElement(Se.a,{external:!0,to:"https://sollet.io"},"sollet.io"),".")},t),name:e,validateStatus:p,hasFeedback:b,help:v},a.a.createElement(Le.a,{value:u,onChange:function(e){return l(e.target.value.trim())}})),g]}function kn(){return a.a.createElement(E.a,{basename:"/"},a.a.createElement(j.a,{exact:!0,path:"/",component:hn}),a.a.createElement(j.a,{exact:!0,path:"/orders",component:yn}),a.a.createElement(j.a,{exact:!0,path:"/balances",component:On}),a.a.createElement(j.a,{exact:!0,path:"/list-new-market"},a.a.createElement(un,null,a.a.createElement(vn,null))))}function hn(){return a.a.createElement(un,null,a.a.createElement(yt,null))}function yn(){return a.a.createElement(un,null,a.a.createElement(St,null))}function On(){return a.a.createElement(un,null,a.a.createElement(At,null))}function En(){return a.a.createElement(r.Suspense,{fallback:function(){return a.a.createElement(p.a,{size:"large"})}},a.a.createElement(f,null),a.a.createElement(O,null,a.a.createElement(i.a,null,a.a.createElement(u.a,null,a.a.createElement(l.b,null,a.a.createElement(qt,null,a.a.createElement(r.Suspense,{fallback:function(){return a.a.createElement(p.a,{size:"large"})}},a.a.createElement(kn,null))))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(En,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f}));var r=n(9),a=n(0),c=n.n(a),o=n(243),i=n(27),u=n(37),l=n(29),s=[{name:"sollet.io",url:"https://www.sollet.io"}],d=c.a.createContext(null);function m(e){var t,n,m,f=e.children,p=Object(u.f)().endpoint,b=Object(l.i)("walletProvider","https://www.sollet.io"),v=Object(r.a)(b,2),g=v[0],k=v[1];m=g||"https://www.sollet.io";var h=Object(a.useMemo)((function(){return new o.a(m,p)}),[m,p]),y=Object(a.useState)(!1),O=Object(r.a)(y,2),E=O[0],j=O[1];return Object(a.useEffect)((function(){return console.log("trying to connect"),h.on("connect",(function(){console.log("connected"),j(!0);var e=h.publicKey.toBase58(),t=e.length>20?"".concat(e.substring(0,7),".....").concat(e.substring(e.length-7,e.length)):e;Object(i.a)({message:"Wallet update",description:"Connected to wallet "+t})})),h.on("disconnect",(function(){j(!1),Object(i.a)({message:"Wallet update",description:"Disconnected from wallet"})})),function(){h.disconnect(),j(!1)}}),[h]),c.a.createElement(d.Provider,{value:{wallet:h,connected:E,providerUrl:m,setProviderUrl:k,providerName:null!==(t=null===(n=s.find((function(e){return e.url===m})))||void 0===n?void 0:n.name)&&void 0!==t?t:m}},f)}function f(){var e=Object(a.useContext)(d);if(!e)throw new Error("Missing wallet context");return{connected:e.connected,wallet:e.wallet,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName}}},68:function(e,t,n){"use strict";n.d(t,"c",(function(){return k})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return y}));n(86);var r=n(9),a=n(64),c=n(10),o=n.n(c),i=n(23),u=n(110),l=n(104),s=n(0),d=n(15),m=n.n(d),f=new Date,p=new Map,b=function e(t,n,r,a,c){Object(l.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.refreshInterval=void 0,this.refreshIntervalOnError=void 0,this.callback=void 0,this.cacheKey=t,this.fn=n,this.refreshInterval=r,this.refreshIntervalOnError=a,this.callback=c},v=function(){function e(t,n){var r=this;Object(l.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.timeoutId=void 0,this.listeners=void 0,this.errors=void 0,this.refresh=Object(i.a)(o.a.mark((function e(){var t,n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.timeoutId&&(clearTimeout(r.timeoutId),r.timeoutId=null),!r.stopped){e.next=3;break}return e.abrupt("return");case 3:return t=!1,e.prev=4,e.next=7,r.fn();case 7:return n=e.sent,p.set(r.cacheKey,n),r.errors=0,r.notifyListeners(),e.abrupt("return",n);case 14:e.prev=14,e.t0=e.catch(4),++r.errors,console.warn(e.t0),t=!0;case 19:return e.prev=19,r.timeoutId||r.stopped||(a=r.refreshInterval,t&&r.refreshIntervalOnError&&r.refreshIntervalOnError>0&&(a=r.refreshIntervalOnError),r.errors>0&&(a=Math.min(1e3*Math.pow(2,r.errors-1),6e4)),(c=+new Date-+f)<5e3&&(a+=5e3-c/2),"hidden"===document.visibilityState?a=6e4:document.hasFocus()||(a*=1.5),a*=.8+.4*Math.random(),r.timeoutId=setTimeout(r.refresh,a)),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[4,14,19,22]])}))),this.cacheKey=t,this.fn=n,this.timeoutId=null,this.listeners=new Set,this.errors=0}return Object(u.a)(e,[{key:"addListener",value:function(e){var t=this.refreshInterval;this.listeners.add(e),this.refreshInterval<t&&this.refresh()}},{key:"removeListener",value:function(e){m()(this.listeners.delete(e)),this.stopped&&this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"notifyListeners",value:function(){this.listeners.forEach((function(e){return e.callback()}))}},{key:"refreshInterval",get:function(){return Math.min.apply(Math,Object(a.a)(Object(a.a)(this.listeners).map((function(e){return e.refreshInterval}))))}},{key:"refreshIntervalOnError",get:function(){var e=Object(a.a)(this.listeners).map((function(e){return e.refreshIntervalOnError})).filter((function(e){return null!==e}));return 0===e.length?null:Math.min.apply(Math,Object(a.a)(e))}},{key:"stopped",get:function(){return 0===this.listeners.size}}]),e}(),g=new(function(){function e(){Object(l.a)(this,e),this.loops=new Map}return Object(u.a)(e,[{key:"addListener",value:function(e){this.loops.has(e.cacheKey)||this.loops.set(e.cacheKey,new v(e.cacheKey,e.fn)),this.loops.get(e.cacheKey).addListener(e)}},{key:"removeListener",value:function(e){var t=this.loops.get(e.cacheKey);t.removeListener(e),t.stopped&&this.loops.delete(e.cacheKey)}},{key:"refresh",value:function(e){this.loops.has(e)&&this.loops.get(e).refresh()}},{key:"refreshAll",value:function(){return Promise.all(Object(a.a)(this.loops.values()).map((function(e){return e.refresh()})))}}]),e}());function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.refreshInterval,c=void 0===a?6e4:a,o=n.refreshIntervalOnError,i=void 0===o?null:o,u=Object(s.useReducer)((function(e){return e+1}),0),l=Object(r.a)(u,2),d=l[1];if(Object(s.useEffect)((function(){if(!t)return function(){};var n=new b(t,e,c,i,d);return g.addListener(n),function(){return g.removeListener(n)}}),[t,c]),!t)return[null,!1];var m=p.has(t),f=m?p.get(t):void 0;return[f,m]}function h(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&p.delete(e);var n=g.loops.get(e);n&&(n.refresh(),t&&n.notifyListeners())}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.initializeOnly,a=void 0!==r&&r;if(!a||!p.has(e)){p.set(e,t);var c=g.loops.get(e);c&&c.notifyListeners()}}},69:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return k})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return E})),n.d(t,"c",(function(){return S})),n.d(t,"b",(function(){return M}));var r=n(86),a=n(9),c=n(39),o=n(64),i=n(10),u=n.n(i),l=n(23),s=n(27),d=n(29),m=n(14),f=n(21),p=n(66),b=n(31);function v(e){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.connection,r=t.wallet,a=t.mintPublicKey,c=new f.Account,e.t0=f.SystemProgram,e.t1=r.publicKey,e.t2=c.publicKey,e.next=7,n.getMinimumBalanceForRentExemption(165);case 7:return e.t3=e.sent,e.t4=b.TokenInstructions.TOKEN_PROGRAM_ID,e.t5={fromPubkey:e.t1,newAccountPubkey:e.t2,lamports:e.t3,space:165,programId:e.t4},(o=e.t0.createAccount.call(e.t0,e.t5)).add(b.TokenInstructions.initializeAccount({account:c.publicKey,mint:a,owner:r.publicKey})),e.abrupt("return",{transaction:o,signer:c,newAccountPubkey:c.publicKey});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return h.apply(this,arguments)}function h(){return(h=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,i,l,d,m,f,p,g,k,h,y,O,E,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.market,r=t.openOrders,a=t.connection,c=t.wallet,i=t.baseCurrencyAccount,l=t.quoteCurrencyAccount,n&&c&&a&&r&&(i||l)){e.next=4;break}return Object(s.a)({message:"Not connected"}),e.abrupt("return");case 4:if(f=null===i||void 0===i?void 0:i.pubkey,p=null===l||void 0===l?void 0:l.pubkey,f){e.next=13;break}return e.next=9,v({connection:a,wallet:c,mintPublicKey:n.baseMintAddress});case 9:g=e.sent,f=null===g||void 0===g?void 0:g.newAccountPubkey,d=null===g||void 0===g?void 0:g.transaction,m=null===g||void 0===g?void 0:g.signer;case 13:if(p){e.next=20;break}return e.next=16,v({connection:a,wallet:c,mintPublicKey:n.quoteMintAddress});case 16:k=e.sent,p=null===k||void 0===k?void 0:k.newAccountPubkey,d=null===k||void 0===k?void 0:k.transaction,m=null===k||void 0===k?void 0:k.signer;case 20:return null,n.supportsReferralFees&&(b.TOKEN_MINTS.find((function(e){return"USDT"===e.name})),b.TOKEN_MINTS.find((function(e){return"USDC"===e.name}))),e.next=24,n.makeSettleFundsTransaction(a,r,f,p,null);case 24:return h=e.sent,y=h.transaction,O=h.signers,E=R([d,y]),j=m?[].concat(Object(o.a)(O),[m]):O,e.next=31,I({transaction:E,signers:j,wallet:c,connection:a,sendingMessage:"Settling funds..."});case 31:return e.abrupt("return",e.sent);case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return O.apply(this,arguments)}function O(){return(O=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,o,i,s,d,f,p,v,g,k;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.connection,r=t.wallet,a=t.tokenAccounts,c=t.markets,o=t.selectedTokenAccounts,c&&r&&n&&a){e.next=3;break}return e.abrupt("return");case 3:return i=[],c.reduce((function(e,t){return e.push(t._programId),e}),[]).forEach((function(e){i.find((function(t){return t.equals(e)}))||i.push(e)})),s=function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.OpenOrders.findForOwner(n,r.publicKey,t);case 2:return a=e.sent,e.abrupt("return",a.filter((function(e){return e.baseTokenFree.toNumber()||e.quoteTokenFree.toNumber()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(i.map((function(e){return s(e)})));case 8:return d=e.sent,f=d.reduce((function(e,t){return e.concat(t)}),[]),e.next=12,Promise.all(f.map((function(e){var t,r,i=c.find((function(t){var n,r;return null===(n=t._decoded)||void 0===n||null===(r=n.ownAddress)||void 0===r?void 0:r.equals(e.market)})),u=null===i||void 0===i?void 0:i.baseMintAddress,l=null===i||void 0===i?void 0:i.quoteMintAddress,s=null===(t=Object(m.c)(a,u,u&&o&&o[u.toBase58()]))||void 0===t?void 0:t.pubkey,d=null===(r=Object(m.c)(a,l,l&&o&&o[l.toBase58()]))||void 0===r?void 0:r.pubkey;return s&&d?i&&i.makeSettleFundsTransaction(n,e,s,d):null})));case 12:if((p=e.sent.filter((function(e){return!!e})))&&0!==p.length){e.next=15;break}return e.abrupt("return");case 15:return v=p.slice(0,4).map((function(e){return e.transaction})),g=[],p.reduce((function(e,t){return e.concat(t.signers)}),[]).forEach((function(e){g.find((function(t){return t.constructor.name===e.constructor.name&&("PublicKey"===t.constructor.name?t.equals(e):t.publicKey.equals(e.publicKey))}))||g.push(e)})),k=R(v),e.next=21,I({transaction:k,signers:g,wallet:r,connection:n});case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x(Object(c.a)(Object(c.a)({},t),{},{orders:[t.order]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.market,r=t.wallet,a=t.connection,c=t.orders,o=n.makeMatchOrdersTransaction(5),c.forEach((function(e){o.add(n.makeCancelOrderInstruction(a,r.publicKey,e))})),o.add(n.makeMatchOrdersTransaction(5)),e.next=6,I({transaction:o,wallet:r,connection:a,sendingMessage:"Sending cancel..."});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,o,i,l,m,f,p,b,v,g,k,h,y,O,E,j,x,w;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.side,c=t.price,o=t.size,i=t.orderType,l=t.market,m=t.connection,f=t.wallet,p=t.baseCurrencyAccount,b=t.quoteCurrencyAccount,v=(null===l||void 0===l||null===(n=l.minOrderSize)||void 0===n?void 0:n.toFixed(Object(d.c)(l.minOrderSize)))||(null===l||void 0===l?void 0:l.minOrderSize),g=(null===l||void 0===l||null===(r=l.tickSize)||void 0===r?void 0:r.toFixed(Object(d.c)(l.tickSize)))||(null===l||void 0===l?void 0:l.tickSize),k=function(e,t){return Math.abs(e/t%1)<1e-5||Math.abs(e/t%1-1)<1e-5},!isNaN(c)){e.next=7;break}return Object(s.a)({message:"Invalid price",type:"error"}),e.abrupt("return");case 7:if(!isNaN(o)){e.next=10;break}return Object(s.a)({message:"Invalid size",type:"error"}),e.abrupt("return");case 10:if(f&&f.publicKey){e.next=13;break}return Object(s.a)({message:"Connect wallet",type:"error"}),e.abrupt("return");case 13:if(l){e.next=16;break}return Object(s.a)({message:"Invalid  market",type:"error"}),e.abrupt("return");case 16:if(k(o,l.minOrderSize)){e.next=19;break}return Object(s.a)({message:"Size must be an increment of ".concat(v),type:"error"}),e.abrupt("return");case 19:if(!(o<l.minOrderSize)){e.next=22;break}return Object(s.a)({message:"Size too small",type:"error"}),e.abrupt("return");case 22:if(k(c,l.tickSize)){e.next=25;break}return Object(s.a)({message:"Price must be an increment of ".concat(g),type:"error"}),e.abrupt("return");case 25:if(!(c<l.tickSize)){e.next=28;break}return Object(s.a)({message:"Price under tick size",type:"error"}),e.abrupt("return");case 28:if(h=f.publicKey,y="sell"===a?p:b){e.next=33;break}return Object(s.a)({message:"Need an SPL token account for cost currency",type:"error"}),e.abrupt("return");case 33:return O={owner:h,payer:y,side:a,price:c,size:o,orderType:i},console.log(O),E=l.makeMatchOrdersTransaction(5),e.next=38,l.makePlaceOrderTransaction(m,O,1e4,1e4);case 38:return j=e.sent,x=j.transaction,w=j.signers,E.add(x),E.add(l.makeMatchOrdersTransaction(5)),e.next=45,I({transaction:E,wallet:f,connection:m,signers:w,sendingMessage:"Sending order..."});case 45:return e.abrupt("return",e.sent);case 46:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(u.a.mark((function t(n){var c,o,i,s,d,m,v,g,k,h,y,O,E,j,x,w,S,T,M,C,A,I,z,B,F,K,q,R;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return T=function(){return(T=Object(l.a)(u.a.mark((function t(){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new p.BN(0);case 1:return t.prev=2,t.next=5,f.PublicKey.createProgramAddress([g.publicKey.toBuffer(),n.toArrayLike(e,"le",8)],v);case 5:return r=t.sent,t.abrupt("return",[r,n]);case 9:t.prev=9,t.t0=t.catch(2),n.iaddn(1);case 12:t.next=1;break;case 14:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)},S=function(){return T.apply(this,arguments)},c=n.connection,o=n.wallet,i=n.baseMint,s=n.quoteMint,d=n.baseLotSize,m=n.quoteLotSize,v=n.dexProgramId,g=new f.Account,k=new f.Account,h=new f.Account,y=new f.Account,O=new f.Account,E=new f.Account,j=new f.Account,x=0,w=new p.BN(100),t.next=14,S();case 14:return M=t.sent,C=Object(a.a)(M,2),A=C[0],I=C[1],z=new f.Transaction,t.t0=z,t.t1=f.SystemProgram,t.t2=o.publicKey,t.t3=E.publicKey,t.next=25,c.getMinimumBalanceForRentExemption(165);case 25:return t.t4=t.sent,t.t5=b.TokenInstructions.TOKEN_PROGRAM_ID,t.t6={fromPubkey:t.t2,newAccountPubkey:t.t3,lamports:t.t4,space:165,programId:t.t5},t.t7=t.t1.createAccount.call(t.t1,t.t6),t.t8=f.SystemProgram,t.t9=o.publicKey,t.t10=j.publicKey,t.next=34,c.getMinimumBalanceForRentExemption(165);case 34:return t.t11=t.sent,t.t12=b.TokenInstructions.TOKEN_PROGRAM_ID,t.t13={fromPubkey:t.t9,newAccountPubkey:t.t10,lamports:t.t11,space:165,programId:t.t12},t.t14=t.t8.createAccount.call(t.t8,t.t13),t.t15=b.TokenInstructions.initializeAccount({account:E.publicKey,mint:i,owner:A}),t.t16=b.TokenInstructions.initializeAccount({account:j.publicKey,mint:s,owner:A}),t.t0.add.call(t.t0,t.t7,t.t14,t.t15,t.t16),B=new f.Transaction,t.t17=B,t.t18=f.SystemProgram,t.t19=o.publicKey,t.t20=g.publicKey,t.next=48,c.getMinimumBalanceForRentExemption(b.Market.getLayout(v).span);case 48:return t.t21=t.sent,t.t22=b.Market.getLayout(v).span,t.t23=v,t.t24={fromPubkey:t.t19,newAccountPubkey:t.t20,lamports:t.t21,space:t.t22,programId:t.t23},t.t25=t.t18.createAccount.call(t.t18,t.t24),t.t26=f.SystemProgram,t.t27=o.publicKey,t.t28=k.publicKey,t.next=58,c.getMinimumBalanceForRentExemption(5132);case 58:return t.t29=t.sent,t.t30=5132,t.t31=v,t.t32={fromPubkey:t.t27,newAccountPubkey:t.t28,lamports:t.t29,space:t.t30,programId:t.t31},t.t33=t.t26.createAccount.call(t.t26,t.t32),t.t34=f.SystemProgram,t.t35=o.publicKey,t.t36=h.publicKey,t.next=68,c.getMinimumBalanceForRentExemption(262156);case 68:return t.t37=t.sent,t.t38=262156,t.t39=v,t.t40={fromPubkey:t.t35,newAccountPubkey:t.t36,lamports:t.t37,space:t.t38,programId:t.t39},t.t41=t.t34.createAccount.call(t.t34,t.t40),t.t42=f.SystemProgram,t.t43=o.publicKey,t.t44=y.publicKey,t.next=78,c.getMinimumBalanceForRentExemption(65548);case 78:return t.t45=t.sent,t.t46=65548,t.t47=v,t.t48={fromPubkey:t.t43,newAccountPubkey:t.t44,lamports:t.t45,space:t.t46,programId:t.t47},t.t49=t.t42.createAccount.call(t.t42,t.t48),t.t50=f.SystemProgram,t.t51=o.publicKey,t.t52=O.publicKey,t.next=88,c.getMinimumBalanceForRentExemption(65548);case 88:return t.t53=t.sent,t.t54=65548,t.t55=v,t.t56={fromPubkey:t.t51,newAccountPubkey:t.t52,lamports:t.t53,space:t.t54,programId:t.t55},t.t57=t.t50.createAccount.call(t.t50,t.t56),t.t58=b.DexInstructions.initializeMarket({market:g.publicKey,requestQueue:k.publicKey,eventQueue:h.publicKey,bids:y.publicKey,asks:O.publicKey,baseVault:E.publicKey,quoteVault:j.publicKey,baseMint:i,quoteMint:s,baseLotSize:new p.BN(d),quoteLotSize:new p.BN(m),feeRateBps:x,vaultSignerNonce:I,quoteDustThreshold:w,programId:v}),t.t17.add.call(t.t17,t.t25,t.t33,t.t41,t.t49,t.t57,t.t58),t.next=97,Promise.all([P({transaction:z,wallet:o,connection:c,signers:[o.publicKey,E,j]}),P({transaction:B,wallet:o,connection:c,signers:[o.publicKey,g,k,h,y,O]})]);case 97:F=t.sent,K=Object(r.a)(F),t.prev=99,K.s();case 101:if((q=K.n()).done){t.next=107;break}return R=q.value,t.next=105,N({signedTransaction:R,connection:c});case 105:t.next=101;break;case 107:t.next=112;break;case 109:t.prev=109,t.t59=t.catch(99),K.e(t.t59);case 112:return t.prev=112,K.f(),t.finish(112);case 115:return t.abrupt("return",g.publicKey);case 116:case"end":return t.stop()}}),t,null,[[99,109,112,115]])})))).apply(this,arguments)}var A=function(){return(new Date).getTime()/1e3};function I(e){return z.apply(this,arguments)}function z(){return(z=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,o,i,l,s,d,m,f,p,b,v;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=t.wallet,a=t.signers,c=void 0===a?[r.publicKey]:a,o=t.connection,i=t.sendingMessage,l=void 0===i?"Sending transaction...":i,s=t.sentMessage,d=void 0===s?"Transaction sent":s,m=t.successMessage,f=void 0===m?"Transaction confirmed":m,p=t.timeout,b=void 0===p?15e3:p,e.next=3,P({transaction:n,wallet:r,signers:c,connection:o});case 3:return v=e.sent,e.next=6,N({signedTransaction:v,connection:o,sendingMessage:l,sentMessage:d,successMessage:f,timeout:b});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=t.wallet,a=t.signers,c=void 0===a?[r.publicKey]:a,i=t.connection,e.next=3,i.getRecentBlockhash("max");case 3:return n.recentBlockhash=e.sent.blockhash,n.signPartial.apply(n,Object(o.a)(c)),e.next=7,r.signTransaction(n);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(u.a.mark((function e(t){var n,r,a,c,o,i,m,f,p,b,v,g,k,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.sendingMessage,c=void 0===a?"Sending transaction...":a,o=t.sentMessage,i=void 0===o?"Transaction sent":o,m=t.successMessage,f=void 0===m?"Transaction confirmed":m,p=t.timeout,b=void 0===p?15e3:p,v=n.serialize(),g=A(),Object(s.a)({message:c}),e.next=6,r.sendRawTransaction(v,{skipPreflight:!0});case 6:return k=e.sent,Object(s.a)({message:i,type:"success",txid:k}),console.log("Started awaiting confirmation for",k),h=!1,Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h||!(A()-g<b)){e.next=6;break}return r.sendRawTransaction(v,{skipPreflight:!0}),e.next=4,Object(d.h)(300);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=11,e.next=14,K(k,b,r);case 14:e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(11),!e.t0.timeout){e.next=20;break}throw new Error("Timed out awaiting confirmation on transaction");case 20:throw new Error("Transaction failed");case 21:return e.prev=21,h=!0,e.finish(21);case 24:return Object(s.a)({message:f,type:"success",txid:k}),console.log("Latency",k,A()-g),e.abrupt("return",k);case 27:case"end":return e.stop()}}),e,null,[[11,16,21,24]])})))).apply(this,arguments)}function K(e,t,n){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(u.a.mark((function e(t,n,r){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,new Promise((function(e,c){Object(l.a)(u.a.mark((function o(){return u.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:setTimeout((function(){a||(a=!0,console.log("Timed out for txid",t),c({timeout:!0}))}),n);try{r.onSignature(t,(function(n){console.log("WS confirmed",t,n),a=!0,n.err?c(n.err):e(n)}),"recent"),console.log("Set up WS connection",t)}catch(i){a=!0,console.log("WS error in setup",t,i)}case 2:if(a){o.next=8;break}return Object(l.a)(u.a.mark((function n(){var o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.getSignatureStatuses([t]);case 3:o=n.sent,i=o&&o.value[0],a||(i?i.err?(console.log("REST error for",t,i),a=!0,c(i.err)):i.confirmations?(console.log("REST confirmation for",t,i),a=!0,e(i)):console.log("REST no confirmations for",t,i):console.log("REST null result for",t,i)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a||console.log("REST connection error: txid",t,n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))(),o.next=6,Object(d.h)(300);case 6:o.next=2;break;case 8:case"end":return o.stop()}}),o)})))()}));case 3:return c=e.sent,a=!0,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=new f.Transaction;return e.filter((function(e){return void 0!==e})).forEach((function(e){t.add(e)})),t}}).call(this,n(95).Buffer)},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(210),a=n(0),c=n.n(a),o=n(137);function i(e){var t=e.external,n=void 0!==t&&t,a=Object(r.a)(e,["external"]),i=a.to,u=a.children,l=Object(r.a)(a,["to","children"]);return n?c.a.createElement("a",Object.assign({href:i,target:"_blank",rel:"noopener noreferrer"},l),u):c.a.createElement(o.b,Object.assign({to:i},l),u)}}},[[274,1,2]]]);
//# sourceMappingURL=main.ade1ba37.chunk.js.map